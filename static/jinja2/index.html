
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Jinja2 2.6 documentation</title>
    <link rel="stylesheet" href="_static/jinja.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="index.html#document-index">Jinja2 2.6 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-jinja2">
<h1>Welcome to Jinja2<a class="headerlink" href="#welcome-to-jinja2" title="Permalink to this headline">¶</a></h1>
<p>Jinja2 is a modern and designer friendly templating language for Python,
modelled after Django’s templates.  It is fast, widely used and secure
with the optional sandboxed template execution environment:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">user.url</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">user.username</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>Features:</strong></p>
<ul class="simple">
<li>sandboxed execution</li>
<li>powerful automatic HTML escaping system for XSS prevention</li>
<li>template inheritance</li>
<li>compiles down to the optimal python code just in time</li>
<li>optional ahead of time template compilation</li>
<li>easy to debug.  Line numbers of exceptions directly point to
the correct line in the template.</li>
<li>configurable syntax</li>
</ul>
<div class="section" id="jinja2-documentation">
<h2>Jinja2 Documentation<a class="headerlink" href="#jinja2-documentation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-intro"></span><div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>This is the documentation for the Jinja2 general purpose templating language.
Jinja2 is a library for Python 2.4 and onwards that is designed to be flexible,
fast and secure.</p>
<p>If you have any exposure to other text-based template languages, such as Smarty or
Django, you should feel right at home with Jinja2.  It’s both designer and
developer friendly by sticking to Python’s principles and adding functionality
useful for templating environments.</p>
<div class="section" id="prerequisites">
<h4>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h4>
<p>Jinja2 needs at least <strong>Python 2.4</strong> to run.  Additionally a working C-compiler
that can create python extensions should be installed for the debugger if you
are using Python 2.4.</p>
<p>If you don’t have a working C-compiler and you are trying to install the source
release with the debugsupport you will get a compiler error.</p>
</div>
<div class="section" id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<p>You have multiple ways to install Jinja2.  If you are unsure what to do, go
with the Python egg or tarball.</p>
<div class="section" id="as-a-python-egg-via-easy-install">
<h5>As a Python egg (via easy_install)<a class="headerlink" href="#as-a-python-egg-via-easy-install" title="Permalink to this headline">¶</a></h5>
<p>You can install the most recent Jinja2 version using <a class="reference external" href="http://peak.telecommunity.com/DevCenter/EasyInstall">easy_install</a> or <a class="reference external" href="http://pypi.python.org/pypi/pip">pip</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">easy_install</span> <span class="n">Jinja2</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">Jinja2</span>
</pre></div>
</div>
<p>This will install a Jinja2 egg in your Python installation’s site-packages
directory.</p>
<p>(If you are installing from the windows command line omit the <cite>sudo</cite> and make
sure to run the command as user with administrator rights)</p>
</div>
<div class="section" id="from-the-tarball-release">
<h5>From the tarball release<a class="headerlink" href="#from-the-tarball-release" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li>Download the most recent tarball from the <a class="reference external" href="http://pypi.python.org/pypi/Jinja2">download page</a></li>
<li>Unpack the tarball</li>
<li><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code></li>
</ol>
<p>Note that you either have to have setuptools or <a class="reference external" href="http://pypi.python.org/pypi/distribute">distribute</a> installed,
the latter is preferred.</p>
<p>This will install Jinja2 into your Python installation’s site-packages directory.</p>
</div>
<div class="section" id="installing-the-development-version">
<h5>Installing the development version<a class="headerlink" href="#installing-the-development-version" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li>Install <a class="reference external" href="http://git-scm.org/">git</a></li>
<li><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">git://github.com/mitsuhiko/jinja2.git</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">jinja2</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">ln</span> <span class="pre">-s</span> <span class="pre">jinja2</span> <span class="pre">/usr/lib/python2.X/site-packages</span></code></li>
</ol>
<p>As an alternative to steps 4 you can also do <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code>
which will install the package via distribute in development mode.  This also
has the advantage that the C extensions are compiled.</p>
</div>
<div class="section" id="more-speed-with-markupsafe">
<h5>More Speed with MarkupSafe<a class="headerlink" href="#more-speed-with-markupsafe" title="Permalink to this headline">¶</a></h5>
<p>As of version 2.5.1 Jinja2 will check for an installed <a class="reference external" href="http://pypi.python.org/pypi/MarkupSafe">MarkupSafe</a>
module.  If it can find it, it will use the Markup class of that module
instead of the one that comes with Jinja2.  <cite>MarkupSafe</cite> replaces the
older speedups module that came with Jinja2 and has the advantage that is
has a better setup script and will automatically attempt to install the C
version and nicely fall back to a pure Python implementation if that is
not possible.</p>
<p>The C implementation of MarkupSafe is much faster and recommended when
using Jinja2 with autoescaping.</p>
</div>
<div class="section" id="enable-the-debug-support-module">
<h5>Enable the debug support Module<a class="headerlink" href="#enable-the-debug-support-module" title="Permalink to this headline">¶</a></h5>
<p>By default Jinja2 will not compile the debug support module.  Enabling this
will fail if you don’t have the Python headers or a working compiler.  This
is often the case if you are installing Jinja2 from a windows machine.</p>
<p>Because the debug support is only necessary for Python 2.4 you will not
have to do this unless you run 2.4:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">debugsupport</span> <span class="n">install</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="basic-api-usage">
<h4>Basic API Usage<a class="headerlink" href="#basic-api-usage" title="Permalink to this headline">¶</a></h4>
<p>This section gives you a brief introduction to the Python API for Jinja2
templates.</p>
<p>The most basic way to create a template and render it is through
<a class="reference internal" href="index.html#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a>.  This however is not the recommended way to
work with it if your templates are not loaded from strings but the file
system or another data source:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Template</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s1">&#39;Hello {{ name }}!&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;John Doe&#39;</span><span class="p">)</span>
<span class="go">u&#39;Hello John Doe!&#39;</span>
</pre></div>
</div>
<p>By creating an instance of <a class="reference internal" href="index.html#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> you get back a new template
object that provides a method called <a class="reference internal" href="index.html#jinja2.Template.render" title="jinja2.Template.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a> which when
called with a dict or keyword arguments expands the template.  The dict
or keywords arguments passed to the template are the so-called “context”
of the template.</p>
<p>What you can see here is that Jinja2 is using unicode internally and the
return value is an unicode string.  So make sure that your application is
indeed using unicode internally.</p>
</div>
<div class="section" id="experimental-python-3-support">
<h4>Experimental Python 3 Support<a class="headerlink" href="#experimental-python-3-support" title="Permalink to this headline">¶</a></h4>
<p>Jinja 2.3 brings experimental support for Python 3.  It means that all
unittests pass on the new version, but there might still be small bugs in
there and behavior might be inconsistent.  If you notice any bugs, please
provide feedback in the <a class="reference external" href="http://github.com/mitsuhiko/jinja2/issues">Jinja bug tracker</a>.</p>
<p>Also please keep in mind that the documentation is written with Python 2
in mind, you will have to adapt the shown code examples to Python 3 syntax
for yourself.</p>
</div>
</div>
<span id="document-api"></span><div class="section" id="module-jinja2">
<span id="api"></span><h3>API<a class="headerlink" href="#module-jinja2" title="Permalink to this headline">¶</a></h3>
<p>This document describes the API to Jinja2 and not the template language.  It
will be most useful as reference to those implementing the template interface
to the application and not those who are creating Jinja2 templates.</p>
<div class="section" id="basics">
<h4>Basics<a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h4>
<p>Jinja2 uses a central object called the template <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>.
Instances of this class are used to store the configuration, global objects
and are used to load templates from the file system or other locations.
Even if you are creating templates from strings by using the constructor of
<a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> class, an environment is created automatically for you,
albeit a shared one.</p>
<p>Most applications will create one <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a> object on application
initialization and use that to load templates.  In some cases it’s however
useful to have multiple environments side by side, if different configurations
are in use.</p>
<p>The simplest way to configure Jinja2 to load templates for your application
looks roughly like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">PackageLoader</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">loader</span><span class="o">=</span><span class="n">PackageLoader</span><span class="p">(</span><span class="s1">&#39;yourapplication&#39;</span><span class="p">,</span> <span class="s1">&#39;templates&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>This will create a template environment with the default settings and a
loader that looks up the templates in the <cite>templates</cite> folder inside the
<cite>yourapplication</cite> python package.  Different loaders are available
and you can also write your own if you want to load templates from a
database or other resources.</p>
<p>To load a template from this environment you just have to call the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">get_template()</span></code> method which then returns the loaded <a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s1">&#39;mytemplate.html&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To render it with some variables, just call the <code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">the</span><span class="o">=</span><span class="s1">&#39;variables&#39;</span><span class="p">,</span> <span class="n">go</span><span class="o">=</span><span class="s1">&#39;here&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using a template loader rather then passing strings to <a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a>
or <a class="reference internal" href="#jinja2.Environment.from_string" title="jinja2.Environment.from_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Environment.from_string()</span></code></a> has multiple advantages.  Besides being
a lot easier to use it also enables template inheritance.</p>
</div>
<div class="section" id="unicode">
<h4>Unicode<a class="headerlink" href="#unicode" title="Permalink to this headline">¶</a></h4>
<p>Jinja2 is using Unicode internally which means that you have to pass Unicode
objects to the render function or bytestrings that only consist of ASCII
characters.  Additionally newlines are normalized to one end of line
sequence which is per default UNIX style (<code class="docutils literal notranslate"><span class="pre">\n</span></code>).</p>
<p>Python 2.x supports two ways of representing string objects.  One is the
<cite>str</cite> type and the other is the <cite>unicode</cite> type, both of which extend a type
called <cite>basestring</cite>.  Unfortunately the default is <cite>str</cite> which should not
be used to store text based information unless only ASCII characters are
used.  With Python 2.6 it is possible to make <cite>unicode</cite> the default on a per
module level and with Python 3 it will be the default.</p>
<p>To explicitly use a Unicode string you have to prefix the string literal
with a <cite>u</cite>: <code class="docutils literal notranslate"><span class="pre">u'Hänsel</span> <span class="pre">und</span> <span class="pre">Gretel</span> <span class="pre">sagen</span> <span class="pre">Hallo'</span></code>.  That way Python will
store the string as Unicode by decoding the string with the character
encoding from the current Python module.  If no encoding is specified this
defaults to ‘ASCII’ which means that you can’t use any non ASCII identifier.</p>
<p>To set a better module encoding add the following comment to the first or
second line of the Python module using the Unicode literal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
</pre></div>
</div>
<p>We recommend utf-8 as Encoding for Python modules and templates as it’s
possible to represent every Unicode character in utf-8 and because it’s
backwards compatible to ASCII.  For Jinja2 the default encoding of templates
is assumed to be utf-8.</p>
<p>It is not possible to use Jinja2 to process non-Unicode data.  The reason
for this is that Jinja2 uses Unicode already on the language level.  For
example Jinja2 treats the non-breaking space as valid whitespace inside
expressions which requires knowledge of the encoding or operating on an
Unicode string.</p>
<p>For more details about Unicode in Python have a look at the excellent
<a class="reference external" href="http://docs.python.org/dev/howto/unicode.html">Unicode documentation</a>.</p>
<p>Another important thing is how Jinja2 is handling string literals in
templates.  A naive implementation would be using Unicode strings for
all string literals but it turned out in the past that this is problematic
as some libraries are typechecking against <cite>str</cite> explicitly.  For example
<cite>datetime.strftime</cite> does not accept Unicode arguments.  To not break it
completely Jinja2 is returning <cite>str</cite> for strings that fit into ASCII and
for everything else <cite>unicode</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;{</span><span class="si">% s</span><span class="s2">et a, b = &#39;foo&#39;, &#39;föö&#39; %}&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">module</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">a</span>
<span class="go">&#39;foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">b</span>
<span class="go">u&#39;f\xf6\xf6&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="high-level-api">
<h4>High Level API<a class="headerlink" href="#high-level-api" title="Permalink to this headline">¶</a></h4>
<p>The high-level API is the API you will use in the application to load and
render Jinja2 templates.  The <a class="reference internal" href="#low-level-api"><span class="std std-ref">Low Level API</span></a> on the other side is only
useful if you want to dig deeper into Jinja2 or <a class="reference internal" href="index.html#jinja-extensions"><span class="std std-ref">develop extensions</span></a>.</p>
<dl class="class">
<dt id="jinja2.Environment">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">Environment</code><span class="sig-paren">(</span><span class="optional">[</span><em>options</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment" title="Permalink to this definition">¶</a></dt>
<dd><p>The core component of Jinja is the <cite>Environment</cite>.  It contains
important shared variables like configuration, filters, tests,
globals and others.  Instances of this class may be modified if
they are not shared and if no template was loaded so far.
Modifications on environments after the first template was loaded
will lead to surprising effects and undefined behavior.</p>
<p>Here the possible initialization parameters:</p>
<blockquote>
<div><dl class="docutils">
<dt><cite>block_start_string</cite></dt>
<dd>The string marking the begin of a block.  Defaults to <code class="docutils literal notranslate"><span class="pre">'{%'</span></code>.</dd>
<dt><cite>block_end_string</cite></dt>
<dd>The string marking the end of a block.  Defaults to <code class="docutils literal notranslate"><span class="pre">'%}'</span></code>.</dd>
<dt><cite>variable_start_string</cite></dt>
<dd>The string marking the begin of a print statement.
Defaults to <code class="docutils literal notranslate"><span class="pre">'{{'</span></code>.</dd>
<dt><cite>variable_end_string</cite></dt>
<dd>The string marking the end of a print statement.  Defaults to
<code class="docutils literal notranslate"><span class="pre">'}}'</span></code>.</dd>
<dt><cite>comment_start_string</cite></dt>
<dd>The string marking the begin of a comment.  Defaults to <code class="docutils literal notranslate"><span class="pre">'{#'</span></code>.</dd>
<dt><cite>comment_end_string</cite></dt>
<dd>The string marking the end of a comment.  Defaults to <code class="docutils literal notranslate"><span class="pre">'#}'</span></code>.</dd>
<dt><cite>line_statement_prefix</cite></dt>
<dd>If given and a string, this will be used as prefix for line based
statements.  See also <a class="reference internal" href="index.html#line-statements"><span class="std std-ref">Line Statements</span></a>.</dd>
<dt><cite>line_comment_prefix</cite></dt>
<dd><p class="first">If given and a string, this will be used as prefix for line based
based comments.  See also <a class="reference internal" href="index.html#line-statements"><span class="std std-ref">Line Statements</span></a>.</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
</dd>
<dt><cite>trim_blocks</cite></dt>
<dd>If this is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> the first newline after a block is
removed (block, not variable tag!).  Defaults to <cite>False</cite>.</dd>
<dt><cite>newline_sequence</cite></dt>
<dd>The sequence that starts a newline.  Must be one of <code class="docutils literal notranslate"><span class="pre">'\r'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'\n'</span></code> or <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code>.  The default is <code class="docutils literal notranslate"><span class="pre">'\n'</span></code> which is a
useful default for Linux and OS X systems as well as web
applications.</dd>
<dt><cite>extensions</cite></dt>
<dd>List of Jinja extensions to use.  This can either be import paths
as strings or extension classes.  For more information have a
look at <a class="reference internal" href="index.html#jinja-extensions"><span class="std std-ref">the extensions documentation</span></a>.</dd>
<dt><cite>optimized</cite></dt>
<dd>should the optimizer be enabled?  Default is <cite>True</cite>.</dd>
<dt><cite>undefined</cite></dt>
<dd><a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> or a subclass of it that is used to represent
undefined values in the template.</dd>
<dt><cite>finalize</cite></dt>
<dd>A callable that can be used to process the result of a variable
expression before it is output.  For example one can convert
<cite>None</cite> implicitly into an empty string here.</dd>
<dt><cite>autoescape</cite></dt>
<dd><p class="first">If set to true the XML/HTML autoescaping feature is enabled by
default.  For more details about auto escaping see
<code class="xref py py-class docutils literal notranslate"><span class="pre">Markup</span></code>.  As of Jinja 2.4 this can also
be a callable that is passed the template name and has to
return <cite>True</cite> or <cite>False</cite> depending on autoescape should be
enabled by default.</p>
<div class="last versionchanged">
<p><span class="versionmodified">Changed in version 2.4: </span><cite>autoescape</cite> can now be a function</p>
</div>
</dd>
<dt><cite>loader</cite></dt>
<dd>The template loader for this environment.</dd>
<dt><cite>cache_size</cite></dt>
<dd>The size of the cache.  Per default this is <code class="docutils literal notranslate"><span class="pre">50</span></code> which means
that if more than 50 templates are loaded the loader will clean
out the least recently used template.  If the cache size is set to
<code class="docutils literal notranslate"><span class="pre">0</span></code> templates are recompiled all the time, if the cache size is
<code class="docutils literal notranslate"><span class="pre">-1</span></code> the cache will not be cleaned.</dd>
<dt><cite>auto_reload</cite></dt>
<dd>Some loaders load templates from locations where the template
sources may change (ie: file system or database).  If
<cite>auto_reload</cite> is set to <cite>True</cite> (default) every time a template is
requested the loader checks if the source changed and if yes, it
will reload the template.  For higher performance it’s possible to
disable that.</dd>
<dt><cite>bytecode_cache</cite></dt>
<dd><p class="first">If set to a bytecode cache object, this object will provide a
cache for the internal Jinja bytecode so that templates don’t
have to be parsed if they were not changed.</p>
<p class="last">See <a class="reference internal" href="#bytecode-cache"><span class="std std-ref">Bytecode Cache</span></a> for more information.</p>
</dd>
</dl>
</div></blockquote>
<dl class="attribute">
<dt id="jinja2.Environment.shared">
<code class="descname">shared</code><a class="headerlink" href="#jinja2.Environment.shared" title="Permalink to this definition">¶</a></dt>
<dd><p>If a template was created by using the <a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> constructor
an environment is created automatically.  These environments are
created as shared environments which means that multiple templates
may have the same anonymous environment.  For all shared environments
this attribute is <cite>True</cite>, else <cite>False</cite>.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.Environment.sandboxed">
<code class="descname">sandboxed</code><a class="headerlink" href="#jinja2.Environment.sandboxed" title="Permalink to this definition">¶</a></dt>
<dd><p>If the environment is sandboxed this attribute is <cite>True</cite>.  For the
sandbox mode have a look at the documentation for the
<a class="reference internal" href="index.html#jinja2.sandbox.SandboxedEnvironment" title="jinja2.sandbox.SandboxedEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">SandboxedEnvironment</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.Environment.filters">
<code class="descname">filters</code><a class="headerlink" href="#jinja2.Environment.filters" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of filters for this environment.  As long as no template was
loaded it’s safe to add new filters or remove old.  For custom filters
see <a class="reference internal" href="#writing-filters"><span class="std std-ref">Custom Filters</span></a>.  For valid filter names have a look at
<a class="reference internal" href="#identifier-naming"><span class="std std-ref">Notes on Identifiers</span></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.Environment.tests">
<code class="descname">tests</code><a class="headerlink" href="#jinja2.Environment.tests" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of test functions for this environment.  As long as no
template was loaded it’s safe to modify this dict.  For custom tests
see <a class="reference internal" href="#writing-tests"><span class="std std-ref">Custom Tests</span></a>.  For valid test names have a look at
<a class="reference internal" href="#identifier-naming"><span class="std std-ref">Notes on Identifiers</span></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.Environment.globals">
<code class="descname">globals</code><a class="headerlink" href="#jinja2.Environment.globals" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of global variables.  These variables are always available
in a template.  As long as no template was loaded it’s safe
to modify this dict.  For more details see <a class="reference internal" href="#global-namespace"><span class="std std-ref">The Global Namespace</span></a>.
For valid object names have a look at <a class="reference internal" href="#identifier-naming"><span class="std std-ref">Notes on Identifiers</span></a>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.overlay">
<code class="descname">overlay</code><span class="sig-paren">(</span><span class="optional">[</span><em>options</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.overlay" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new overlay environment that shares all the data with the
current environment except of cache and the overridden attributes.
Extensions cannot be removed for an overlayed environment.  An overlayed
environment automatically gets all the extensions of the environment it
is linked to plus optional extra extensions.</p>
<p>Creating overlays should happen after the initial environment was set
up completely.  Not all attributes are truly linked, some are just
copied over so modifications on the original environment may not shine
through.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.undefined">
<code class="descname">undefined</code><span class="sig-paren">(</span><span class="optional">[</span><em>hint</em>, <em>obj</em>, <em>name</em>, <em>exc</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.undefined" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> object for <cite>name</cite>.  This is useful
for filters or functions that may return undefined objects for
some operations.  All parameters except of <cite>hint</cite> should be provided
as keyword parameters for better readability.  The <cite>hint</cite> is used as
error message for the exception if provided, otherwise the error
message will be generated from <cite>obj</cite> and <cite>name</cite> automatically.  The exception
provided as <cite>exc</cite> is raised if something with the generated undefined
object is done that the undefined object does not allow.  The default
exception is <a class="reference internal" href="#jinja2.UndefinedError" title="jinja2.UndefinedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UndefinedError</span></code></a>.  If a <cite>hint</cite> is provided the
<cite>name</cite> may be ommited.</p>
<p>The most common way to create an undefined object is by providing
a name only:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">environment</span><span class="o">.</span><span class="n">undefined</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;some_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This means that the name <cite>some_name</cite> is not defined.  If the name
was from an attribute of an object it makes sense to tell the
undefined object the holder object to improve the error message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;attr&#39;</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">environment</span><span class="o">.</span><span class="n">undefined</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;attr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For a more complex example you can provide a hint.  For example
the <a class="reference internal" href="index.html#first" title="first"><code class="xref py py-func docutils literal notranslate"><span class="pre">first()</span></code></a> filter creates an undefined object that way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">environment</span><span class="o">.</span><span class="n">undefined</span><span class="p">(</span><span class="s1">&#39;no first item, sequence was empty&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If it the <cite>name</cite> or <cite>obj</cite> is known (for example because an attribute
was accessed) it shold be passed to the undefined object, even if
a custom <cite>hint</cite> is provided.  This gives undefined objects the
possibility to enhance the error message.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.compile_expression">
<code class="descname">compile_expression</code><span class="sig-paren">(</span><em>source</em>, <em>undefined_to_none=True</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.compile_expression" title="Permalink to this definition">¶</a></dt>
<dd><p>A handy helper method that returns a callable that accepts keyword
arguments that appear as variables in the expression.  If called it
returns the result of the expression.</p>
<p>This is useful if applications want to use the same rules as Jinja
in template “configuration files” or similar situations.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">compile_expression</span><span class="p">(</span><span class="s1">&#39;foo == 42&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Per default the return value is converted to <cite>None</cite> if the
expression returns an undefined value.  This can be changed
by setting <cite>undefined_to_none</cite> to <cite>False</cite>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">compile_expression</span><span class="p">(</span><span class="s1">&#39;var&#39;</span><span class="p">)()</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">compile_expression</span><span class="p">(</span><span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="n">undefined_to_none</span><span class="o">=</span><span class="kc">False</span><span class="p">)()</span>
<span class="go">Undefined</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.compile_templates">
<code class="descname">compile_templates</code><span class="sig-paren">(</span><em>target</em>, <em>extensions=None</em>, <em>filter_func=None</em>, <em>zip='deflated'</em>, <em>log_function=None</em>, <em>ignore_errors=True</em>, <em>py_compile=False</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.compile_templates" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds all the templates the loader can find, compiles them
and stores them in <cite>target</cite>.  If <cite>zip</cite> is <cite>None</cite>, instead of in a
zipfile, the templates will be will be stored in a directory.
By default a deflate zip algorithm is used, to switch to
the stored algorithm, <cite>zip</cite> can be set to <code class="docutils literal notranslate"><span class="pre">'stored'</span></code>.</p>
<p><cite>extensions</cite> and <cite>filter_func</cite> are passed to <a class="reference internal" href="#jinja2.Environment.list_templates" title="jinja2.Environment.list_templates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_templates()</span></code></a>.
Each template returned will be compiled to the target folder or
zipfile.</p>
<p>By default template compilation errors are ignored.  In case a
log function is provided, errors are logged.  If you want template
syntax errors to abort the compilation you can set <cite>ignore_errors</cite>
to <cite>False</cite> and you will get an exception on syntax errors.</p>
<p>If <cite>py_compile</cite> is set to <cite>True</cite> .pyc files will be written to the
target instead of standard .py files.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.4.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>**attributes</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the items to the instance of the environment if they do not exist
yet.  This is used by <a class="reference internal" href="index.html#writing-extensions"><span class="std std-ref">extensions</span></a> to register
callbacks and configuration values without breaking inheritance.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.from_string">
<code class="descname">from_string</code><span class="sig-paren">(</span><em>source</em>, <em>globals=None</em>, <em>template_class=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.from_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a template from a string.  This parses the source given and
returns a <a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> object.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.get_or_select_template">
<code class="descname">get_or_select_template</code><span class="sig-paren">(</span><em>template_name_or_list</em>, <em>parent=None</em>, <em>globals=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.get_or_select_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Does a typecheck and dispatches to <a class="reference internal" href="#jinja2.Environment.select_template" title="jinja2.Environment.select_template"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select_template()</span></code></a>
if an iterable of template names is given, otherwise to
<a class="reference internal" href="#jinja2.Environment.get_template" title="jinja2.Environment.get_template"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_template()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.get_template">
<code class="descname">get_template</code><span class="sig-paren">(</span><em>name</em>, <em>parent=None</em>, <em>globals=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.get_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a template from the loader.  If a loader is configured this
method ask the loader for the template and returns a <a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a>.
If the <cite>parent</cite> parameter is not <cite>None</cite>, <a class="reference internal" href="#jinja2.Environment.join_path" title="jinja2.Environment.join_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">join_path()</span></code></a> is called
to get the real template name before loading.</p>
<p>The <cite>globals</cite> parameter can be used to provide template wide globals.
These variables are available in the context at render time.</p>
<p>If the template does not exist a <a class="reference internal" href="#jinja2.TemplateNotFound" title="jinja2.TemplateNotFound"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TemplateNotFound</span></code></a> exception is
raised.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.4: </span>If <cite>name</cite> is a <a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> object it is returned from the
function unchanged.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.join_path">
<code class="descname">join_path</code><span class="sig-paren">(</span><em>template</em>, <em>parent</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.join_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Join a template with the parent.  By default all the lookups are
relative to the loader root so this method returns the <cite>template</cite>
parameter unchanged, but if the paths should be relative to the
parent template, this function can be used to calculate the real
template name.</p>
<p>Subclasses may override this method and implement template path
joining here.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.list_templates">
<code class="descname">list_templates</code><span class="sig-paren">(</span><em>extensions=None</em>, <em>filter_func=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.list_templates" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of templates for this environment.  This requires
that the loader supports the loader’s
<code class="xref py py-meth docutils literal notranslate"><span class="pre">list_templates()</span></code> method.</p>
<p>If there are other files in the template folder besides the
actual templates, the returned list can be filtered.  There are two
ways: either <cite>extensions</cite> is set to a list of file extensions for
templates, or a <cite>filter_func</cite> can be provided which is a callable that
is passed a template name and should return <cite>True</cite> if it should end up
in the result list.</p>
<p>If the loader does not support that, a <code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code> is raised.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.4.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.select_template">
<code class="descname">select_template</code><span class="sig-paren">(</span><em>names</em>, <em>parent=None</em>, <em>globals=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.select_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Works like <a class="reference internal" href="#jinja2.Environment.get_template" title="jinja2.Environment.get_template"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_template()</span></code></a> but tries a number of templates
before it fails.  If it cannot find any of the templates, it will
raise a <a class="reference internal" href="#jinja2.TemplatesNotFound" title="jinja2.TemplatesNotFound"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TemplatesNotFound</span></code></a> exception.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.4: </span>If <cite>names</cite> contains a <a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> object it is returned
from the function unchanged.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="jinja2.Template">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">Template</code><a class="headerlink" href="#jinja2.Template" title="Permalink to this definition">¶</a></dt>
<dd><p>The central template object.  This class represents a compiled template
and is used to evaluate it.</p>
<p>Normally the template object is generated from an <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a> but
it also has a constructor that makes it possible to create a template
instance directly using the constructor.  It takes the same arguments as
the environment constructor but it’s not possible to specify a loader.</p>
<p>Every template object has a few methods and members that are guaranteed
to exist.  However it’s important that a template object should be
considered immutable.  Modifications on the object are not supported.</p>
<p>Template objects created from the constructor rather than an environment
do have an <cite>environment</cite> attribute that points to a temporary environment
that is probably shared with other templates created with the constructor
and compatible settings.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s1">&#39;Hello {{ name }}!&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;John Doe&#39;</span><span class="p">)</span>
<span class="go">u&#39;Hello John Doe!&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;John Doe&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">u&#39;Hello John Doe!&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">StopIteration</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="jinja2.Template.globals">
<code class="descname">globals</code><a class="headerlink" href="#jinja2.Template.globals" title="Permalink to this definition">¶</a></dt>
<dd><p>The dict with the globals of that template.  It’s unsafe to modify
this dict as it may be shared with other templates or the environment
that loaded the template.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.Template.name">
<code class="descname">name</code><a class="headerlink" href="#jinja2.Template.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The loading name of the template.  If the template was loaded from a
string this is <cite>None</cite>.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.Template.filename">
<code class="descname">filename</code><a class="headerlink" href="#jinja2.Template.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>The filename of the template on the file system if it was loaded from
there.  Otherwise this is <cite>None</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Template.render">
<code class="descname">render</code><span class="sig-paren">(</span><span class="optional">[</span><em>context</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.render" title="Permalink to this definition">¶</a></dt>
<dd><p>This method accepts the same arguments as the <cite>dict</cite> constructor:
A dict, a dict subclass or some keyword arguments.  If no arguments
are given the context will be empty.  These two calls do the same:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">knights</span><span class="o">=</span><span class="s1">&#39;that say nih&#39;</span><span class="p">)</span>
<span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">({</span><span class="s1">&#39;knights&#39;</span><span class="p">:</span> <span class="s1">&#39;that say nih&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>This will return the rendered template as unicode string.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Template.generate">
<code class="descname">generate</code><span class="sig-paren">(</span><span class="optional">[</span><em>context</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.generate" title="Permalink to this definition">¶</a></dt>
<dd><p>For very large templates it can be useful to not render the whole
template at once but evaluate each statement after another and yield
piece for piece.  This method basically does exactly that and returns
a generator that yields one item after another as unicode strings.</p>
<p>It accepts the same arguments as <a class="reference internal" href="#jinja2.Template.render" title="jinja2.Template.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Template.stream">
<code class="descname">stream</code><span class="sig-paren">(</span><span class="optional">[</span><em>context</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Works exactly like <a class="reference internal" href="#jinja2.Template.generate" title="jinja2.Template.generate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">generate()</span></code></a> but returns a
<code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateStream</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Template.make_module">
<code class="descname">make_module</code><span class="sig-paren">(</span><em>vars=None</em>, <em>shared=False</em>, <em>locals=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.make_module" title="Permalink to this definition">¶</a></dt>
<dd><p>This method works like the <a class="reference internal" href="#jinja2.Template.module" title="jinja2.Template.module"><code class="xref py py-attr docutils literal notranslate"><span class="pre">module</span></code></a> attribute when called
without arguments but it will evaluate the template on every call
rather than caching it.  It’s also possible to provide
a dict which is then used as context.  The arguments are the same
as for the <a class="reference internal" href="#jinja2.Template.new_context" title="jinja2.Template.new_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">new_context()</span></code></a> method.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.Template.module">
<code class="descname">module</code><a class="headerlink" href="#jinja2.Template.module" title="Permalink to this definition">¶</a></dt>
<dd><p>The template as module.  This is used for imports in the
template runtime but is also useful if one wants to access
exported template variables from the Python layer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s1">&#39;{% macro foo() %}42{</span><span class="si">% e</span><span class="s1">ndmacro %}23&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unicode</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>
<span class="go">u&#39;23&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>
<span class="go">u&#39;42&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="jinja2.environment.TemplateStream">
<em class="property">class </em><code class="descclassname">jinja2.environment.</code><code class="descname">TemplateStream</code><a class="headerlink" href="#jinja2.environment.TemplateStream" title="Permalink to this definition">¶</a></dt>
<dd><p>A template stream works pretty much like an ordinary python generator
but it can buffer multiple items to reduce the number of total iterations.
Per default the output is unbuffered which means that for every unbuffered
instruction in the template one unicode string is yielded.</p>
<p>If buffering is enabled with a buffer size of 5, five items are combined
into a new unicode string.  This is mainly useful if you are streaming
big templates to a client via WSGI which flushes after each iteration.</p>
<dl class="method">
<dt id="jinja2.environment.TemplateStream.disable_buffering">
<code class="descname">disable_buffering</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.environment.TemplateStream.disable_buffering" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable the output buffering.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.environment.TemplateStream.dump">
<code class="descname">dump</code><span class="sig-paren">(</span><em>fp</em>, <em>encoding=None</em>, <em>errors='strict'</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.environment.TemplateStream.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the complete stream into a file or file-like object.
Per default unicode strings are written, if you want to encode
before writing specifiy an <cite>encoding</cite>.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Template</span><span class="p">(</span><span class="s1">&#39;Hello {{ name }}!&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="s1">&#39;hello.html&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.environment.TemplateStream.enable_buffering">
<code class="descname">enable_buffering</code><span class="sig-paren">(</span><em>size=5</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.environment.TemplateStream.enable_buffering" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable buffering.  Buffer <cite>size</cite> items before yielding them.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="autoescaping">
<h4>Autoescaping<a class="headerlink" href="#autoescaping" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.4.</span></p>
</div>
<p>As of Jinja 2.4 the preferred way to do autoescaping is to enable the
<a class="reference internal" href="index.html#autoescape-extension"><span class="std std-ref">Autoescape Extension</span></a> and to configure a sensible default for
autoescaping.  This makes it possible to enable and disable autoescaping
on a per-template basis (HTML versus text for instance).</p>
<p>Here a recommended setup that enables autoescaping for templates ending
in <code class="docutils literal notranslate"><span class="pre">'.html'</span></code>, <code class="docutils literal notranslate"><span class="pre">'.htm'</span></code> and <code class="docutils literal notranslate"><span class="pre">'.xml'</span></code> and disabling it by default
for all other extensions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">guess_autoescape</span><span class="p">(</span><span class="n">template_name</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">template_name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="s1">&#39;.&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">template_name</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="n">template_name</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="s1">&#39;htm&#39;</span><span class="p">,</span> <span class="s1">&#39;xml&#39;</span><span class="p">)</span>

<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">autoescape</span><span class="o">=</span><span class="n">guess_autoescape</span><span class="p">,</span>
                  <span class="n">loader</span><span class="o">=</span><span class="n">PackageLoader</span><span class="p">(</span><span class="s1">&#39;mypackage&#39;</span><span class="p">),</span>
                  <span class="n">extensions</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;jinja2.ext.autoescape&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>When implementing a guessing autoescape function, make sure you also
accept <cite>None</cite> as valid template name.  This will be passed when generating
templates from strings.</p>
<p>Inside the templates the behaviour can be temporarily changed by using
the <cite>autoescape</cite> block (see <a class="reference internal" href="index.html#autoescape-overrides"><span class="std std-ref">Autoescape Extension</span></a>).</p>
</div>
<div class="section" id="notes-on-identifiers">
<span id="identifier-naming"></span><h4>Notes on Identifiers<a class="headerlink" href="#notes-on-identifiers" title="Permalink to this headline">¶</a></h4>
<p>Jinja2 uses the regular Python 2.x naming rules.  Valid identifiers have to
match <code class="docutils literal notranslate"><span class="pre">[a-zA-Z_][a-zA-Z0-9_]*</span></code>.  As a matter of fact non ASCII characters
are currently not allowed.  This limitation will probably go away as soon as
unicode identifiers are fully specified for Python 3.</p>
<p>Filters and tests are looked up in separate namespaces and have slightly
modified identifier syntax.  Filters and tests may contain dots to group
filters and tests by topic.  For example it’s perfectly valid to add a
function into the filter dict and call it <cite>to.unicode</cite>.  The regular
expression for filter and test identifiers is
<code class="docutils literal notranslate"><span class="pre">[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)*`</span></code>.</p>
</div>
<div class="section" id="undefined-types">
<h4>Undefined Types<a class="headerlink" href="#undefined-types" title="Permalink to this headline">¶</a></h4>
<p>These classes can be used as undefined types.  The <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>
constructor takes an <cite>undefined</cite> parameter that can be one of those classes
or a custom subclass of <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a>.  Whenever the template engine is
unable to look up a name or access an attribute one of those objects is
created and returned.  Some operations on undefined values are then allowed,
others fail.</p>
<p>The closest to regular Python behavior is the <cite>StrictUndefined</cite> which
disallows all operations beside testing if it’s an undefined object.</p>
<dl class="class">
<dt id="jinja2.Undefined">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">Undefined</code><a class="headerlink" href="#jinja2.Undefined" title="Permalink to this definition">¶</a></dt>
<dd><p>The default undefined type.  This undefined type can be printed and
iterated over, but every other access will raise an <a class="reference internal" href="#jinja2.UndefinedError" title="jinja2.UndefinedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UndefinedError</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">=</span> <span class="n">Undefined</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="ow">not</span> <span class="n">foo</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">+</span> <span class="mi">42</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">UndefinedError</span>: <span class="n">&#39;foo&#39; is undefined</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="jinja2.Undefined._undefined_hint">
<code class="descname">_undefined_hint</code><a class="headerlink" href="#jinja2.Undefined._undefined_hint" title="Permalink to this definition">¶</a></dt>
<dd><p>Either <cite>None</cite> or an unicode string with the error message for
the undefined object.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.Undefined._undefined_obj">
<code class="descname">_undefined_obj</code><a class="headerlink" href="#jinja2.Undefined._undefined_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Either <cite>None</cite> or the owner object that caused the undefined object
to be created (for example because an attribute does not exist).</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.Undefined._undefined_name">
<code class="descname">_undefined_name</code><a class="headerlink" href="#jinja2.Undefined._undefined_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name for the undefined variable / attribute or just <cite>None</cite>
if no such information exists.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.Undefined._undefined_exception">
<code class="descname">_undefined_exception</code><a class="headerlink" href="#jinja2.Undefined._undefined_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>The exception that the undefined object wants to raise.  This
is usually one of <a class="reference internal" href="#jinja2.UndefinedError" title="jinja2.UndefinedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UndefinedError</span></code></a> or <code class="xref py py-exc docutils literal notranslate"><span class="pre">SecurityError</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Undefined._fail_with_undefined_error">
<code class="descname">_fail_with_undefined_error</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Undefined._fail_with_undefined_error" title="Permalink to this definition">¶</a></dt>
<dd><p>When called with any arguments this method raises
<a class="reference internal" href="#jinja2.Undefined._undefined_exception" title="jinja2.Undefined._undefined_exception"><code class="xref py py-attr docutils literal notranslate"><span class="pre">_undefined_exception</span></code></a> with an error message generated
from the undefined hints stored on the undefined object.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="jinja2.DebugUndefined">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">DebugUndefined</code><a class="headerlink" href="#jinja2.DebugUndefined" title="Permalink to this definition">¶</a></dt>
<dd><p>An undefined that returns the debug info when printed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">=</span> <span class="n">DebugUndefined</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">&#39;{{ foo }}&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="ow">not</span> <span class="n">foo</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">+</span> <span class="mi">42</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">UndefinedError</span>: <span class="n">&#39;foo&#39; is undefined</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="jinja2.StrictUndefined">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">StrictUndefined</code><a class="headerlink" href="#jinja2.StrictUndefined" title="Permalink to this definition">¶</a></dt>
<dd><p>An undefined that barks on print and iteration as well as boolean
tests and all kinds of comparisons.  In other words: you can do nothing
with it except checking if it’s defined using the <cite>defined</cite> test.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">=</span> <span class="n">StrictUndefined</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">UndefinedError</span>: <span class="n">&#39;foo&#39; is undefined</span>
<span class="gp">&gt;&gt;&gt; </span><span class="ow">not</span> <span class="n">foo</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">UndefinedError</span>: <span class="n">&#39;foo&#39; is undefined</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span> <span class="o">+</span> <span class="mi">42</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">UndefinedError</span>: <span class="n">&#39;foo&#39; is undefined</span>
</pre></div>
</div>
</dd></dl>

<p>Undefined objects are created by calling <a class="reference internal" href="index.html#undefined" title="undefined"><code class="xref py py-attr docutils literal notranslate"><span class="pre">undefined</span></code></a>.</p>
<div class="admonition-implementation admonition">
<p class="first admonition-title">Implementation</p>
<p><a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> objects are implemented by overriding the special
<cite>__underscore__</cite> methods.  For example the default <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a>
class implements <cite>__unicode__</cite> in a way that it returns an empty
string, however <cite>__int__</cite> and others still fail with an exception.  To
allow conversion to int by returning <code class="docutils literal notranslate"><span class="pre">0</span></code> you can implement your own:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NullUndefined</span><span class="p">(</span><span class="n">Undefined</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__int__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="fm">__float__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p>To disallow a method, just override it and raise
<a class="reference internal" href="#jinja2.Undefined._undefined_exception" title="jinja2.Undefined._undefined_exception"><code class="xref py py-attr docutils literal notranslate"><span class="pre">_undefined_exception</span></code></a>.  Because this is a very common
idom in undefined objects there is the helper method
<a class="reference internal" href="#jinja2.Undefined._fail_with_undefined_error" title="jinja2.Undefined._fail_with_undefined_error"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_fail_with_undefined_error()</span></code></a> that does the error raising
automatically.  Here a class that works like the regular <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a>
but chokes on iteration:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NonIterableUndefined</span><span class="p">(</span><span class="n">Undefined</span><span class="p">):</span>
    <span class="fm">__iter__</span> <span class="o">=</span> <span class="n">Undefined</span><span class="o">.</span><span class="n">_fail_with_undefined_error</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-context">
<h4>The Context<a class="headerlink" href="#the-context" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="jinja2.runtime.Context">
<em class="property">class </em><code class="descclassname">jinja2.runtime.</code><code class="descname">Context</code><a class="headerlink" href="#jinja2.runtime.Context" title="Permalink to this definition">¶</a></dt>
<dd><p>The template context holds the variables of a template.  It stores the
values passed to the template and also the names the template exports.
Creating instances is neither supported nor useful as it’s created
automatically at various stages of the template evaluation and should not
be created by hand.</p>
<p>The context is immutable.  Modifications on <a class="reference internal" href="#jinja2.runtime.Context.parent" title="jinja2.runtime.Context.parent"><code class="xref py py-attr docutils literal notranslate"><span class="pre">parent</span></code></a> <strong>must not</strong>
happen and modifications on <a class="reference internal" href="#jinja2.runtime.Context.vars" title="jinja2.runtime.Context.vars"><code class="xref py py-attr docutils literal notranslate"><span class="pre">vars</span></code></a> are allowed from generated
template code only.  Template filters and global functions marked as
<code class="xref py py-func docutils literal notranslate"><span class="pre">contextfunction()</span></code>s get the active context passed as first argument
and are allowed to access the context read-only.</p>
<p>The template context supports read only dict operations (<cite>get</cite>,
<cite>keys</cite>, <cite>values</cite>, <cite>items</cite>, <cite>iterkeys</cite>, <cite>itervalues</cite>, <cite>iteritems</cite>,
<cite>__getitem__</cite>, <cite>__contains__</cite>).  Additionally there is a <a class="reference internal" href="#jinja2.runtime.Context.resolve" title="jinja2.runtime.Context.resolve"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve()</span></code></a>
method that doesn’t fail with a <cite>KeyError</cite> but returns an
<code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code> object for missing variables.</p>
<dl class="attribute">
<dt id="jinja2.runtime.Context.parent">
<code class="descname">parent</code><a class="headerlink" href="#jinja2.runtime.Context.parent" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of read only, global variables the template looks up.  These
can either come from another <a class="reference internal" href="#jinja2.runtime.Context" title="jinja2.runtime.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a>, from the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Environment.globals</span></code> or <code class="xref py py-attr docutils literal notranslate"><span class="pre">Template.globals</span></code> or points
to a dict created by combining the globals with the variables
passed to the render function.  It must not be altered.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.runtime.Context.vars">
<code class="descname">vars</code><a class="headerlink" href="#jinja2.runtime.Context.vars" title="Permalink to this definition">¶</a></dt>
<dd><p>The template local variables.  This list contains environment and
context functions from the <a class="reference internal" href="#jinja2.runtime.Context.parent" title="jinja2.runtime.Context.parent"><code class="xref py py-attr docutils literal notranslate"><span class="pre">parent</span></code></a> scope as well as local
modifications and exported variables from the template.  The template
will modify this dict during template evaluation but filters and
context functions are not allowed to modify it.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.runtime.Context.environment">
<code class="descname">environment</code><a class="headerlink" href="#jinja2.runtime.Context.environment" title="Permalink to this definition">¶</a></dt>
<dd><p>The environment that loaded the template.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.runtime.Context.exported_vars">
<code class="descname">exported_vars</code><a class="headerlink" href="#jinja2.runtime.Context.exported_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>This set contains all the names the template exports.  The values for
the names are in the <a class="reference internal" href="#jinja2.runtime.Context.vars" title="jinja2.runtime.Context.vars"><code class="xref py py-attr docutils literal notranslate"><span class="pre">vars</span></code></a> dict.  In order to get a copy of the
exported variables as dict, <a class="reference internal" href="#jinja2.runtime.Context.get_exported" title="jinja2.runtime.Context.get_exported"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_exported()</span></code></a> can be used.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.runtime.Context.name">
<code class="descname">name</code><a class="headerlink" href="#jinja2.runtime.Context.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The load name of the template owning this context.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.runtime.Context.blocks">
<code class="descname">blocks</code><a class="headerlink" href="#jinja2.runtime.Context.blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict with the current mapping of blocks in the template.  The keys
in this dict are the names of the blocks, and the values a list of
blocks registered.  The last item in each list is the current active
block (latest in the inheritance chain).</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.runtime.Context.eval_ctx">
<code class="descname">eval_ctx</code><a class="headerlink" href="#jinja2.runtime.Context.eval_ctx" title="Permalink to this definition">¶</a></dt>
<dd><p>The current <a class="reference internal" href="#eval-context"><span class="std std-ref">Evaluation Context</span></a>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.runtime.Context.call">
<code class="descname">call</code><span class="sig-paren">(</span><em>callable</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.runtime.Context.call" title="Permalink to this definition">¶</a></dt>
<dd><p>Call the callable with the arguments and keyword arguments
provided but inject the active context or environment as first
argument if the callable is a <code class="xref py py-func docutils literal notranslate"><span class="pre">contextfunction()</span></code> or
<code class="xref py py-func docutils literal notranslate"><span class="pre">environmentfunction()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.runtime.Context.get_all">
<code class="descname">get_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.runtime.Context.get_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a copy of the complete context as dict including the
exported variables.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.runtime.Context.get_exported">
<code class="descname">get_exported</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.runtime.Context.get_exported" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a new dict with the exported variables.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.runtime.Context.resolve">
<code class="descname">resolve</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.runtime.Context.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks up a variable like <cite>__getitem__</cite> or <cite>get</cite> but returns an
<code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code> object with the name of the name looked up.</p>
</dd></dl>

</dd></dl>

<div class="admonition-implementation admonition">
<p class="first admonition-title">Implementation</p>
<p>Context is immutable for the same reason Python’s frame locals are
immutable inside functions.  Both Jinja2 and Python are not using the
context / frame locals as data storage for variables but only as primary
data source.</p>
<p class="last">When a template accesses a variable the template does not define, Jinja2
looks up the variable in the context, after that the variable is treated
as if it was defined in the template.</p>
</div>
</div>
<div class="section" id="loaders">
<span id="id1"></span><h4>Loaders<a class="headerlink" href="#loaders" title="Permalink to this headline">¶</a></h4>
<p>Loaders are responsible for loading templates from a resource such as the
file system.  The environment will keep the compiled modules in memory like
Python’s <cite>sys.modules</cite>.  Unlike <cite>sys.modules</cite> however this cache is limited in
size by default and templates are automatically reloaded.
All loaders are subclasses of <a class="reference internal" href="#jinja2.BaseLoader" title="jinja2.BaseLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseLoader</span></code></a>.  If you want to create your
own loader, subclass <a class="reference internal" href="#jinja2.BaseLoader" title="jinja2.BaseLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseLoader</span></code></a> and override <cite>get_source</cite>.</p>
<dl class="class">
<dt id="jinja2.BaseLoader">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">BaseLoader</code><a class="headerlink" href="#jinja2.BaseLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Baseclass for all loaders.  Subclass this and override <cite>get_source</cite> to
implement a custom loading mechanism.  The environment provides a
<cite>get_template</cite> method that calls the loader’s <cite>load</cite> method to get the
<a class="reference internal" href="#jinja2.Template" title="jinja2.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> object.</p>
<p>A very basic example for a loader that looks up templates on the file
system could look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">BaseLoader</span><span class="p">,</span> <span class="n">TemplateNotFound</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span><span class="p">,</span> <span class="n">exists</span><span class="p">,</span> <span class="n">getmtime</span>

<span class="k">class</span> <span class="nc">MyLoader</span><span class="p">(</span><span class="n">BaseLoader</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="k">def</span> <span class="nf">get_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">environment</span><span class="p">,</span> <span class="n">template</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">TemplateNotFound</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
        <span class="n">mtime</span> <span class="o">=</span> <span class="n">getmtime</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">source</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">mtime</span> <span class="o">==</span> <span class="n">getmtime</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="jinja2.BaseLoader.get_source">
<code class="descname">get_source</code><span class="sig-paren">(</span><em>environment</em>, <em>template</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.BaseLoader.get_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the template source, filename and reload helper for a template.
It’s passed the environment and template name and has to return a
tuple in the form <code class="docutils literal notranslate"><span class="pre">(source,</span> <span class="pre">filename,</span> <span class="pre">uptodate)</span></code> or raise a
<cite>TemplateNotFound</cite> error if it can’t locate the template.</p>
<p>The source part of the returned tuple must be the source of the
template as unicode string or a ASCII bytestring.  The filename should
be the name of the file on the filesystem if it was loaded from there,
otherwise <cite>None</cite>.  The filename is used by python for the tracebacks
if no loader extension is used.</p>
<p>The last item in the tuple is the <cite>uptodate</cite> function.  If auto
reloading is enabled it’s always called to check if the template
changed.  No arguments are passed so the function must store the
old state somewhere (for example in a closure).  If it returns <cite>False</cite>
the template will be reloaded.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.BaseLoader.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>environment</em>, <em>name</em>, <em>globals=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.BaseLoader.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a template.  This method looks up the template in the cache
or loads one by calling <a class="reference internal" href="#jinja2.BaseLoader.get_source" title="jinja2.BaseLoader.get_source"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_source()</span></code></a>.  Subclasses should not
override this method as loaders working on collections of other
loaders (such as <a class="reference internal" href="#jinja2.PrefixLoader" title="jinja2.PrefixLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrefixLoader</span></code></a> or <a class="reference internal" href="#jinja2.ChoiceLoader" title="jinja2.ChoiceLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceLoader</span></code></a>)
will not call this method but <cite>get_source</cite> directly.</p>
</dd></dl>

</dd></dl>

<p>Here a list of the builtin loaders Jinja2 provides:</p>
<dl class="class">
<dt id="jinja2.FileSystemLoader">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">FileSystemLoader</code><span class="sig-paren">(</span><em>searchpath</em>, <em>encoding='utf-8'</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.FileSystemLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads templates from the file system.  This loader can find templates
in folders on the file system and is the preferred way to load them.</p>
<p>The loader takes the path to the templates as string, or if multiple
locations are wanted a list of them which is then looked up in the
given order:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">FileSystemLoader</span><span class="p">(</span><span class="s1">&#39;/path/to/templates&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">FileSystemLoader</span><span class="p">([</span><span class="s1">&#39;/path/to/templates&#39;</span><span class="p">,</span> <span class="s1">&#39;/other/path&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Per default the template encoding is <code class="docutils literal notranslate"><span class="pre">'utf-8'</span></code> which can be changed
by setting the <cite>encoding</cite> parameter to something else.</p>
</dd></dl>

<dl class="class">
<dt id="jinja2.PackageLoader">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">PackageLoader</code><span class="sig-paren">(</span><em>package_name</em>, <em>package_path='templates'</em>, <em>encoding='utf-8'</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.PackageLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Load templates from python eggs or packages.  It is constructed with
the name of the python package and the path to the templates in that
package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loader</span> <span class="o">=</span> <span class="n">PackageLoader</span><span class="p">(</span><span class="s1">&#39;mypackage&#39;</span><span class="p">,</span> <span class="s1">&#39;views&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the package path is not given, <code class="docutils literal notranslate"><span class="pre">'templates'</span></code> is assumed.</p>
<p>Per default the template encoding is <code class="docutils literal notranslate"><span class="pre">'utf-8'</span></code> which can be changed
by setting the <cite>encoding</cite> parameter to something else.  Due to the nature
of eggs it’s only possible to reload templates if the package was loaded
from the file system and not a zip file.</p>
</dd></dl>

<dl class="class">
<dt id="jinja2.DictLoader">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">DictLoader</code><span class="sig-paren">(</span><em>mapping</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.DictLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a template from a python dict.  It’s passed a dict of unicode
strings bound to template names.  This loader is useful for unittesting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">DictLoader</span><span class="p">({</span><span class="s1">&#39;index.html&#39;</span><span class="p">:</span> <span class="s1">&#39;source here&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>Because auto reloading is rarely useful this is disabled per default.</p>
</dd></dl>

<dl class="class">
<dt id="jinja2.FunctionLoader">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">FunctionLoader</code><span class="sig-paren">(</span><em>load_func</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.FunctionLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>A loader that is passed a function which does the loading.  The
function becomes the name of the template passed and has to return either
an unicode string with the template source, a tuple in the form <code class="docutils literal notranslate"><span class="pre">(source,</span>
<span class="pre">filename,</span> <span class="pre">uptodatefunc)</span></code> or <cite>None</cite> if the template does not exist.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">load_template</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;index.html&#39;</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s1">&#39;...&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">FunctionLoader</span><span class="p">(</span><span class="n">load_template</span><span class="p">)</span>
</pre></div>
</div>
<p>The <cite>uptodatefunc</cite> is a function that is called if autoreload is enabled
and has to return <cite>True</cite> if the template is still up to date.  For more
details have a look at <a class="reference internal" href="#jinja2.BaseLoader.get_source" title="jinja2.BaseLoader.get_source"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseLoader.get_source()</span></code></a> which has the same
return value.</p>
</dd></dl>

<dl class="class">
<dt id="jinja2.PrefixLoader">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">PrefixLoader</code><span class="sig-paren">(</span><em>mapping</em>, <em>delimiter='/'</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.PrefixLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>A loader that is passed a dict of loaders where each loader is bound
to a prefix.  The prefix is delimited from the template by a slash per
default, which can be changed by setting the <cite>delimiter</cite> argument to
something else:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loader</span> <span class="o">=</span> <span class="n">PrefixLoader</span><span class="p">({</span>
    <span class="s1">&#39;app1&#39;</span><span class="p">:</span>     <span class="n">PackageLoader</span><span class="p">(</span><span class="s1">&#39;mypackage.app1&#39;</span><span class="p">),</span>
    <span class="s1">&#39;app2&#39;</span><span class="p">:</span>     <span class="n">PackageLoader</span><span class="p">(</span><span class="s1">&#39;mypackage.app2&#39;</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
<p>By loading <code class="docutils literal notranslate"><span class="pre">'app1/index.html'</span></code> the file from the app1 package is loaded,
by loading <code class="docutils literal notranslate"><span class="pre">'app2/index.html'</span></code> the file from the second.</p>
</dd></dl>

<dl class="class">
<dt id="jinja2.ChoiceLoader">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">ChoiceLoader</code><span class="sig-paren">(</span><em>loaders</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.ChoiceLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>This loader works like the <cite>PrefixLoader</cite> just that no prefix is
specified.  If a template could not be found by one loader the next one
is tried.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">ChoiceLoader</span><span class="p">([</span>
<span class="gp">... </span>    <span class="n">FileSystemLoader</span><span class="p">(</span><span class="s1">&#39;/path/to/user/templates&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">FileSystemLoader</span><span class="p">(</span><span class="s1">&#39;/path/to/system/templates&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="p">])</span>
</pre></div>
</div>
<p>This is useful if you want to allow users to override builtin templates
from a different location.</p>
</dd></dl>

<dl class="class">
<dt id="jinja2.ModuleLoader">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">ModuleLoader</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.ModuleLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>This loader loads templates from precompiled templates.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">ChoiceLoader</span><span class="p">([</span>
<span class="gp">... </span>    <span class="n">ModuleLoader</span><span class="p">(</span><span class="s1">&#39;/path/to/compiled/templates&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">FileSystemLoader</span><span class="p">(</span><span class="s1">&#39;/path/to/templates&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="p">])</span>
</pre></div>
</div>
<p>Templates can be precompiled with <a class="reference internal" href="#jinja2.Environment.compile_templates" title="jinja2.Environment.compile_templates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Environment.compile_templates()</span></code></a>.</p>
</dd></dl>

</div>
<div class="section" id="bytecode-cache">
<span id="id2"></span><h4>Bytecode Cache<a class="headerlink" href="#bytecode-cache" title="Permalink to this headline">¶</a></h4>
<p>Jinja 2.1 and higher support external bytecode caching.  Bytecode caches make
it possible to store the generated bytecode on the file system or a different
location to avoid parsing the templates on first use.</p>
<p>This is especially useful if you have a web application that is initialized on
the first request and Jinja compiles many templates at once which slows down
the application.</p>
<p>To use a bytecode cache, instanciate it and pass it to the <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>.</p>
<dl class="class">
<dt id="jinja2.BytecodeCache">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">BytecodeCache</code><a class="headerlink" href="#jinja2.BytecodeCache" title="Permalink to this definition">¶</a></dt>
<dd><p>To implement your own bytecode cache you have to subclass this class
and override <a class="reference internal" href="#jinja2.BytecodeCache.load_bytecode" title="jinja2.BytecodeCache.load_bytecode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_bytecode()</span></code></a> and <a class="reference internal" href="#jinja2.BytecodeCache.dump_bytecode" title="jinja2.BytecodeCache.dump_bytecode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dump_bytecode()</span></code></a>.  Both of
these methods are passed a <a class="reference internal" href="#jinja2.bccache.Bucket" title="jinja2.bccache.Bucket"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bucket</span></code></a>.</p>
<p>A very basic bytecode cache that saves the bytecode on the file system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">path</span>

<span class="k">class</span> <span class="nc">MyCache</span><span class="p">(</span><span class="n">BytecodeCache</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="n">directory</span>

    <span class="k">def</span> <span class="nf">load_bytecode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bucket</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="p">,</span> <span class="n">bucket</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">bucket</span><span class="o">.</span><span class="n">load_bytecode</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">dump_bytecode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bucket</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="p">,</span> <span class="n">bucket</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">bucket</span><span class="o">.</span><span class="n">write_bytecode</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>A more advanced version of a filesystem based bytecode cache is part of
Jinja2.</p>
<dl class="method">
<dt id="jinja2.BytecodeCache.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.BytecodeCache.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the cache.  This method is not used by Jinja2 but should be
implemented to allow applications to clear the bytecode cache used
by a particular environment.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.BytecodeCache.dump_bytecode">
<code class="descname">dump_bytecode</code><span class="sig-paren">(</span><em>bucket</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.BytecodeCache.dump_bytecode" title="Permalink to this definition">¶</a></dt>
<dd><p>Subclasses have to override this method to write the bytecode
from a bucket back to the cache.  If it unable to do so it must not
fail silently but raise an exception.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.BytecodeCache.load_bytecode">
<code class="descname">load_bytecode</code><span class="sig-paren">(</span><em>bucket</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.BytecodeCache.load_bytecode" title="Permalink to this definition">¶</a></dt>
<dd><p>Subclasses have to override this method to load bytecode into a
bucket.  If they are not able to find code in the cache for the
bucket, it must not do anything.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="jinja2.bccache.Bucket">
<em class="property">class </em><code class="descclassname">jinja2.bccache.</code><code class="descname">Bucket</code><span class="sig-paren">(</span><em>environment</em>, <em>key</em>, <em>checksum</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.bccache.Bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Buckets are used to store the bytecode for one template.  It’s created
and initialized by the bytecode cache and passed to the loading functions.</p>
<p>The buckets get an internal checksum from the cache assigned and use this
to automatically reject outdated cache material.  Individual bytecode
cache subclasses don’t have to care about cache invalidation.</p>
<dl class="attribute">
<dt id="jinja2.bccache.Bucket.environment">
<code class="descname">environment</code><a class="headerlink" href="#jinja2.bccache.Bucket.environment" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code> that created the bucket.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.bccache.Bucket.key">
<code class="descname">key</code><a class="headerlink" href="#jinja2.bccache.Bucket.key" title="Permalink to this definition">¶</a></dt>
<dd><p>The unique cache key for this bucket</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.bccache.Bucket.code">
<code class="descname">code</code><a class="headerlink" href="#jinja2.bccache.Bucket.code" title="Permalink to this definition">¶</a></dt>
<dd><p>The bytecode if it’s loaded, otherwise <cite>None</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.bccache.Bucket.bytecode_from_string">
<code class="descname">bytecode_from_string</code><span class="sig-paren">(</span><em>string</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.bccache.Bucket.bytecode_from_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Load bytecode from a string.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.bccache.Bucket.bytecode_to_string">
<code class="descname">bytecode_to_string</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.bccache.Bucket.bytecode_to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the bytecode as string.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.bccache.Bucket.load_bytecode">
<code class="descname">load_bytecode</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.bccache.Bucket.load_bytecode" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads bytecode from a file or file like object.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.bccache.Bucket.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.bccache.Bucket.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the bucket (unloads the bytecode).</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.bccache.Bucket.write_bytecode">
<code class="descname">write_bytecode</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.bccache.Bucket.write_bytecode" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the bytecode into the file or file like object passed.</p>
</dd></dl>

</dd></dl>

<p>Builtin bytecode caches:</p>
<dl class="class">
<dt id="jinja2.FileSystemBytecodeCache">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">FileSystemBytecodeCache</code><span class="sig-paren">(</span><em>directory=None</em>, <em>pattern='__jinja2_%s.cache'</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.FileSystemBytecodeCache" title="Permalink to this definition">¶</a></dt>
<dd><p>A bytecode cache that stores bytecode on the filesystem.  It accepts
two arguments: The directory where the cache items are stored and a
pattern string that is used to build the filename.</p>
<p>If no directory is specified the system temporary items folder is used.</p>
<p>The pattern can be used to have multiple separate caches operate on the
same directory.  The default pattern is <code class="docutils literal notranslate"><span class="pre">'__jinja2_%s.cache'</span></code>.  <code class="docutils literal notranslate"><span class="pre">%s</span></code>
is replaced with the cache key.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bcc</span> <span class="o">=</span> <span class="n">FileSystemBytecodeCache</span><span class="p">(</span><span class="s1">&#39;/tmp/jinja_cache&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.cache&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This bytecode cache supports clearing of the cache using the clear method.</p>
</dd></dl>

<dl class="class">
<dt id="jinja2.MemcachedBytecodeCache">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">MemcachedBytecodeCache</code><span class="sig-paren">(</span><em>client</em>, <em>prefix='jinja2/bytecode/'</em>, <em>timeout=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.MemcachedBytecodeCache" title="Permalink to this definition">¶</a></dt>
<dd><p>This class implements a bytecode cache that uses a memcache cache for
storing the information.  It does not enforce a specific memcache library
(tummy’s memcache or cmemcache) but will accept any class that provides
the minimal interface required.</p>
<p>Libraries compatible with this class:</p>
<ul class="simple">
<li><a class="reference external" href="http://werkzeug.pocoo.org/">werkzeug</a>.contrib.cache</li>
<li><a class="reference external" href="http://www.tummy.com/Community/software/python-memcached/">python-memcached</a></li>
<li><a class="reference external" href="http://gijsbert.org/cmemcache/">cmemcache</a></li>
</ul>
<p>(Unfortunately the django cache interface is not compatible because it
does not support storing binary data, only unicode.  You can however pass
the underlying cache client to the bytecode cache which is available
as <cite>django.core.cache.cache._client</cite>.)</p>
<p>The minimal interface for the client passed to the constructor is this:</p>
<dl class="class">
<dt id="jinja2.MemcachedBytecodeCache.MinimalClientInterface">
<em class="property">class </em><code class="descname">MinimalClientInterface</code><a class="headerlink" href="#jinja2.MemcachedBytecodeCache.MinimalClientInterface" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="jinja2.MemcachedBytecodeCache.MinimalClientInterface.set">
<code class="descname">set</code><span class="sig-paren">(</span><em>key</em>, <em>value</em><span class="optional">[</span>, <em>timeout</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.MemcachedBytecodeCache.MinimalClientInterface.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores the bytecode in the cache.  <cite>value</cite> is a string and
<cite>timeout</cite> the timeout of the key.  If timeout is not provided
a default timeout or no timeout should be assumed, if it’s
provided it’s an integer with the number of seconds the cache
item should exist.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.MemcachedBytecodeCache.MinimalClientInterface.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.MemcachedBytecodeCache.MinimalClientInterface.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value for the cache key.  If the item does not
exist in the cache the return value must be <cite>None</cite>.</p>
</dd></dl>

</dd></dl>

<p>The other arguments to the constructor are the prefix for all keys that
is added before the actual cache key and the timeout for the bytecode in
the cache system.  We recommend a high (or no) timeout.</p>
<p>This bytecode cache does not support clearing of used items in the cache.
The clear method is a no-operation function.</p>
</dd></dl>

</div>
<div class="section" id="utilities">
<h4>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h4>
<p>These helper functions and classes are useful if you add custom filters or
functions to a Jinja2 environment.</p>
<dl class="function">
<dt id="jinja2.environmentfilter">
<code class="descclassname">jinja2.</code><code class="descname">environmentfilter</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.environmentfilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for marking evironment dependent filters.  The current
<a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a> is passed to the filter as first argument.</p>
</dd></dl>

<dl class="function">
<dt id="jinja2.contextfilter">
<code class="descclassname">jinja2.</code><code class="descname">contextfilter</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.contextfilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for marking context dependent filters. The current
<code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code> will be passed as first argument.</p>
</dd></dl>

<dl class="function">
<dt id="jinja2.evalcontextfilter">
<code class="descclassname">jinja2.</code><code class="descname">evalcontextfilter</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.evalcontextfilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for marking eval-context dependent filters.  An eval
context object is passed as first argument.  For more information
about the eval context, see <a class="reference internal" href="#eval-context"><span class="std std-ref">Evaluation Context</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.4.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="jinja2.environmentfunction">
<code class="descclassname">jinja2.</code><code class="descname">environmentfunction</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.environmentfunction" title="Permalink to this definition">¶</a></dt>
<dd><p>This decorator can be used to mark a function or method as environment
callable.  This decorator works exactly like the <a class="reference internal" href="#jinja2.contextfunction" title="jinja2.contextfunction"><code class="xref py py-func docutils literal notranslate"><span class="pre">contextfunction()</span></code></a>
decorator just that the first argument is the active <a class="reference internal" href="#jinja2.Environment" title="jinja2.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>
and not context.</p>
</dd></dl>

<dl class="function">
<dt id="jinja2.contextfunction">
<code class="descclassname">jinja2.</code><code class="descname">contextfunction</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.contextfunction" title="Permalink to this definition">¶</a></dt>
<dd><p>This decorator can be used to mark a function or method context callable.
A context callable is passed the active <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code> as first argument when
called from the template.  This is useful if a function wants to get access
to the context or functions provided on the context object.  For example
a function that returns a sorted list of template variables the current
template exports could look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@contextfunction</span>
<span class="k">def</span> <span class="nf">get_exported_names</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">exported_vars</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="jinja2.evalcontextfunction">
<code class="descclassname">jinja2.</code><code class="descname">evalcontextfunction</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.evalcontextfunction" title="Permalink to this definition">¶</a></dt>
<dd><p>This decoraotr can be used to mark a function or method as an eval
context callable.  This is similar to the <a class="reference internal" href="#jinja2.contextfunction" title="jinja2.contextfunction"><code class="xref py py-func docutils literal notranslate"><span class="pre">contextfunction()</span></code></a>
but instead of passing the context, an evaluation context object is
passed.  For more information about the eval context, see
<a class="reference internal" href="#eval-context"><span class="std std-ref">Evaluation Context</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.4.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="jinja2.escape">
<code class="descclassname">jinja2.</code><code class="descname">escape</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.escape" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the characters <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">'</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> in string <cite>s</cite>
to HTML-safe sequences.  Use this if you need to display text that might
contain such characters in HTML.  This function will not escaped objects
that do have an HTML representation such as already escaped data.</p>
<p>The return value is a <a class="reference internal" href="#jinja2.Markup" title="jinja2.Markup"><code class="xref py py-class docutils literal notranslate"><span class="pre">Markup</span></code></a> string.</p>
</dd></dl>

<dl class="function">
<dt id="jinja2.clear_caches">
<code class="descclassname">jinja2.</code><code class="descname">clear_caches</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.clear_caches" title="Permalink to this definition">¶</a></dt>
<dd><p>Jinja2 keeps internal caches for environments and lexers.  These are
used so that Jinja2 doesn’t have to recreate environments and lexers all
the time.  Normally you don’t have to care about that but if you are
messuring memory consumption you may want to clean the caches.</p>
</dd></dl>

<dl class="function">
<dt id="jinja2.is_undefined">
<code class="descclassname">jinja2.</code><code class="descname">is_undefined</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.is_undefined" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the object passed is undefined.  This does nothing more than
performing an instance check against <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a> but looks nicer.
This can be used for custom filters or tests that want to react to
undefined variables.  For example a custom default filter can look like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">is_undefined</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">default</span>
    <span class="k">return</span> <span class="n">var</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="jinja2.Markup">
<em class="property">class </em><code class="descclassname">jinja2.</code><code class="descname">Markup</code><span class="sig-paren">(</span><span class="optional">[</span><em>string</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Markup" title="Permalink to this definition">¶</a></dt>
<dd><p>A string that is ready to be safely inserted into an HTML or XML
document, either because it was escaped or because it was marked
safe.</p>
<p>Passing an object to the constructor converts it to text and wraps
it to mark it safe without escaping. To escape the text, use the
<a class="reference internal" href="index.html#escape" title="escape"><code class="xref py py-meth docutils literal notranslate"><span class="pre">escape()</span></code></a> class method instead.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="s1">&#39;Hello, &lt;em&gt;World&lt;/em&gt;!&#39;</span><span class="p">)</span>
<span class="go">Markup(&#39;Hello, &lt;em&gt;World&lt;/em&gt;!&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="go">Markup(&#39;42&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s1">&#39;Hello, &lt;em&gt;World&lt;/em&gt;!&#39;</span><span class="p">)</span>
<span class="go">Markup(&#39;Hello &amp;lt;em&amp;gt;World&amp;lt;/em&amp;gt;!&#39;)</span>
</pre></div>
</div>
<p>This implements the <code class="docutils literal notranslate"><span class="pre">__html__()</span></code> interface that some frameworks
use. Passing an object that implements <code class="docutils literal notranslate"><span class="pre">__html__()</span></code> will wrap the
output of that method, marking it safe.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__html__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s1">&#39;&lt;a href=&quot;/foo&quot;&gt;foo&lt;/a&gt;&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="n">Foo</span><span class="p">())</span>
<span class="go">Markup(&#39;&lt;a href=&quot;/foo&quot;&gt;foo&lt;/a&gt;&#39;)</span>
</pre></div>
</div>
<p>This is a subclass of the text type (<code class="docutils literal notranslate"><span class="pre">str</span></code> in Python 3,
<code class="docutils literal notranslate"><span class="pre">unicode</span></code> in Python 2). It has the same methods as that type, but
all methods escape their arguments and return a <code class="docutils literal notranslate"><span class="pre">Markup</span></code> instance.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="s1">&#39;&lt;em&gt;</span><span class="si">%s</span><span class="s1">&lt;/em&gt;&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="s1">&#39;foo &amp; bar&#39;</span>
<span class="go">Markup(&#39;&lt;em&gt;foo &amp;amp; bar&lt;/em&gt;&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="s1">&#39;&lt;em&gt;Hello&lt;/em&gt; &#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;foo&gt;&#39;</span>
<span class="go">Markup(&#39;&lt;em&gt;Hello&lt;/em&gt; &amp;lt;foo&amp;gt;&#39;)</span>
</pre></div>
</div>
<dl class="classmethod">
<dt id="jinja2.Markup.escape">
<em class="property">classmethod </em><code class="descname">escape</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Markup.escape" title="Permalink to this definition">¶</a></dt>
<dd><p>Escape a string. Calls <a class="reference internal" href="index.html#escape" title="escape"><code class="xref py py-func docutils literal notranslate"><span class="pre">escape()</span></code></a> and ensures that for
subclasses the correct type is returned.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Markup.striptags">
<code class="descname">striptags</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Markup.striptags" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#jinja2.Markup.unescape" title="jinja2.Markup.unescape"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unescape()</span></code></a> the markup, remove tags, and normalize
whitespace to single spaces.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="s1">&#39;Main &amp;raquo;        &lt;em&gt;About&lt;/em&gt;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">striptags</span><span class="p">()</span>
<span class="go">&#39;Main » About&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.Markup.unescape">
<code class="descname">unescape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Markup.unescape" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert escaped markup back into a text string. This replaces
HTML entities with the characters they represent.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="s1">&#39;Main &amp;raquo; &lt;em&gt;About&lt;/em&gt;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">unescape</span><span class="p">()</span>
<span class="go">&#39;Main » &lt;em&gt;About&lt;/em&gt;&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">The Jinja2 <a class="reference internal" href="#jinja2.Markup" title="jinja2.Markup"><code class="xref py py-class docutils literal notranslate"><span class="pre">Markup</span></code></a> class is compatible with at least Pylons and
Genshi.  It’s expected that more template engines and framework will pick
up the <cite>__html__</cite> concept soon.</p>
</div>
</div>
<div class="section" id="exceptions">
<h4>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h4>
<dl class="exception">
<dt id="jinja2.TemplateError">
<em class="property">exception </em><code class="descclassname">jinja2.</code><code class="descname">TemplateError</code><span class="sig-paren">(</span><em>message=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.TemplateError" title="Permalink to this definition">¶</a></dt>
<dd><p>Baseclass for all template errors.</p>
</dd></dl>

<dl class="exception">
<dt id="jinja2.UndefinedError">
<em class="property">exception </em><code class="descclassname">jinja2.</code><code class="descname">UndefinedError</code><span class="sig-paren">(</span><em>message=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.UndefinedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised if a template tries to operate on <a class="reference internal" href="#jinja2.Undefined" title="jinja2.Undefined"><code class="xref py py-class docutils literal notranslate"><span class="pre">Undefined</span></code></a>.</p>
</dd></dl>

<dl class="exception">
<dt id="jinja2.TemplateNotFound">
<em class="property">exception </em><code class="descclassname">jinja2.</code><code class="descname">TemplateNotFound</code><span class="sig-paren">(</span><em>name</em>, <em>message=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.TemplateNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised if a template does not exist.</p>
</dd></dl>

<dl class="exception">
<dt id="jinja2.TemplatesNotFound">
<em class="property">exception </em><code class="descclassname">jinja2.</code><code class="descname">TemplatesNotFound</code><span class="sig-paren">(</span><em>names=()</em>, <em>message=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.TemplatesNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#jinja2.TemplateNotFound" title="jinja2.TemplateNotFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateNotFound</span></code></a> but raised if multiple templates
are selected.  This is a subclass of <a class="reference internal" href="#jinja2.TemplateNotFound" title="jinja2.TemplateNotFound"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateNotFound</span></code></a>
exception, so just catching the base exception will catch both.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
</dd></dl>

<dl class="exception">
<dt id="jinja2.TemplateSyntaxError">
<em class="property">exception </em><code class="descclassname">jinja2.</code><code class="descname">TemplateSyntaxError</code><span class="sig-paren">(</span><em>message</em>, <em>lineno</em>, <em>name=None</em>, <em>filename=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.TemplateSyntaxError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised to tell the user that there is a problem with the template.</p>
<dl class="attribute">
<dt id="jinja2.TemplateSyntaxError.message">
<code class="descname">message</code><a class="headerlink" href="#jinja2.TemplateSyntaxError.message" title="Permalink to this definition">¶</a></dt>
<dd><p>The error message as utf-8 bytestring.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.TemplateSyntaxError.lineno">
<code class="descname">lineno</code><a class="headerlink" href="#jinja2.TemplateSyntaxError.lineno" title="Permalink to this definition">¶</a></dt>
<dd><p>The line number where the error occurred</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.TemplateSyntaxError.name">
<code class="descname">name</code><a class="headerlink" href="#jinja2.TemplateSyntaxError.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The load name for the template as unicode string.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.TemplateSyntaxError.filename">
<code class="descname">filename</code><a class="headerlink" href="#jinja2.TemplateSyntaxError.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>The filename that loaded the template as bytestring in the encoding
of the file system (most likely utf-8 or mbcs on Windows systems).</p>
</dd></dl>

<p>The reason why the filename and error message are bytestrings and not
unicode strings is that Python 2.x is not using unicode for exceptions
and tracebacks as well as the compiler.  This will change with Python 3.</p>
</dd></dl>

<dl class="exception">
<dt id="jinja2.TemplateAssertionError">
<em class="property">exception </em><code class="descclassname">jinja2.</code><code class="descname">TemplateAssertionError</code><span class="sig-paren">(</span><em>message</em>, <em>lineno</em>, <em>name=None</em>, <em>filename=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.TemplateAssertionError" title="Permalink to this definition">¶</a></dt>
<dd><p>Like a template syntax error, but covers cases where something in the
template caused an error at compile time that wasn’t necessarily caused
by a syntax error.  However it’s a direct subclass of
<a class="reference internal" href="#jinja2.TemplateSyntaxError" title="jinja2.TemplateSyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TemplateSyntaxError</span></code></a> and has the same attributes.</p>
</dd></dl>

</div>
<div class="section" id="custom-filters">
<span id="writing-filters"></span><h4>Custom Filters<a class="headerlink" href="#custom-filters" title="Permalink to this headline">¶</a></h4>
<p>Custom filters are just regular Python functions that take the left side of
the filter as first argument and the the arguments passed to the filter as
extra arguments or keyword arguments.</p>
<p>For example in the filter <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">42|myfilter(23)</span> <span class="pre">}}</span></code> the function would be
called with <code class="docutils literal notranslate"><span class="pre">myfilter(42,</span> <span class="pre">23)</span></code>.  Here for example a simple filter that can
be applied to datetime objects to format them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">datetimeformat</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;%H:%M / </span><span class="si">%d</span><span class="s1">-%m-%Y&#39;</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>
</pre></div>
</div>
<p>You can register it on the template environment by updating the
<a class="reference internal" href="#jinja2.Environment.filters" title="jinja2.Environment.filters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filters</span></code></a> dict on the environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">environment</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s1">&#39;datetimeformat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetimeformat</span>
</pre></div>
</div>
<p>Inside the template it can then be used as follows:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="x">written on: </span><span class="cp">{{</span> <span class="nv">article.pub_date</span><span class="o">|</span><span class="nf">datetimeformat</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">publication date: </span><span class="cp">{{</span> <span class="nv">article.pub_date</span><span class="o">|</span><span class="nf">datetimeformat</span><span class="o">(</span><span class="s1">&#39;%d-%m-%Y&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>Filters can also be passed the current template context or environment.  This
is useful if a filter wants to return an undefined value or check the current
<code class="xref py py-attr docutils literal notranslate"><span class="pre">autoescape</span></code> setting.  For this purpose three decorators
exist: <a class="reference internal" href="#jinja2.environmentfilter" title="jinja2.environmentfilter"><code class="xref py py-func docutils literal notranslate"><span class="pre">environmentfilter()</span></code></a>, <a class="reference internal" href="#jinja2.contextfilter" title="jinja2.contextfilter"><code class="xref py py-func docutils literal notranslate"><span class="pre">contextfilter()</span></code></a> and
<a class="reference internal" href="#jinja2.evalcontextfilter" title="jinja2.evalcontextfilter"><code class="xref py py-func docutils literal notranslate"><span class="pre">evalcontextfilter()</span></code></a>.</p>
<p>Here a small example filter that breaks a text into HTML line breaks and
paragraphs and marks the return value as safe HTML string if autoescaping is
enabled:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">evalcontextfilter</span><span class="p">,</span> <span class="n">Markup</span><span class="p">,</span> <span class="n">escape</span>

<span class="n">_paragraph_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?:\r\n|\r|\n){2,}&#39;</span><span class="p">)</span>

<span class="nd">@evalcontextfilter</span>
<span class="k">def</span> <span class="nf">nl2br</span><span class="p">(</span><span class="n">eval_ctx</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;&lt;p&gt;</span><span class="si">%s</span><span class="s1">&lt;/p&gt;&#39;</span> <span class="o">%</span> <span class="n">p</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;br&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                          <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">_paragraph_re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">escape</span><span class="p">(</span><span class="n">value</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">eval_ctx</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Markup</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<p>Context filters work the same just that the first argument is the current
active <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code> rather then the environment.</p>
</div>
<div class="section" id="evaluation-context">
<span id="eval-context"></span><h4>Evaluation Context<a class="headerlink" href="#evaluation-context" title="Permalink to this headline">¶</a></h4>
<p>The evaluation context (short eval context or eval ctx) is a new object
introducted in Jinja 2.4 that makes it possible to activate and deactivate
compiled features at runtime.</p>
<p>Currently it is only used to enable and disable the automatic escaping but
can be used for extensions as well.</p>
<p>In previous Jinja versions filters and functions were marked as
environment callables in order to check for the autoescape status from the
environment.  In new versions it’s encouraged to check the setting from the
evaluation context instead.</p>
<p>Previous versions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@environmentfilter</span>
<span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">do_something</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">env</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Markup</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<p>In new versions you can either use a <a class="reference internal" href="#jinja2.contextfilter" title="jinja2.contextfilter"><code class="xref py py-func docutils literal notranslate"><span class="pre">contextfilter()</span></code></a> and access the
evaluation context from the actual context, or use a
<a class="reference internal" href="#jinja2.evalcontextfilter" title="jinja2.evalcontextfilter"><code class="xref py py-func docutils literal notranslate"><span class="pre">evalcontextfilter()</span></code></a> which directly passes the evaluation context to
the function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@contextfilter</span>
<span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">do_something</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Markup</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="nd">@evalcontextfilter</span>
<span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="n">eval_ctx</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">do_something</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">eval_ctx</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Markup</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<p>The evaluation context must not be modified at runtime.  Modifications
must only happen with a <a class="reference internal" href="index.html#jinja2.nodes.EvalContextModifier" title="jinja2.nodes.EvalContextModifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">nodes.EvalContextModifier</span></code></a> and
<a class="reference internal" href="index.html#jinja2.nodes.ScopedEvalContextModifier" title="jinja2.nodes.ScopedEvalContextModifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">nodes.ScopedEvalContextModifier</span></code></a> from an extension, not on the
eval context object itself.</p>
<dl class="class">
<dt id="jinja2.nodes.EvalContext">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">EvalContext</code><span class="sig-paren">(</span><em>environment</em>, <em>template_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.EvalContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds evaluation time information.  Custom attributes can be attached
to it in extensions.</p>
<dl class="attribute">
<dt id="jinja2.nodes.EvalContext.autoescape">
<code class="descname">autoescape</code><a class="headerlink" href="#jinja2.nodes.EvalContext.autoescape" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>True</cite> or <cite>False</cite> depending on if autoescaping is active or not.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.nodes.EvalContext.volatile">
<code class="descname">volatile</code><a class="headerlink" href="#jinja2.nodes.EvalContext.volatile" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>True</cite> if the compiler cannot evaluate some expressions at compile
time.  At runtime this should always be <cite>False</cite>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="custom-tests">
<span id="writing-tests"></span><h4>Custom Tests<a class="headerlink" href="#custom-tests" title="Permalink to this headline">¶</a></h4>
<p>Tests work like filters just that there is no way for a test to get access
to the environment or context and that they can’t be chained.  The return
value of a test should be <cite>True</cite> or <cite>False</cite>.  The purpose of a test is to
give the template designers the possibility to perform type and conformability
checks.</p>
<p>Here a simple test that checks if a variable is a prime number:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>

<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
<p>You can register it on the template environment by updating the
<a class="reference internal" href="#jinja2.Environment.tests" title="jinja2.Environment.tests"><code class="xref py py-attr docutils literal notranslate"><span class="pre">tests</span></code></a> dict on the environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">environment</span><span class="o">.</span><span class="n">tests</span><span class="p">[</span><span class="s1">&#39;prime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_prime</span>
</pre></div>
</div>
<p>A template designer can then use the test like this:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="m">42</span> <span class="k">is</span> <span class="nf">prime</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    42 is a prime number</span>
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    42 is not a prime number</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="the-global-namespace">
<span id="global-namespace"></span><h4>The Global Namespace<a class="headerlink" href="#the-global-namespace" title="Permalink to this headline">¶</a></h4>
<p>Variables stored in the <a class="reference internal" href="#jinja2.Environment.globals" title="jinja2.Environment.globals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Environment.globals</span></code></a> dict are special as they
are available for imported templates too, even if they are imported without
context.  This is the place where you can put variables and functions
that should be available all the time.  Additionally <a class="reference internal" href="#jinja2.Template.globals" title="jinja2.Template.globals"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Template.globals</span></code></a>
exist that are variables available to a specific template that are available
to all <a class="reference internal" href="#jinja2.Template.render" title="jinja2.Template.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a> calls.</p>
</div>
<div class="section" id="low-level-api">
<span id="id3"></span><h4>Low Level API<a class="headerlink" href="#low-level-api" title="Permalink to this headline">¶</a></h4>
<p>The low level API exposes functionality that can be useful to understand some
implementation details, debugging purposes or advanced <a class="reference internal" href="index.html#jinja-extensions"><span class="std std-ref">extension</span></a> techniques.  Unless you know exactly what you are doing we
don’t recommend using any of those.</p>
<dl class="method">
<dt id="jinja2.Environment.lex">
<code class="descclassname">Environment.</code><code class="descname">lex</code><span class="sig-paren">(</span><em>source</em>, <em>name=None</em>, <em>filename=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.lex" title="Permalink to this definition">¶</a></dt>
<dd><p>Lex the given sourcecode and return a generator that yields
tokens as tuples in the form <code class="docutils literal notranslate"><span class="pre">(lineno,</span> <span class="pre">token_type,</span> <span class="pre">value)</span></code>.
This can be useful for <a class="reference internal" href="index.html#writing-extensions"><span class="std std-ref">extension development</span></a>
and debugging templates.</p>
<p>This does not perform preprocessing.  If you want the preprocessing
of the extensions to be applied you have to filter source through
the <a class="reference internal" href="#jinja2.Environment.preprocess" title="jinja2.Environment.preprocess"><code class="xref py py-meth docutils literal notranslate"><span class="pre">preprocess()</span></code></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.parse">
<code class="descclassname">Environment.</code><code class="descname">parse</code><span class="sig-paren">(</span><em>source</em>, <em>name=None</em>, <em>filename=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the sourcecode and return the abstract syntax tree.  This
tree of nodes is used by the compiler to convert the template into
executable source- or bytecode.  This is useful for debugging or to
extract information from templates.</p>
<p>If you are <a class="reference internal" href="index.html#writing-extensions"><span class="std std-ref">developing Jinja2 extensions</span></a>
this gives you a good overview of the node tree generated.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.preprocess">
<code class="descclassname">Environment.</code><code class="descname">preprocess</code><span class="sig-paren">(</span><em>source</em>, <em>name=None</em>, <em>filename=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Preprocesses the source with all extensions.  This is automatically
called for all parsing and compiling methods but <em>not</em> for <a class="reference internal" href="#jinja2.Environment.lex" title="jinja2.Environment.lex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lex()</span></code></a>
because there you usually only want the actual source tokenized.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Template.new_context">
<code class="descclassname">Template.</code><code class="descname">new_context</code><span class="sig-paren">(</span><em>vars=None</em>, <em>shared=False</em>, <em>locals=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.new_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code> for this template.  The vars
provided will be passed to the template.  Per default the globals
are added to the context.  If shared is set to <cite>True</cite> the data
is passed as it to the context without adding the globals.</p>
<p><cite>locals</cite> can be a dict of local variables for internal usage.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Template.root_render_func">
<code class="descclassname">Template.</code><code class="descname">root_render_func</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Template.root_render_func" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the low level render function.  It’s passed a <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code>
that has to be created by <a class="reference internal" href="#jinja2.Template.new_context" title="jinja2.Template.new_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">new_context()</span></code></a> of the same template or
a compatible template.  This render function is generated by the
compiler from the template code and returns a generator that yields
unicode strings.</p>
<p>If an exception in the template code happens the template engine will
not rewrite the exception but pass through the original one.  As a
matter of fact this function should only be called from within a
<a class="reference internal" href="#jinja2.Template.render" title="jinja2.Template.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a> / <a class="reference internal" href="#jinja2.Template.generate" title="jinja2.Template.generate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">generate()</span></code></a> / <a class="reference internal" href="#jinja2.Template.stream" title="jinja2.Template.stream"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stream()</span></code></a> call.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.Template.blocks">
<code class="descclassname">Template.</code><code class="descname">blocks</code><a class="headerlink" href="#jinja2.Template.blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of block render functions.  Each of these functions works exactly
like the <a class="reference internal" href="#jinja2.Template.root_render_func" title="jinja2.Template.root_render_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">root_render_func()</span></code></a> with the same limitations.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.Template.is_up_to_date">
<code class="descclassname">Template.</code><code class="descname">is_up_to_date</code><a class="headerlink" href="#jinja2.Template.is_up_to_date" title="Permalink to this definition">¶</a></dt>
<dd><p>This attribute is <cite>False</cite> if there is a newer version of the template
available, otherwise <cite>True</cite>.</p>
</dd></dl>

<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">The low-level API is fragile.  Future Jinja2 versions will try not to
change it in a backwards incompatible way but modifications in the Jinja2
core may shine through.  For example if Jinja2 introduces a new AST node
in later versions that may be returned by <a class="reference internal" href="#jinja2.Environment.parse" title="jinja2.Environment.parse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parse()</span></code></a>.</p>
</div>
</div>
<div class="section" id="the-meta-api">
<h4>The Meta API<a class="headerlink" href="#the-meta-api" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<p>The meta API returns some information about abstract syntax trees that
could help applications to implement more advanced template concepts.  All
the functions of the meta API operate on an abstract syntax tree as
returned by the <a class="reference internal" href="#jinja2.Environment.parse" title="jinja2.Environment.parse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Environment.parse()</span></code></a> method.</p>
<dl class="function">
<dt id="jinja2.meta.find_undeclared_variables">
<code class="descclassname">jinja2.meta.</code><code class="descname">find_undeclared_variables</code><span class="sig-paren">(</span><em>ast</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.meta.find_undeclared_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a set of all variables in the AST that will be looked up from
the context at runtime.  Because at compile time it’s not known which
variables will be used depending on the path the execution takes at
runtime, all variables are returned.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">meta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ast</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;{</span><span class="si">% s</span><span class="s1">et foo = 42 %}{{ bar + foo }}&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="o">.</span><span class="n">find_undeclared_variables</span><span class="p">(</span><span class="n">ast</span><span class="p">)</span>
<span class="go">set([&#39;bar&#39;])</span>
</pre></div>
</div>
<div class="admonition-implementation admonition">
<p class="first admonition-title">Implementation</p>
<p class="last">Internally the code generator is used for finding undeclared variables.
This is good to know because the code generator might raise a
<code class="xref py py-exc docutils literal notranslate"><span class="pre">TemplateAssertionError</span></code> during compilation and as a matter of
fact this function can currently raise that exception as well.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="jinja2.meta.find_referenced_templates">
<code class="descclassname">jinja2.meta.</code><code class="descname">find_referenced_templates</code><span class="sig-paren">(</span><em>ast</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.meta.find_referenced_templates" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds all the referenced templates from the AST.  This will return an
iterator over all the hardcoded template extensions, inclusions and
imports.  If dynamic inheritance or inclusion is used, <cite>None</cite> will be
yielded.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">meta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ast</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;{</span><span class="si">% e</span><span class="s1">xtends &quot;layout.html&quot; %}{</span><span class="si">% i</span><span class="s1">nclude helper %}&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">find_referenced_templates</span><span class="p">(</span><span class="n">ast</span><span class="p">))</span>
<span class="go">[&#39;layout.html&#39;, None]</span>
</pre></div>
</div>
<p>This function is useful for dependency tracking.  For example if you want
to rebuild parts of the website after a layout template has changed.</p>
</dd></dl>

</div>
</div>
<span id="document-sandbox"></span><div class="section" id="sandbox">
<h3>Sandbox<a class="headerlink" href="#sandbox" title="Permalink to this headline">¶</a></h3>
<p>The Jinja2 sandbox can be used to evaluate untrusted code.  Access to unsafe
attributes and methods is prohibited.</p>
<p>Assuming <cite>env</cite> is a <code class="xref py py-class docutils literal notranslate"><span class="pre">SandboxedEnvironment</span></code> in the default configuration
the following piece of code shows how it works:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;{{ func.func_code }}&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="kc">None</span><span class="p">)</span>
<span class="go">u&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;{{ func.func_code.do_something }}&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span><span class="kc">None</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">SecurityError</span>: <span class="n">access to attribute &#39;func_code&#39; of &#39;function&#39; object is unsafe.</span>
</pre></div>
</div>
<div class="section" id="module-jinja2.sandbox">
<span id="api"></span><h4>API<a class="headerlink" href="#module-jinja2.sandbox" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="jinja2.sandbox.SandboxedEnvironment">
<em class="property">class </em><code class="descclassname">jinja2.sandbox.</code><code class="descname">SandboxedEnvironment</code><span class="sig-paren">(</span><span class="optional">[</span><em>options</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.sandbox.SandboxedEnvironment" title="Permalink to this definition">¶</a></dt>
<dd><p>The sandboxed environment.  It works like the regular environment but
tells the compiler to generate sandboxed code.  Additionally subclasses of
this environment may override the methods that tell the runtime what
attributes or functions are safe to access.</p>
<p>If the template tries to access insecure code a <a class="reference internal" href="#jinja2.sandbox.SecurityError" title="jinja2.sandbox.SecurityError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SecurityError</span></code></a> is
raised.  However also other exceptions may occour during the rendering so
the caller has to ensure that all exceptions are catched.</p>
<dl class="method">
<dt id="jinja2.sandbox.SandboxedEnvironment.call_binop">
<code class="descname">call_binop</code><span class="sig-paren">(</span><em>context</em>, <em>operator</em>, <em>left</em>, <em>right</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.sandbox.SandboxedEnvironment.call_binop" title="Permalink to this definition">¶</a></dt>
<dd><p>For intercepted binary operator calls (<a class="reference internal" href="#jinja2.sandbox.SandboxedEnvironment.intercepted_binops" title="jinja2.sandbox.SandboxedEnvironment.intercepted_binops"><code class="xref py py-meth docutils literal notranslate"><span class="pre">intercepted_binops()</span></code></a>)
this function is executed instead of the builtin operator.  This can
be used to fine tune the behavior of certain operators.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.6.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.sandbox.SandboxedEnvironment.call_unop">
<code class="descname">call_unop</code><span class="sig-paren">(</span><em>context</em>, <em>operator</em>, <em>arg</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.sandbox.SandboxedEnvironment.call_unop" title="Permalink to this definition">¶</a></dt>
<dd><p>For intercepted unary operator calls (<a class="reference internal" href="#jinja2.sandbox.SandboxedEnvironment.intercepted_unops" title="jinja2.sandbox.SandboxedEnvironment.intercepted_unops"><code class="xref py py-meth docutils literal notranslate"><span class="pre">intercepted_unops()</span></code></a>)
this function is executed instead of the builtin operator.  This can
be used to fine tune the behavior of certain operators.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.6.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.sandbox.SandboxedEnvironment.default_binop_table">
<code class="descname">default_binop_table</code><em class="property"> = {'%': &lt;built-in function mod&gt;, '*': &lt;built-in function mul&gt;, '**': &lt;built-in function pow&gt;, '+': &lt;built-in function add&gt;, '-': &lt;built-in function sub&gt;, '/': &lt;built-in function truediv&gt;, '//': &lt;built-in function floordiv&gt;}</em><a class="headerlink" href="#jinja2.sandbox.SandboxedEnvironment.default_binop_table" title="Permalink to this definition">¶</a></dt>
<dd><p>default callback table for the binary operators.  A copy of this is
available on each instance of a sandboxed environment as
<code class="xref py py-attr docutils literal notranslate"><span class="pre">binop_table</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.sandbox.SandboxedEnvironment.default_unop_table">
<code class="descname">default_unop_table</code><em class="property"> = {'+': &lt;built-in function pos&gt;, '-': &lt;built-in function neg&gt;}</em><a class="headerlink" href="#jinja2.sandbox.SandboxedEnvironment.default_unop_table" title="Permalink to this definition">¶</a></dt>
<dd><p>default callback table for the unary operators.  A copy of this is
available on each instance of a sandboxed environment as
<code class="xref py py-attr docutils literal notranslate"><span class="pre">unop_table</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.sandbox.SandboxedEnvironment.intercepted_binops">
<code class="descname">intercepted_binops</code><em class="property"> = frozenset([])</em><a class="headerlink" href="#jinja2.sandbox.SandboxedEnvironment.intercepted_binops" title="Permalink to this definition">¶</a></dt>
<dd><p>a set of binary operators that should be intercepted.  Each operator
that is added to this set (empty by default) is delegated to the
<a class="reference internal" href="#jinja2.sandbox.SandboxedEnvironment.call_binop" title="jinja2.sandbox.SandboxedEnvironment.call_binop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">call_binop()</span></code></a> method that will perform the operator.  The default
operator callback is specified by <code class="xref py py-attr docutils literal notranslate"><span class="pre">binop_table</span></code>.</p>
<p>The following binary operators are interceptable:
<code class="docutils literal notranslate"><span class="pre">//</span></code>, <code class="docutils literal notranslate"><span class="pre">%</span></code>, <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, and <code class="docutils literal notranslate"><span class="pre">**</span></code></p>
<p>The default operation form the operator table corresponds to the
builtin function.  Intercepted calls are always slower than the native
operator call, so make sure only to intercept the ones you are
interested in.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.6.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.sandbox.SandboxedEnvironment.intercepted_unops">
<code class="descname">intercepted_unops</code><em class="property"> = frozenset([])</em><a class="headerlink" href="#jinja2.sandbox.SandboxedEnvironment.intercepted_unops" title="Permalink to this definition">¶</a></dt>
<dd><p>a set of unary operators that should be intercepted.  Each operator
that is added to this set (empty by default) is delegated to the
<a class="reference internal" href="#jinja2.sandbox.SandboxedEnvironment.call_unop" title="jinja2.sandbox.SandboxedEnvironment.call_unop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">call_unop()</span></code></a> method that will perform the operator.  The default
operator callback is specified by <code class="xref py py-attr docutils literal notranslate"><span class="pre">unop_table</span></code>.</p>
<p>The following unary operators are interceptable: <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code></p>
<p>The default operation form the operator table corresponds to the
builtin function.  Intercepted calls are always slower than the native
operator call, so make sure only to intercept the ones you are
interested in.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.6.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.sandbox.SandboxedEnvironment.is_safe_attribute">
<code class="descname">is_safe_attribute</code><span class="sig-paren">(</span><em>obj</em>, <em>attr</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.sandbox.SandboxedEnvironment.is_safe_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>The sandboxed environment will call this method to check if the
attribute of an object is safe to access.  Per default all attributes
starting with an underscore are considered private as well as the
special attributes of internal python objects as returned by the
<a class="reference internal" href="#jinja2.sandbox.is_internal_attribute" title="jinja2.sandbox.is_internal_attribute"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_internal_attribute()</span></code></a> function.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.sandbox.SandboxedEnvironment.is_safe_callable">
<code class="descname">is_safe_callable</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.sandbox.SandboxedEnvironment.is_safe_callable" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if an object is safely callable.  Per default a function is
considered safe unless the <cite>unsafe_callable</cite> attribute exists and is
True.  Override this method to alter the behavior, but this won’t
affect the <cite>unsafe</cite> decorator from this module.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="jinja2.sandbox.ImmutableSandboxedEnvironment">
<em class="property">class </em><code class="descclassname">jinja2.sandbox.</code><code class="descname">ImmutableSandboxedEnvironment</code><span class="sig-paren">(</span><span class="optional">[</span><em>options</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.sandbox.ImmutableSandboxedEnvironment" title="Permalink to this definition">¶</a></dt>
<dd><p>Works exactly like the regular <cite>SandboxedEnvironment</cite> but does not
permit modifications on the builtin mutable objects <cite>list</cite>, <cite>set</cite>, and
<cite>dict</cite> by using the <a class="reference internal" href="#jinja2.sandbox.modifies_known_mutable" title="jinja2.sandbox.modifies_known_mutable"><code class="xref py py-func docutils literal notranslate"><span class="pre">modifies_known_mutable()</span></code></a> function.</p>
</dd></dl>

<dl class="exception">
<dt id="jinja2.sandbox.SecurityError">
<em class="property">exception </em><code class="descclassname">jinja2.sandbox.</code><code class="descname">SecurityError</code><span class="sig-paren">(</span><em>message=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.sandbox.SecurityError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised if a template tries to do something insecure if the
sandbox is enabled.</p>
</dd></dl>

<dl class="function">
<dt id="jinja2.sandbox.unsafe">
<code class="descclassname">jinja2.sandbox.</code><code class="descname">unsafe</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.sandbox.unsafe" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks a function or method as unsafe.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@unsafe</span>
<span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="jinja2.sandbox.is_internal_attribute">
<code class="descclassname">jinja2.sandbox.</code><code class="descname">is_internal_attribute</code><span class="sig-paren">(</span><em>obj</em>, <em>attr</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.sandbox.is_internal_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if the attribute given is an internal python attribute.  For
example this function returns <cite>True</cite> for the <cite>func_code</cite> attribute of
python objects.  This is useful if the environment method
<a class="reference internal" href="#jinja2.sandbox.SandboxedEnvironment.is_safe_attribute" title="jinja2.sandbox.SandboxedEnvironment.is_safe_attribute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_safe_attribute()</span></code></a> is overriden.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jinja2.sandbox</span> <span class="kn">import</span> <span class="n">is_internal_attribute</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_internal_attribute</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;func_code&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_internal_attribute</span><span class="p">((</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">func_code</span><span class="p">,</span> <span class="s1">&#39;co_code&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_internal_attribute</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;upper&quot;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="jinja2.sandbox.modifies_known_mutable">
<code class="descclassname">jinja2.sandbox.</code><code class="descname">modifies_known_mutable</code><span class="sig-paren">(</span><em>obj</em>, <em>attr</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.sandbox.modifies_known_mutable" title="Permalink to this definition">¶</a></dt>
<dd><p>This function checks if an attribute on a builtin mutable object
(list, dict, set or deque) would modify it if called.  It also supports
the “user”-versions of the objects (<cite>sets.Set</cite>, <cite>UserDict.*</cite> etc.) and
with Python 2.6 onwards the abstract base classes <cite>MutableSet</cite>,
<cite>MutableMapping</cite>, and <cite>MutableSequence</cite>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">modifies_known_mutable</span><span class="p">({},</span> <span class="s2">&quot;clear&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modifies_known_mutable</span><span class="p">({},</span> <span class="s2">&quot;keys&quot;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modifies_known_mutable</span><span class="p">([],</span> <span class="s2">&quot;append&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modifies_known_mutable</span><span class="p">([],</span> <span class="s2">&quot;index&quot;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>If called with an unsupported object (such as unicode) <cite>False</cite> is
returned.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">modifies_known_mutable</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;upper&quot;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p>The Jinja2 sandbox alone is no solution for perfect security.  Especially
for web applications you have to keep in mind that users may create
templates with arbitrary HTML in so it’s crucial to ensure that (if you
are running multiple users on the same server) they can’t harm each other
via JavaScript insertions and much more.</p>
<p>Also the sandbox is only as good as the configuration.  We stronly
recommend only passing non-shared resources to the template and use
some sort of whitelisting for attributes.</p>
<p class="last">Also keep in mind that templates may raise runtime or compile time errors,
so make sure to catch them.</p>
</div>
</div>
<div class="section" id="operator-intercepting">
<h4>Operator Intercepting<a class="headerlink" href="#operator-intercepting" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.6.</span></p>
</div>
<p>For maximum performace Jinja2 will let operators call directly the type
specific callback methods.  This means that it’s not possible to have this
intercepted by overriding <code class="xref py py-meth docutils literal notranslate"><span class="pre">Environment.call()</span></code>.  Furthermore a
conversion from operator to special method is not always directly possible
due to how operators work.  For instance for divisions more than one
special method exist.</p>
<p>With Jinja 2.6 there is now support for explicit operator intercepting.
This can be used to customize specific operators as necessary.  In order
to intercept an operator one has to override the
<a class="reference internal" href="#jinja2.sandbox.SandboxedEnvironment.intercepted_binops" title="jinja2.sandbox.SandboxedEnvironment.intercepted_binops"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SandboxedEnvironment.intercepted_binops</span></code></a> attribute.  Once the
operator that needs to be intercepted is added to that set Jinja2 will
generate bytecode that calls the <a class="reference internal" href="#jinja2.sandbox.SandboxedEnvironment.call_binop" title="jinja2.sandbox.SandboxedEnvironment.call_binop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SandboxedEnvironment.call_binop()</span></code></a>
function.  For unary operators the <cite>unary</cite> attributes and methods have to
be used instead.</p>
<p>The default implementation of <a class="reference internal" href="#jinja2.sandbox.SandboxedEnvironment.call_binop" title="jinja2.sandbox.SandboxedEnvironment.call_binop"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SandboxedEnvironment.call_binop</span></code></a>
will use the <code class="xref py py-attr docutils literal notranslate"><span class="pre">SandboxedEnvironment.binop_table</span></code> to translate
operator symbols into callbacks performing the default operator behavior.</p>
<p>This example shows how the power (<code class="docutils literal notranslate"><span class="pre">**</span></code>) operator can be disabled in
Jinja2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jinja2.sandbox</span> <span class="kn">import</span> <span class="n">SandboxedEnvironment</span>


<span class="k">class</span> <span class="nc">MyEnvironment</span><span class="p">(</span><span class="n">SandboxedEnvironment</span><span class="p">):</span>
    <span class="n">intercepted_binops</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">([</span><span class="s1">&#39;**&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">call_binop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;**&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">undefined</span><span class="p">(</span><span class="s1">&#39;the power operator is unavailable&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SandboxedEnvironment</span><span class="o">.</span><span class="n">call_binop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span>
                                               <span class="n">operator</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</pre></div>
</div>
<p>Make sure to always call into the super method, even if you are not
intercepting the call.  Jinja2 might internally call the method to
evaluate expressions.</p>
</div>
</div>
<span id="document-templates"></span><div class="section" id="template-designer-documentation">
<h3>Template Designer Documentation<a class="headerlink" href="#template-designer-documentation" title="Permalink to this headline">¶</a></h3>
<p>This document describes the syntax and semantics of the template engine and
will be most useful as reference to those creating Jinja templates.  As the
template engine is very flexible the configuration from the application might
be slightly different from here in terms of delimiters and behavior of
undefined values.</p>
<div class="section" id="synopsis">
<h4>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h4>
<p>A template is simply a text file.  It can generate any text-based format
(HTML, XML, CSV, LaTeX, etc.).  It doesn’t have a specific extension,
<code class="docutils literal notranslate"><span class="pre">.html</span></code> or <code class="docutils literal notranslate"><span class="pre">.xml</span></code> are just fine.</p>
<p>A template contains <strong>variables</strong> or <strong>expressions</strong>, which get replaced with
values when the template is evaluated, and tags, which control the logic of
the template.  The template syntax is heavily inspired by Django and Python.</p>
<p>Below is a minimal template that illustrates a few basics.  We will cover
the details later in that document:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot;&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>My Webpage<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;navigation&quot;</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">navigation</span> <span class="cp">%}</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">item.href</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">item.caption</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>My Webpage<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="cp">{{</span> <span class="nv">a_variable</span> <span class="cp">}}</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>This covers the default settings.  The application developer might have
changed the syntax from <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">foo</span> <span class="pre">%}</span></code> to <code class="docutils literal notranslate"><span class="pre">&lt;%</span> <span class="pre">foo</span> <span class="pre">%&gt;</span></code> or something similar.</p>
<p>There are two kinds of delimiters. <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">...</span> <span class="pre">%}</span></code> and <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">...</span> <span class="pre">}}</span></code>.  The first
one is used to execute statements such as for-loops or assign values, the
latter prints the result of the expression to the template.</p>
</div>
<div class="section" id="variables">
<span id="id1"></span><h4>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h4>
<p>The application passes variables to the templates you can mess around in the
template.  Variables may have attributes or elements on them you can access
too.  How a variable looks like, heavily depends on the application providing
those.</p>
<p>You can use a dot (<code class="docutils literal notranslate"><span class="pre">.</span></code>) to access attributes of a variable, alternative the
so-called “subscript” syntax (<code class="docutils literal notranslate"><span class="pre">[]</span></code>) can be used.  The following lines do
the same:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">foo.bar</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">foo</span><span class="o">[</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>It’s important to know that the curly braces are <em>not</em> part of the variable
but the print statement.  If you access variables inside tags don’t put the
braces around.</p>
<p>If a variable or attribute does not exist you will get back an undefined
value.  What you can do with that kind of value depends on the application
configuration, the default behavior is that it evaluates to an empty string
if printed and that you can iterate over it, but every other operation fails.</p>
<div class="admonition-implementation admonition" id="notes-on-subscriptions">
<p class="first admonition-title">Implementation</p>
<p>For convenience sake <code class="docutils literal notranslate"><span class="pre">foo.bar</span></code> in Jinja2 does the following things on
the Python layer:</p>
<ul class="simple">
<li>check if there is an attribute called <cite>bar</cite> on <cite>foo</cite>.</li>
<li>if there is not, check if there is an item <code class="docutils literal notranslate"><span class="pre">'bar'</span></code> in <cite>foo</cite>.</li>
<li>if there is not, return an undefined object.</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">foo['bar']</span></code> on the other hand works mostly the same with the a small
difference in the order:</p>
<ul class="simple">
<li>check if there is an item <code class="docutils literal notranslate"><span class="pre">'bar'</span></code> in <cite>foo</cite>.</li>
<li>if there is not, check if there is an attribute called <cite>bar</cite> on <cite>foo</cite>.</li>
<li>if there is not, return an undefined object.</li>
</ul>
<p class="last">This is important if an object has an item or attribute with the same
name.  Additionally there is the <a class="reference internal" href="#attr" title="attr"><code class="xref py py-func docutils literal notranslate"><span class="pre">attr()</span></code></a> filter that just looks up
attributes.</p>
</div>
</div>
<div class="section" id="filters">
<span id="id2"></span><h4>Filters<a class="headerlink" href="#filters" title="Permalink to this headline">¶</a></h4>
<p>Variables can be modified by <strong>filters</strong>.  Filters are separated from the
variable by a pipe symbol (<code class="docutils literal notranslate"><span class="pre">|</span></code>) and may have optional arguments in
parentheses.  Multiple filters can be chained.  The output of one filter is
applied to the next.</p>
<p><code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">name|striptags|title</span> <span class="pre">}}</span></code> for example will remove all HTML Tags from the
<cite>name</cite> and title-cases it.  Filters that accept arguments have parentheses
around the arguments, like a function call.  This example will join a list
by commas:  <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">list|join(',</span> <span class="pre">')</span> <span class="pre">}}</span></code>.</p>
<p>The <a class="reference internal" href="#builtin-filters"><span class="std std-ref">List of Builtin Filters</span></a> below describes all the builtin filters.</p>
</div>
<div class="section" id="tests">
<span id="id3"></span><h4>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h4>
<p>Beside filters there are also so called “tests” available.  Tests can be used
to test a variable against a common expression.  To test a variable or
expression you add <cite>is</cite> plus the name of the test after the variable.  For
example to find out if a variable is defined you can do <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">is</span> <span class="pre">defined</span></code>
which will then return true or false depending on if <cite>name</cite> is defined.</p>
<p>Tests can accept arguments too.  If the test only takes one argument you can
leave out the parentheses to group them.  For example the following two
expressions do the same:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="k">is</span> <span class="nf">divisibleby</span> <span class="m">3</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="k">is</span> <span class="nf">divisibleby</span><span class="o">(</span><span class="m">3</span><span class="o">)</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#builtin-tests"><span class="std std-ref">List of Builtin Tests</span></a> below describes all the builtin tests.</p>
</div>
<div class="section" id="comments">
<h4>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h4>
<p>To comment-out part of a line in a template, use the comment syntax which is
by default set to <code class="docutils literal notranslate"><span class="pre">{#</span> <span class="pre">...</span> <span class="pre">#}</span></code>.  This is useful to comment out parts of the
template for debugging or to add information for other template designers or
yourself:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="c">{# note: disabled template because we no longer use this</span>
<span class="c">    {% for user in users %}</span>
<span class="c">        ...</span>
<span class="c">    {% endfor %}</span>
<span class="c">#}</span>
</pre></div>
</div>
</div>
<div class="section" id="whitespace-control">
<h4>Whitespace Control<a class="headerlink" href="#whitespace-control" title="Permalink to this headline">¶</a></h4>
<p>In the default configuration whitespace is not further modified by the
template engine, so each whitespace (spaces, tabs, newlines etc.) is returned
unchanged.  If the application configures Jinja to <cite>trim_blocks</cite> the first
newline after a a template tag is removed automatically (like in PHP).</p>
<p>But you can also strip whitespace in templates by hand.  If you put an minus
sign (<code class="docutils literal notranslate"><span class="pre">-</span></code>) to the start or end of an block (for example a for tag), a
comment or variable expression you can remove the whitespaces after or before
that block:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">seq</span> -<span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">item</span> <span class="cp">}}</span>
<span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>This will yield all elements without whitespace between them.  If <cite>seq</cite> was
a list of numbers from <code class="docutils literal notranslate"><span class="pre">1</span></code> to <code class="docutils literal notranslate"><span class="pre">9</span></code> the output would be <code class="docutils literal notranslate"><span class="pre">123456789</span></code>.</p>
<p>If <a class="reference internal" href="#line-statements"><span class="std std-ref">Line Statements</span></a> are enabled they strip leading whitespace
automatically up to the beginning of the line.</p>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p>You must not use a whitespace between the tag and the minus sign.</p>
<p><strong>valid</strong>:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span>- <span class="k">if</span> <span class="nv">foo</span> -<span class="cp">%}</span>...<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
<p><strong>invalid</strong>:</p>
<div class="last highlight-html+jinja notranslate"><div class="highlight"><pre><span></span>{% - if foo - %}...<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="escaping">
<h4>Escaping<a class="headerlink" href="#escaping" title="Permalink to this headline">¶</a></h4>
<p>It is sometimes desirable or even necessary to have Jinja ignore parts it
would otherwise handle as variables or blocks.  For example if the default
syntax is used and you want to use <code class="docutils literal notranslate"><span class="pre">{{</span></code> as raw string in the template and
not start a variable you have to use a trick.</p>
<p>The easiest way is to output the variable delimiter (<code class="docutils literal notranslate"><span class="pre">{{</span></code>) by using a
variable expression:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="s1">&#39;{{&#39;</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>For bigger sections it makes sense to mark a block <cite>raw</cite>.  For example to
put Jinja syntax as example into a template you can use this snippet:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">raw</span> <span class="cp">%}</span>
    &lt;ul&gt;
    {% for item in seq %}
        &lt;li&gt;{{ item }}&lt;/li&gt;
    {% endfor %}
    &lt;/ul&gt;
<span class="cp">{%</span> <span class="k">endraw</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="line-statements">
<span id="id4"></span><h4>Line Statements<a class="headerlink" href="#line-statements" title="Permalink to this headline">¶</a></h4>
<p>If line statements are enabled by the application it’s possible to mark a
line as a statement.  For example if the line statement prefix is configured
to <code class="docutils literal notranslate"><span class="pre">#</span></code> the following two examples are equivalent:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
# for item in seq
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">item</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
# endfor
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">seq</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">item</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The line statement prefix can appear anywhere on the line as long as no text
precedes it.  For better readability statements that start a block (such as
<cite>for</cite>, <cite>if</cite>, <cite>elif</cite> etc.) may end with a colon:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span># for item in seq:
    ...
# endfor
</pre></div>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p>Line statements can span multiple lines if there are open parentheses,
braces or brackets:</p>
<div class="last highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
# for href, caption in [(&#39;index.html&#39;, &#39;Index&#39;),
                        (&#39;about.html&#39;, &#39;About&#39;)]:
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">href</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">caption</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
# endfor
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<p>Since Jinja 2.2 line-based comments are available as well.  For example if
the line-comment prefix is configured to be <code class="docutils literal notranslate"><span class="pre">##</span></code> everything from <code class="docutils literal notranslate"><span class="pre">##</span></code> to
the end of the line is ignored (excluding the newline sign):</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span># for item in seq:
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">item</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>     ## this comment is ignored
# endfor
</pre></div>
</div>
</div>
<div class="section" id="template-inheritance">
<span id="id5"></span><h4>Template Inheritance<a class="headerlink" href="#template-inheritance" title="Permalink to this headline">¶</a></h4>
<p>The most powerful part of Jinja is template inheritance. Template inheritance
allows you to build a base “skeleton” template that contains all the common
elements of your site and defines <strong>blocks</strong> that child templates can override.</p>
<p>Sounds complicated but is very basic. It’s easiest to understand it by starting
with an example.</p>
<div class="section" id="base-template">
<h5>Base Template<a class="headerlink" href="#base-template" title="Permalink to this headline">¶</a></h5>
<p>This template, which we’ll call <code class="docutils literal notranslate"><span class="pre">base.html</span></code>, defines a simple HTML skeleton
document that you might use for a simple two-column page. It’s the job of
“child” templates to fill the empty blocks with content:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot;&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">block</span> <span class="nv">head</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;style.css&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span> - My Webpage<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;content&quot;</span><span class="p">&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;footer&quot;</span><span class="p">&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">footer</span> <span class="cp">%}</span>
        <span class="ni">&amp;copy;</span> Copyright 2008 by <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://domain.invalid/&quot;</span><span class="p">&gt;</span>you<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>.
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>In this example, the <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></code> tags define four blocks that child templates
can fill in. All the <cite>block</cite> tag does is to tell the template engine that a
child template may override those portions of the template.</p>
</div>
<div class="section" id="child-template">
<h5>Child Template<a class="headerlink" href="#child-template" title="Permalink to this headline">¶</a></h5>
<p>A child template might look like this:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;base.html&quot;</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Index<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">head</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nb">super</span><span class="o">()</span> <span class="cp">}}</span>
    <span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>
        <span class="p">.</span><span class="nc">important</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#336699</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Index<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;important&quot;</span><span class="p">&gt;</span>
      Welcome on my awesome homepage.
    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">extends</span> <span class="pre">%}</span></code> tag is the key here. It tells the template engine that
this template “extends” another template.  When the template system evaluates
this template, first it locates the parent.  The extends tag should be the
first tag in the template.  Everything before it is printed out normally and
may cause confusion.  For details about this behavior and how to take
advantage of it, see <a class="reference internal" href="index.html#null-master-fallback"><span class="std std-ref">Null-Master Fallback</span></a>.</p>
<p>The filename of the template depends on the template loader.  For example the
<code class="xref py py-class docutils literal notranslate"><span class="pre">FileSystemLoader</span></code> allows you to access other templates by giving the
filename.  You can access templates in subdirectories with an slash:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;layout/default.html&quot;</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>But this behavior can depend on the application embedding Jinja.  Note that
since the child template doesn’t define the <code class="docutils literal notranslate"><span class="pre">footer</span></code> block, the value from
the parent template is used instead.</p>
<p>You can’t define multiple <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></code> tags with the same name in the
same template.  This limitation exists because a block tag works in “both”
directions.  That is, a block tag doesn’t just provide a hole to fill - it
also defines the content that fills the hole in the <em>parent</em>.  If there
were two similarly-named <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></code> tags in a template, that template’s
parent wouldn’t know which one of the blocks’ content to use.</p>
<p>If you want to print a block multiple times you can however use the special
<cite>self</cite> variable and call the block with that name:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">self.title</span><span class="o">()</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="super-blocks">
<h5>Super Blocks<a class="headerlink" href="#super-blocks" title="Permalink to this headline">¶</a></h5>
<p>It’s possible to render the contents of the parent block by calling <cite>super</cite>.
This gives back the results of the parent block:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">sidebar</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Table Of Contents<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
    ...
    <span class="cp">{{</span> <span class="nb">super</span><span class="o">()</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="named-block-end-tags">
<h5>Named Block End-Tags<a class="headerlink" href="#named-block-end-tags" title="Permalink to this headline">¶</a></h5>
<p>Jinja2 allows you to put the name of the block after the end tag for better
readability:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">sidebar</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">block</span> <span class="nv">inner_sidebar</span> <span class="cp">%}</span>
        ...
    <span class="cp">{%</span> <span class="k">endblock</span> <span class="nv">inner_sidebar</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="nv">sidebar</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>However the name after the <cite>endblock</cite> word must match the block name.</p>
</div>
<div class="section" id="block-nesting-and-scope">
<h5>Block Nesting and Scope<a class="headerlink" href="#block-nesting-and-scope" title="Permalink to this headline">¶</a></h5>
<p>Blocks can be nested for more complex layouts.  However per default blocks
may not access variables from outer scopes:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">seq</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">loop_item</span> <span class="cp">%}{{</span> <span class="nv">item</span> <span class="cp">}}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>This example would output empty <code class="docutils literal notranslate"><span class="pre">&lt;li&gt;</span></code> items because <cite>item</cite> is unavailable
inside the block.  The reason for this is that if the block is replaced by
a child template a variable would appear that was not defined in the block or
passed to the context.</p>
<p>Starting with Jinja 2.2 you can explicitly specify that variables are
available in a block by setting the block to “scoped” by adding the <cite>scoped</cite>
modifier to a block declaration:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">seq</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">loop_item</span> <span class="k">scoped</span> <span class="cp">%}{{</span> <span class="nv">item</span> <span class="cp">}}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>When overriding a block the <cite>scoped</cite> modifier does not have to be provided.</p>
</div>
<div class="section" id="template-objects">
<h5>Template Objects<a class="headerlink" href="#template-objects" title="Permalink to this headline">¶</a></h5>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.4.</span></p>
</div>
<p>If a template object was passed to the template context you can
extend from that object as well.  Assuming the calling code passes
a layout template as <cite>layout_template</cite> to the environment, this
code works:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="nv">layout_template</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Previously the <cite>layout_template</cite> variable had to be a string with
the layout template’s filename for this to work.</p>
</div>
</div>
<div class="section" id="html-escaping">
<h4>HTML Escaping<a class="headerlink" href="#html-escaping" title="Permalink to this headline">¶</a></h4>
<p>When generating HTML from templates, there’s always a risk that a variable will
include characters that affect the resulting HTML.  There are two approaches:
manually escaping each variable or automatically escaping everything by default.</p>
<p>Jinja supports both, but what is used depends on the application configuration.
The default configuaration is no automatic escaping for various reasons:</p>
<ul class="simple">
<li>escaping everything except of safe values will also mean that Jinja is
escaping variables known to not include HTML such as numbers which is
a huge performance hit.</li>
<li>The information about the safety of a variable is very fragile.  It could
happen that by coercing safe and unsafe values the return value is double
escaped HTML.</li>
</ul>
<div class="section" id="working-with-manual-escaping">
<h5>Working with Manual Escaping<a class="headerlink" href="#working-with-manual-escaping" title="Permalink to this headline">¶</a></h5>
<p>If manual escaping is enabled it’s <strong>your</strong> responsibility to escape
variables if needed.  What to escape?  If you have a variable that <em>may</em>
include any of the following chars (<code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;</span></code>) you
<strong>have to</strong> escape it unless the variable contains well-formed and trusted
HTML.  Escaping works by piping the variable through the <code class="docutils literal notranslate"><span class="pre">|e</span></code> filter:
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">user.username|e</span> <span class="pre">}}</span></code>.</p>
</div>
<div class="section" id="working-with-automatic-escaping">
<h5>Working with Automatic Escaping<a class="headerlink" href="#working-with-automatic-escaping" title="Permalink to this headline">¶</a></h5>
<p>When automatic escaping is enabled everything is escaped by default except
for values explicitly marked as safe.  Those can either be marked by the
application or in the template by using the <cite>|safe</cite> filter.  The main
problem with this approach is that Python itself doesn’t have the concept
of tainted values so the information if a value is safe or unsafe can get
lost.  If the information is lost escaping will take place which means that
you could end up with double escaped contents.</p>
<p>Double escaping is easy to avoid however, just rely on the tools Jinja2
provides and don’t use builtin Python constructs such as the string modulo
operator.</p>
<p>Functions returning template data (macros, <cite>super</cite>, <cite>self.BLOCKNAME</cite>) return
safe markup always.</p>
<p>String literals in templates with automatic escaping are considered unsafe
too.  The reason for this is that the safe string is an extension to Python
and not every library will work properly with it.</p>
</div>
</div>
<div class="section" id="list-of-control-structures">
<h4>List of Control Structures<a class="headerlink" href="#list-of-control-structures" title="Permalink to this headline">¶</a></h4>
<p>A control structure refers to all those things that control the flow of a
program - conditionals (i.e. if/elif/else), for-loops, as well as things like
macros and blocks.  Control structures appear inside <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">...</span> <span class="pre">%}</span></code> blocks
in the default syntax.</p>
<div class="section" id="for">
<h5>For<a class="headerlink" href="#for" title="Permalink to this headline">¶</a></h5>
<p>Loop over each item in a sequence.  For example, to display a list of users
provided in a variable called <cite>users</cite>:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Members<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">user.username</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Inside of a for loop block you can access some special variables:</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><cite>loop.index</cite></td>
<td>The current iteration of the loop. (1 indexed)</td>
</tr>
<tr class="row-odd"><td><cite>loop.index0</cite></td>
<td>The current iteration of the loop. (0 indexed)</td>
</tr>
<tr class="row-even"><td><cite>loop.revindex</cite></td>
<td>The number of iterations from the end of the loop
(1 indexed)</td>
</tr>
<tr class="row-odd"><td><cite>loop.revindex0</cite></td>
<td>The number of iterations from the end of the loop
(0 indexed)</td>
</tr>
<tr class="row-even"><td><cite>loop.first</cite></td>
<td>True if first iteration.</td>
</tr>
<tr class="row-odd"><td><cite>loop.last</cite></td>
<td>True if last iteration.</td>
</tr>
<tr class="row-even"><td><cite>loop.length</cite></td>
<td>The number of items in the sequence.</td>
</tr>
<tr class="row-odd"><td><cite>loop.cycle</cite></td>
<td>A helper function to cycle between a list of
sequences.  See the explanation below.</td>
</tr>
</tbody>
</table>
<p>Within a for-loop, it’s possible to cycle among a list of strings/variables
each time through the loop by using the special <cite>loop.cycle</cite> helper:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">row</span> <span class="k">in</span> <span class="nv">rows</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.cycle</span><span class="o">(</span><span class="s1">&#39;odd&#39;</span><span class="o">,</span> <span class="s1">&#39;even&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">row</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>With Jinja 2.1 an extra <cite>cycle</cite> helper exists that allows loop-unbound
cycling.  For more information have a look at the <a class="reference internal" href="#builtin-globals"><span class="std std-ref">List of Global Functions</span></a>.</p>
<p id="loop-filtering">Unlike in Python it’s not possible to <cite>break</cite> or <cite>continue</cite> in a loop.  You
can however filter the sequence during iteration which allows you to skip
items.  The following example skips all the users which are hidden:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="k">if</span> <span class="k">not</span> <span class="nv">user.hidden</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">user.username</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The advantage is that the special <cite>loop</cite> variable will count correctly thus
not counting the users not iterated over.</p>
<p>If no iteration took place because the sequence was empty or the filtering
removed all the items from the sequence you can render a replacement block
by using <cite>else</cite>:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">user.username</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">em</span><span class="p">&gt;</span>no users found<span class="p">&lt;/</span><span class="nt">em</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>It is also possible to use loops recursively.  This is useful if you are
dealing with recursive data such as sitemaps.  To use loops recursively you
basically have to add the <cite>recursive</cite> modifier to the loop definition and
call the <cite>loop</cite> variable with the new iterable where you want to recurse.</p>
<p>The following example implements a sitemap with recursive loops:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sitemap&quot;</span><span class="p">&gt;</span>
<span class="cp">{%</span>- <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">sitemap</span> <span class="k">recursive</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">item.href</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">item.title</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="cp">{%</span>- <span class="k">if</span> <span class="nv">item.children</span> -<span class="cp">%}</span>
        <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;submenu&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nb">loop</span><span class="o">(</span><span class="nv">item.children</span><span class="o">)</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="cp">{%</span>- <span class="k">endif</span> <span class="cp">%}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="if">
<h5>If<a class="headerlink" href="#if" title="Permalink to this headline">¶</a></h5>
<p>The <cite>if</cite> statement in Jinja is comparable with the if statements of Python.
In the simplest form you can use it to test if a variable is defined, not
empty or not false:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">users</span> <span class="cp">%}</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">user.username</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>For multiple branches <cite>elif</cite> and <cite>else</cite> can be used like in Python.  You can
use more complex <a class="reference internal" href="#expressions"><span class="std std-ref">Expressions</span></a> there too:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">kenny.sick</span> <span class="cp">%}</span>
    Kenny is sick.
<span class="cp">{%</span> <span class="k">elif</span> <span class="nv">kenny.dead</span> <span class="cp">%}</span>
    You killed Kenny!  You bastard!!!
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    Kenny looks okay --- so far
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>If can also be used as <a class="reference internal" href="#if-expression"><span class="std std-ref">inline expression</span></a> and for
<a class="reference internal" href="#loop-filtering"><span class="std std-ref">loop filtering</span></a>.</p>
</div>
<div class="section" id="macros">
<h5>Macros<a class="headerlink" href="#macros" title="Permalink to this headline">¶</a></h5>
<p>Macros are comparable with functions in regular programming languages.  They
are useful to put often used idioms into reusable functions to not repeat
yourself.</p>
<p>Here a small example of a macro that renders a form element:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">macro</span> <span class="nv">input</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="nv">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">,</span> <span class="nv">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="o">,</span> <span class="nv">size</span><span class="o">=</span><span class="m">20</span><span class="o">)</span> -<span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">type</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span>
        <span class="nv">value</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">size</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">size</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>
<span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The macro can then be called like a function in the namespace:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">input</span><span class="o">(</span><span class="s1">&#39;username&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">input</span><span class="o">(</span><span class="s1">&#39;password&#39;</span><span class="o">,</span> <span class="nv">type</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>If the macro was defined in a different template you have to
<a class="reference internal" href="#import"><span class="std std-ref">import</span></a> it first.</p>
<p>Inside macros you have access to three special variables:</p>
<dl class="docutils">
<dt><cite>varargs</cite></dt>
<dd>If more positional arguments are passed to the macro than accepted by the
macro they end up in the special <cite>varargs</cite> variable as list of values.</dd>
<dt><cite>kwargs</cite></dt>
<dd>Like <cite>varargs</cite> but for keyword arguments.  All unconsumed keyword
arguments are stored in this special variable.</dd>
<dt><cite>caller</cite></dt>
<dd>If the macro was called from a <a class="reference internal" href="#call"><span class="std std-ref">call</span></a> tag the caller is stored
in this variable as macro which can be called.</dd>
</dl>
<p>Macros also expose some of their internal details.  The following attributes
are available on a macro object:</p>
<dl class="docutils">
<dt><cite>name</cite></dt>
<dd>The name of the macro.  <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">input.name</span> <span class="pre">}}</span></code> will print <code class="docutils literal notranslate"><span class="pre">input</span></code>.</dd>
<dt><cite>arguments</cite></dt>
<dd>A tuple of the names of arguments the macro accepts.</dd>
<dt><cite>defaults</cite></dt>
<dd>A tuple of default values.</dd>
<dt><cite>catch_kwargs</cite></dt>
<dd>This is <cite>true</cite> if the macro accepts extra keyword arguments (ie: accesses
the special <cite>kwargs</cite> variable).</dd>
<dt><cite>catch_varargs</cite></dt>
<dd>This is <cite>true</cite> if the macro accepts extra positional arguments (ie:
accesses the special <cite>varargs</cite> variable).</dd>
<dt><cite>caller</cite></dt>
<dd>This is <cite>true</cite> if the macro accesses the special <cite>caller</cite> variable and may
be called from a <a class="reference internal" href="#call"><span class="std std-ref">call</span></a> tag.</dd>
</dl>
<p>If a macro name starts with an underscore it’s not exported and can’t
be imported.</p>
</div>
<div class="section" id="call">
<span id="id6"></span><h5>Call<a class="headerlink" href="#call" title="Permalink to this headline">¶</a></h5>
<p>In some cases it can be useful to pass a macro to another macro.  For this
purpose you can use the special <cite>call</cite> block.  The following example shows
a macro that takes advantage of the call functionality and how it can be
used:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">macro</span> <span class="nv">render_dialog</span><span class="o">(</span><span class="nv">title</span><span class="o">,</span> <span class="nv">class</span><span class="o">=</span><span class="s1">&#39;dialog&#39;</span><span class="o">)</span> -<span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">class</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">title</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;contents&quot;</span><span class="p">&gt;</span>
            <span class="cp">{{</span> <span class="nv">caller</span><span class="o">()</span> <span class="cp">}}</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">call</span> <span class="nv">render_dialog</span><span class="o">(</span><span class="s1">&#39;Hello World&#39;</span><span class="o">)</span> <span class="cp">%}</span>
    This is a simple dialog rendered by using a macro and
    a call block.
<span class="cp">{%</span> <span class="k">endcall</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>It’s also possible to pass arguments back to the call block.  This makes it
useful as replacement for loops.  Generally speaking a call block works
exactly like an macro, just that it doesn’t have a name.</p>
<p>Here an example of how a call block can be used with arguments:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">macro</span> <span class="nv">dump_users</span><span class="o">(</span><span class="nv">users</span><span class="o">)</span> -<span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="cp">{%</span>- <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">user.username</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">caller</span><span class="o">(</span><span class="nv">user</span><span class="o">)</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">call</span><span class="o">(</span><span class="nv">user</span><span class="o">)</span> <span class="nv">dump_users</span><span class="o">(</span><span class="nv">list_of_user</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>Realname<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">user.realname</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>Description<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">user.description</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endcall</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h5>Filters<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h5>
<p>Filter sections allow you to apply regular Jinja2 filters on a block of
template data.  Just wrap the code in the special <cite>filter</cite> section:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">filter</span> <span class="nf">upper</span> <span class="cp">%}</span>
    This text becomes uppercase
<span class="cp">{%</span> <span class="k">endfilter</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="assignments">
<h5>Assignments<a class="headerlink" href="#assignments" title="Permalink to this headline">¶</a></h5>
<p>Inside code blocks you can also assign values to variables.  Assignments at
top level (outside of blocks, macros or loops) are exported from the template
like top level macros and can be imported by other templates.</p>
<p>Assignments use the <cite>set</cite> tag and can have multiple targets:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">navigation</span> <span class="o">=</span> <span class="o">[(</span><span class="s1">&#39;index.html&#39;</span><span class="o">,</span> <span class="s1">&#39;Index&#39;</span><span class="o">),</span> <span class="o">(</span><span class="s1">&#39;about.html&#39;</span><span class="o">,</span> <span class="s1">&#39;About&#39;</span><span class="o">)]</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">key</span><span class="o">,</span> <span class="nv">value</span> <span class="o">=</span> <span class="nv">call_something</span><span class="o">()</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="extends">
<h5>Extends<a class="headerlink" href="#extends" title="Permalink to this headline">¶</a></h5>
<p>The <cite>extends</cite> tag can be used to extend a template from another one.  You
can have multiple of them in a file but only one of them may be executed
at the time.  See the section about <a class="reference internal" href="#template-inheritance"><span class="std std-ref">Template Inheritance</span></a> above.</p>
</div>
<div class="section" id="block">
<h5>Block<a class="headerlink" href="#block" title="Permalink to this headline">¶</a></h5>
<p>Blocks are used for inheritance and act as placeholders and replacements
at the same time.  They are documented in detail as part of the section
about <a class="reference internal" href="#template-inheritance"><span class="std std-ref">Template Inheritance</span></a>.</p>
</div>
<div class="section" id="include">
<h5>Include<a class="headerlink" href="#include" title="Permalink to this headline">¶</a></h5>
<p>The <cite>include</cite> statement is useful to include a template and return the
rendered contents of that file into the current namespace:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">include</span> <span class="s1">&#39;header.html&#39;</span> <span class="cp">%}</span>
    Body
<span class="cp">{%</span> <span class="k">include</span> <span class="s1">&#39;footer.html&#39;</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Included templates have access to the variables of the active context by
default.  For more details about context behavior of imports and includes
see <a class="reference internal" href="#import-visibility"><span class="std std-ref">Import Context Behavior</span></a>.</p>
<p>From Jinja 2.2 onwards you can mark an include with <code class="docutils literal notranslate"><span class="pre">ignore</span> <span class="pre">missing</span></code> in
which case Jinja will ignore the statement if the template to be ignored
does not exist.  When combined with <code class="docutils literal notranslate"><span class="pre">with</span></code> or <code class="docutils literal notranslate"><span class="pre">without</span> <span class="pre">context</span></code> it has
to be placed <em>before</em> the context visibility statement.  Here some valid
examples:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;sidebar.html&quot;</span> <span class="k">ignore missing</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;sidebar.html&quot;</span> <span class="k">ignore missing</span> <span class="k">with context</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;sidebar.html&quot;</span> <span class="k">ignore missing</span> <span class="k">without context</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.2.</span></p>
</div>
<p>You can also provide a list of templates that are checked for existence
before inclusion.  The first template that exists will be included.  If
<cite>ignore missing</cite> is given, it will fall back to rendering nothing if
none of the templates exist, otherwise it will raise an exception.</p>
<p>Example:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">include</span> <span class="o">[</span><span class="s1">&#39;page_detailed.html&#39;</span><span class="o">,</span> <span class="s1">&#39;page.html&#39;</span><span class="o">]</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">include</span> <span class="o">[</span><span class="s1">&#39;special_sidebar.html&#39;</span><span class="o">,</span> <span class="s1">&#39;sidebar.html&#39;</span><span class="o">]</span> <span class="k">ignore missing</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.4: </span>If a template object was passed to the template context you can
include that object using <cite>include</cite>.</p>
</div>
</div>
<div class="section" id="import">
<span id="id8"></span><h5>Import<a class="headerlink" href="#import" title="Permalink to this headline">¶</a></h5>
<p>Jinja2 supports putting often used code into macros.  These macros can go into
different templates and get imported from there.  This works similar to the
import statements in Python.  It’s important to know that imports are cached
and imported templates don’t have access to the current template variables,
just the globals by defualt.  For more details about context behavior of
imports and includes see <a class="reference internal" href="#import-visibility"><span class="std std-ref">Import Context Behavior</span></a>.</p>
<p>There are two ways to import templates.  You can import the complete template
into a variable or request specific macros / exported variables from it.</p>
<p>Imagine we have a helper module that renders forms (called <cite>forms.html</cite>):</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">macro</span> <span class="nv">input</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="nv">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">,</span> <span class="nv">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="o">)</span> -<span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">type</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>
<span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>

<span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">textarea</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="nv">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">,</span> <span class="nv">rows</span><span class="o">=</span><span class="m">10</span><span class="o">,</span> <span class="nv">cols</span><span class="o">=</span><span class="m">40</span><span class="o">)</span> -<span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">textarea</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">rows</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">rows</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">cols</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">cols</span>
        <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>
<span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The easiest and most flexible is importing the whole module into a variable.
That way you can access the attributes:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">import</span> <span class="s1">&#39;forms.html&#39;</span> <span class="k">as</span> <span class="nv">forms</span> <span class="cp">%}</span>
<span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Username<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">forms.input</span><span class="o">(</span><span class="s1">&#39;username&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Password<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">forms.input</span><span class="o">(</span><span class="s1">&#39;password&#39;</span><span class="o">,</span> <span class="nv">type</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">forms.textarea</span><span class="o">(</span><span class="s1">&#39;comment&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Alternatively you can import names from the template into the current
namespace:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">from</span> <span class="s1">&#39;forms.html&#39;</span> <span class="k">import</span> <span class="nv">input</span> <span class="k">as</span> <span class="nv">input_field</span><span class="o">,</span> <span class="nv">textarea</span> <span class="cp">%}</span>
<span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Username<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">input_field</span><span class="o">(</span><span class="s1">&#39;username&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Password<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">input_field</span><span class="o">(</span><span class="s1">&#39;password&#39;</span><span class="o">,</span> <span class="nv">type</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">textarea</span><span class="o">(</span><span class="s1">&#39;comment&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Macros and variables starting with one ore more underscores are private and
cannot be imported.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.4: </span>If a template object was passed to the template context you can
import from that object.</p>
</div>
</div>
</div>
<div class="section" id="import-context-behavior">
<span id="import-visibility"></span><h4>Import Context Behavior<a class="headerlink" href="#import-context-behavior" title="Permalink to this headline">¶</a></h4>
<p>Per default included templates are passed the current context and imported
templates not.  The reason for this is that imports unlike includes are
cached as imports are often used just as a module that holds macros.</p>
<p>This however can be changed of course explicitly.  By adding <cite>with context</cite>
or <cite>without context</cite> to the import/include directive the current context
can be passed to the template and caching is disabled automatically.</p>
<p>Here two examples:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">from</span> <span class="s1">&#39;forms.html&#39;</span> <span class="k">import</span> <span class="nv">input</span> <span class="k">with context</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">include</span> <span class="s1">&#39;header.html&#39;</span> <span class="k">without context</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p>In Jinja 2.0 the context that was passed to the included template
did not include variables defined in the template.  As a matter of
fact this did not work:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">box</span> <span class="k">in</span> <span class="nv">boxes</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;render_box.html&quot;</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p class="last">The included template <code class="docutils literal notranslate"><span class="pre">render_box.html</span></code> is <em>not</em> able to access
<cite>box</cite> in Jinja 2.0. As of Jinja 2.1 <code class="docutils literal notranslate"><span class="pre">render_box.html</span></code> <em>is</em> able
to do so.</p>
</div>
</div>
<div class="section" id="expressions">
<span id="id9"></span><h4>Expressions<a class="headerlink" href="#expressions" title="Permalink to this headline">¶</a></h4>
<p>Jinja allows basic expressions everywhere.  These work very similar to regular
Python and even if you’re not working with Python you should feel comfortable
with it.</p>
<div class="section" id="literals">
<h5>Literals<a class="headerlink" href="#literals" title="Permalink to this headline">¶</a></h5>
<p>The simplest form of expressions are literals.  Literals are representations
for Python objects such as strings and numbers.  The following literals exist:</p>
<dl class="docutils">
<dt>“Hello World”:</dt>
<dd>Everything between two double or single quotes is a string.  They are
useful whenever you need a string in the template (for example as
arguments to function calls, filters or just to extend or include a
template).</dd>
<dt>42 / 42.23:</dt>
<dd>Integers and floating point numbers are created by just writing the
number down.  If a dot is present the number is a float, otherwise an
integer.  Keep in mind that for Python <code class="docutils literal notranslate"><span class="pre">42</span></code> and <code class="docutils literal notranslate"><span class="pre">42.0</span></code> is something
different.</dd>
<dt>[‘list’, ‘of’, ‘objects’]:</dt>
<dd><p class="first">Everything between two brackets is a list.  Lists are useful to store
sequential data in or to iterate over them.  For example you can easily
create a list of links using lists and tuples with a for loop:</p>
<div class="last highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">href</span><span class="o">,</span> <span class="nv">caption</span> <span class="k">in</span> <span class="o">[(</span><span class="s1">&#39;index.html&#39;</span><span class="o">,</span> <span class="s1">&#39;Index&#39;</span><span class="o">),</span> <span class="o">(</span><span class="s1">&#39;about.html&#39;</span><span class="o">,</span> <span class="s1">&#39;About&#39;</span><span class="o">),</span>
                         <span class="o">(</span><span class="s1">&#39;downloads.html&#39;</span><span class="o">,</span> <span class="s1">&#39;Downloads&#39;</span><span class="o">)]</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">href</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">caption</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
</dd>
<dt>(‘tuple’, ‘of’, ‘values’):</dt>
<dd>Tuples are like lists, just that you can’t modify them.  If the tuple
only has one item you have to end it with a comma.  Tuples are usually
used to represent items of two or more elements.  See the example above
for more details.</dd>
<dt>{‘dict’: ‘of’, ‘key’: ‘and’, ‘value’: ‘pairs’}:</dt>
<dd>A dict in Python is a structure that combines keys and values.  Keys must
be unique and always have exactly one value.  Dicts are rarely used in
templates, they are useful in some rare cases such as the <a class="reference internal" href="#xmlattr" title="xmlattr"><code class="xref py py-func docutils literal notranslate"><span class="pre">xmlattr()</span></code></a>
filter.</dd>
<dt>true / false:</dt>
<dd>true is always true and false is always false.</dd>
</dl>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">The special constants <cite>true</cite>, <cite>false</cite> and <cite>none</cite> are indeed lowercase.
Because that caused confusion in the past, when writing <cite>True</cite> expands
to an undefined variable that is considered false, all three of them can
be written in title case too (<cite>True</cite>, <cite>False</cite>, and <cite>None</cite>).  However for
consistency (all Jinja identifiers are lowercase) you should use the
lowercase versions.</p>
</div>
</div>
<div class="section" id="math">
<h5>Math<a class="headerlink" href="#math" title="Permalink to this headline">¶</a></h5>
<p>Jinja allows you to calculate with values.  This is rarely useful in templates
but exists for completeness’ sake.  The following operators are supported:</p>
<dl class="docutils">
<dt>+</dt>
<dd>Adds two objects together.  Usually the objects are numbers but if both are
strings or lists you can concatenate them this way.  This however is not
the preferred way to concatenate strings!  For string concatenation have
a look at the <code class="docutils literal notranslate"><span class="pre">~</span></code> operator.  <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">1</span> <span class="pre">}}</span></code> is <code class="docutils literal notranslate"><span class="pre">2</span></code>.</dd>
<dt>-</dt>
<dd>Substract the second number from the first one.  <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">3</span> <span class="pre">-</span> <span class="pre">2</span> <span class="pre">}}</span></code> is <code class="docutils literal notranslate"><span class="pre">1</span></code>.</dd>
</dl>
<dl class="docutils">
<dt>/</dt>
<dd>Divide two numbers.  The return value will be a floating point number.
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">1</span> <span class="pre">/</span> <span class="pre">2</span> <span class="pre">}}</span></code> is <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">0.5</span> <span class="pre">}}</span></code>.</dd>
</dl>
<dl class="docutils">
<dt>//</dt>
<dd>Divide two numbers and return the truncated integer result.
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">20</span> <span class="pre">//</span> <span class="pre">7</span> <span class="pre">}}</span></code> is <code class="docutils literal notranslate"><span class="pre">2</span></code>.</dd>
</dl>
<dl class="docutils">
<dt>%</dt>
<dd>Calculate the remainder of an integer division.  <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">11</span> <span class="pre">%</span> <span class="pre">7</span> <span class="pre">}}</span></code> is <code class="docutils literal notranslate"><span class="pre">4</span></code>.</dd>
<dt>*</dt>
<dd>Multiply the left operand with the right one.  <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">}}</span></code> would
return <code class="docutils literal notranslate"><span class="pre">4</span></code>.  This can also be used to repeat a string multiple times.
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">'='</span> <span class="pre">*</span> <span class="pre">80</span> <span class="pre">}}</span></code> would print a bar of 80 equal signs.</dd>
<dt>**</dt>
<dd>Raise the left operand to the power of the right operand.  <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">2**3</span> <span class="pre">}}</span></code>
would return <code class="docutils literal notranslate"><span class="pre">8</span></code>.</dd>
</dl>
</div>
<div class="section" id="comparisons">
<h5>Comparisons<a class="headerlink" href="#comparisons" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt>==</dt>
<dd>Compares two objects for equality.</dd>
<dt>!=</dt>
<dd>Compares two objects for inequality.</dd>
</dl>
<dl class="docutils">
<dt>&gt;</dt>
<dd><cite>true</cite> if the left hand side is greater than the right hand side.</dd>
<dt>&gt;=</dt>
<dd><cite>true</cite> if the left hand side is greater or equal to the right hand side.</dd>
</dl>
<dl class="docutils">
<dt>&lt;</dt>
<dd><cite>true</cite> if the left hand side is lower than the right hand side.</dd>
<dt>&lt;=</dt>
<dd><cite>true</cite> if the left hand side is lower or equal to the right hand side.</dd>
</dl>
</div>
<div class="section" id="logic">
<h5>Logic<a class="headerlink" href="#logic" title="Permalink to this headline">¶</a></h5>
<p>For <cite>if</cite> statements, <cite>for</cite> filtering or <cite>if</cite> expressions it can be useful to
combine multiple expressions:</p>
<dl class="docutils">
<dt>and</dt>
<dd>Return true if the left and the right operand is true.</dd>
<dt>or</dt>
<dd>Return true if the left or the right operand is true.</dd>
<dt>not</dt>
<dd>negate a statement (see below).</dd>
<dt>(expr)</dt>
<dd>group an expression.</dd>
</dl>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">is</span></code> and <code class="docutils literal notranslate"><span class="pre">in</span></code> operators support negation using an infix notation
too: <code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">bar</span></code> and <code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">not</span> <span class="pre">in</span> <span class="pre">bar</span></code> instead of <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">foo</span> <span class="pre">is</span> <span class="pre">bar</span></code>
and <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">foo</span> <span class="pre">in</span> <span class="pre">bar</span></code>.  All other expressions require a prefix notation:
<code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">(foo</span> <span class="pre">and</span> <span class="pre">bar).</span></code></p>
</div>
</div>
<div class="section" id="other-operators">
<h5>Other Operators<a class="headerlink" href="#other-operators" title="Permalink to this headline">¶</a></h5>
<p>The following operators are very useful but don’t fit into any of the other
two categories:</p>
<dl class="docutils">
<dt>in</dt>
<dd>Perform sequence / mapping containment test.  Returns true if the left
operand is contained in the right.  <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">1</span> <span class="pre">in</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span> <span class="pre">}}</span></code> would for
example return true.</dd>
<dt>is</dt>
<dd>Performs a <a class="reference internal" href="#tests"><span class="std std-ref">test</span></a>.</dd>
<dt>|</dt>
<dd>Applies a <a class="reference internal" href="#filters"><span class="std std-ref">filter</span></a>.</dd>
</dl>
<dl class="docutils">
<dt>~</dt>
<dd>Converts all operands into strings and concatenates them.
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">&quot;Hello</span> <span class="pre">&quot;</span> <span class="pre">~</span> <span class="pre">name</span> <span class="pre">~</span> <span class="pre">&quot;!&quot;</span> <span class="pre">}}</span></code> would return (assuming <cite>name</cite> is
<code class="docutils literal notranslate"><span class="pre">'John'</span></code>) <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">John!</span></code>.</dd>
<dt>()</dt>
<dd>Call a callable: <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">post.render()</span> <span class="pre">}}</span></code>.  Inside of the parentheses you
can use positional arguments and keyword arguments like in python:
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">post.render(user,</span> <span class="pre">full=true)</span> <span class="pre">}}</span></code>.</dd>
<dt>. / []</dt>
<dd>Get an attribute of an object.  (See <a class="reference internal" href="#variables"><span class="std std-ref">Variables</span></a>)</dd>
</dl>
</div>
<div class="section" id="if-expression">
<span id="id10"></span><h5>If Expression<a class="headerlink" href="#if-expression" title="Permalink to this headline">¶</a></h5>
<p>It is also possible to use inline <cite>if</cite> expressions.  These are useful in some
situations.  For example you can use this to extend from one template if a
variable is defined, otherwise from the default layout template:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="nv">layout_template</span> <span class="k">if</span> <span class="nv">layout_template</span> <span class="k">is</span> <span class="nf">defined</span> <span class="k">else</span> <span class="s1">&#39;master.html&#39;</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The general syntax is <code class="docutils literal notranslate"><span class="pre">&lt;do</span> <span class="pre">something&gt;</span> <span class="pre">if</span> <span class="pre">&lt;something</span> <span class="pre">is</span> <span class="pre">true&gt;</span> <span class="pre">else</span> <span class="pre">&lt;do</span>
<span class="pre">something</span> <span class="pre">else&gt;</span></code>.</p>
<p>The <cite>else</cite> part is optional.  If not provided the else block implicitly
evaluates into an undefined object:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="s1">&#39;[%s]&#39;</span> <span class="o">%</span> <span class="nv">page.title</span> <span class="k">if</span> <span class="nv">page.title</span> <span class="cp">}}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="list-of-builtin-filters">
<span id="builtin-filters"></span><h4>List of Builtin Filters<a class="headerlink" href="#list-of-builtin-filters" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="abs">
<code class="descname">abs</code><span class="sig-paren">(</span><em>number</em><span class="sig-paren">)</span><a class="headerlink" href="#abs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the absolute value of the argument.</p>
</dd></dl>

<dl class="function">
<dt id="attr">
<code class="descname">attr</code><span class="sig-paren">(</span><em>obj</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an attribute of an object.  <code class="docutils literal notranslate"><span class="pre">foo|attr(&quot;bar&quot;)</span></code> works like
<code class="docutils literal notranslate"><span class="pre">foo[&quot;bar&quot;]</span></code> just that always an attribute is returned and items are not
looked up.</p>
<p>See <a class="reference internal" href="#notes-on-subscriptions"><span class="std std-ref">Notes on subscriptions</span></a> for more details.</p>
</dd></dl>

<dl class="function">
<dt id="batch">
<code class="descname">batch</code><span class="sig-paren">(</span><em>value</em>, <em>linecount</em>, <em>fill_with=None</em><span class="sig-paren">)</span><a class="headerlink" href="#batch" title="Permalink to this definition">¶</a></dt>
<dd><p>A filter that batches items. It works pretty much like <cite>slice</cite>
just the other way round. It returns a list of lists with the
given number of items. If you provide a second parameter this
is used to fill missing items. See this example:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="cp">{%</span>- <span class="k">for</span> <span class="nv">row</span> <span class="k">in</span> <span class="nv">items</span><span class="o">|</span><span class="nf">batch</span><span class="o">(</span><span class="m">3</span><span class="o">,</span> <span class="s1">&#39;&amp;nbsp;&#39;</span><span class="o">)</span> <span class="cp">%}</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="cp">{%</span>- <span class="k">for</span> <span class="nv">column</span> <span class="k">in</span> <span class="nv">row</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">column</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span>
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="capitalize">
<code class="descname">capitalize</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#capitalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Capitalize a value. The first character will be uppercase, all others
lowercase.</p>
</dd></dl>

<dl class="function">
<dt id="center">
<code class="descname">center</code><span class="sig-paren">(</span><em>value</em>, <em>width=80</em><span class="sig-paren">)</span><a class="headerlink" href="#center" title="Permalink to this definition">¶</a></dt>
<dd><p>Centers the value in a field of a given width.</p>
</dd></dl>

<dl class="function">
<dt id="default">
<code class="descname">default</code><span class="sig-paren">(</span><em>value</em>, <em>default_value=u''</em>, <em>boolean=False</em><span class="sig-paren">)</span><a class="headerlink" href="#default" title="Permalink to this definition">¶</a></dt>
<dd><p>If the value is undefined it will return the passed default value,
otherwise the value of the variable:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">my_variable</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;my_variable is not defined&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>This will output the value of <code class="docutils literal notranslate"><span class="pre">my_variable</span></code> if the variable was
defined, otherwise <code class="docutils literal notranslate"><span class="pre">'my_variable</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">defined'</span></code>. If you want
to use default with variables that evaluate to false you have to
set the second parameter to <cite>true</cite>:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="s1">&#39;&#39;</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;the string was empty&#39;</span><span class="o">,</span> <span class="kp">true</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Aliases:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">d</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dictsort">
<code class="descname">dictsort</code><span class="sig-paren">(</span><em>value</em>, <em>case_sensitive=False</em>, <em>by='key'</em><span class="sig-paren">)</span><a class="headerlink" href="#dictsort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort a dict and yield (key, value) pairs. Because python dicts are
unsorted you may want to use this function to order them by either
key or value:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">mydict</span><span class="o">|</span><span class="nf">dictsort</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    sort the dict by key, case insensitive</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">mydict</span><span class="o">|</span><span class="nf">dicsort</span><span class="o">(</span><span class="kp">true</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    sort the dict by key, case sensitive</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">mydict</span><span class="o">|</span><span class="nf">dictsort</span><span class="o">(</span><span class="kp">false</span><span class="o">,</span> <span class="s1">&#39;value&#39;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    sort the dict by key, case insensitive, sorted</span>
<span class="x">    normally and ordered by value.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="escape">
<code class="descname">escape</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#escape" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the characters &amp;, &lt;, &gt;, ‘, and ” in string s to HTML-safe
sequences.  Use this if you need to display text that might contain
such characters in HTML.  Marks return value as markup string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Aliases:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">e</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="filesizeformat">
<code class="descname">filesizeformat</code><span class="sig-paren">(</span><em>value</em>, <em>binary=False</em><span class="sig-paren">)</span><a class="headerlink" href="#filesizeformat" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the value like a ‘human-readable’ file size (i.e. 13 kB,
4.1 MB, 102 Bytes, etc).  Per default decimal prefixes are used (Mega,
Giga, etc.), if the second parameter is set to <cite>True</cite> the binary
prefixes are used (Mebi, Gibi).</p>
</dd></dl>

<dl class="function">
<dt id="first">
<code class="descname">first</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="headerlink" href="#first" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first item of a sequence.</p>
</dd></dl>

<dl class="function">
<dt id="float">
<code class="descname">float</code><span class="sig-paren">(</span><em>value</em>, <em>default=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#float" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the value into a floating point number. If the
conversion doesn’t work it will return <code class="docutils literal notranslate"><span class="pre">0.0</span></code>. You can
override this default using the first parameter.</p>
</dd></dl>

<dl class="function">
<dt id="forceescape">
<code class="descname">forceescape</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#forceescape" title="Permalink to this definition">¶</a></dt>
<dd><p>Enforce HTML escaping.  This will probably double escape variables.</p>
</dd></dl>

<dl class="function">
<dt id="format">
<code class="descname">format</code><span class="sig-paren">(</span><em>value</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#format" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply python string formatting on an object:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="s2">&quot;%s - %s&quot;</span><span class="o">|</span><span class="nf">format</span><span class="o">(</span><span class="s2">&quot;Hello?&quot;</span><span class="o">,</span> <span class="s2">&quot;Foo!&quot;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    -&gt; Hello? - Foo!</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="groupby">
<code class="descname">groupby</code><span class="sig-paren">(</span><em>value</em>, <em>attribute</em><span class="sig-paren">)</span><a class="headerlink" href="#groupby" title="Permalink to this definition">¶</a></dt>
<dd><p>Group a sequence of objects by a common attribute.</p>
<p>If you for example have a list of dicts or objects that represent persons
with <cite>gender</cite>, <cite>first_name</cite> and <cite>last_name</cite> attributes and you want to
group all users by genders you can do something like the following
snippet:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">group</span> <span class="k">in</span> <span class="nv">persons</span><span class="o">|</span><span class="nf">groupby</span><span class="o">(</span><span class="s1">&#39;gender&#39;</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">group.grouper</span> <span class="cp">}}</span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">person</span> <span class="k">in</span> <span class="nv">group.list</span> <span class="cp">%}</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">person.first_name</span> <span class="cp">}}</span> <span class="cp">{{</span> <span class="nv">person.last_name</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Additionally it’s possible to use tuple unpacking for the grouper and
list:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">grouper</span><span class="o">,</span> <span class="nv">list</span> <span class="k">in</span> <span class="nv">persons</span><span class="o">|</span><span class="nf">groupby</span><span class="o">(</span><span class="s1">&#39;gender&#39;</span><span class="o">)</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>As you can see the item we’re grouping by is stored in the <cite>grouper</cite>
attribute and the <cite>list</cite> contains all the objects that have this grouper
in common.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.6: </span>It’s now possible to use dotted notation to group by the child
attribute of another attribute.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="indent">
<code class="descname">indent</code><span class="sig-paren">(</span><em>s</em>, <em>width=4</em>, <em>indentfirst=False</em><span class="sig-paren">)</span><a class="headerlink" href="#indent" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a copy of the passed string, each line indented by
4 spaces. The first line is not indented. If you want to
change the number of spaces or indent the first line too
you can pass additional parameters to the filter:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">mytext</span><span class="o">|</span><span class="nf">indent</span><span class="o">(</span><span class="m">2</span><span class="o">,</span> <span class="kp">true</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    indent by two spaces and indent the first line too.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="int">
<code class="descname">int</code><span class="sig-paren">(</span><em>value</em>, <em>default=0</em><span class="sig-paren">)</span><a class="headerlink" href="#int" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the value into an integer. If the
conversion doesn’t work it will return <code class="docutils literal notranslate"><span class="pre">0</span></code>. You can
override this default using the first parameter.</p>
</dd></dl>

<dl class="function">
<dt id="join">
<code class="descname">join</code><span class="sig-paren">(</span><em>value</em>, <em>d=u''</em>, <em>attribute=None</em><span class="sig-paren">)</span><a class="headerlink" href="#join" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string which is the concatenation of the strings in the
sequence. The separator between elements is an empty string per
default, you can define it with the optional parameter:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="o">[</span><span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">,</span> <span class="m">3</span><span class="o">]|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39;|&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    -&gt; 1|2|3</span>

<span class="cp">{{</span> <span class="o">[</span><span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">,</span> <span class="m">3</span><span class="o">]|</span><span class="nf">join</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    -&gt; 123</span>
</pre></div>
</div>
<p>It is also possible to join certain attributes of an object:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">users</span><span class="o">|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39;, &#39;</span><span class="o">,</span> <span class="nv">attribute</span><span class="o">=</span><span class="s1">&#39;username&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.6: </span>The <cite>attribute</cite> parameter was added.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="last">
<code class="descname">last</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="headerlink" href="#last" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the last item of a sequence.</p>
</dd></dl>

<dl class="function">
<dt id="length">
<code class="descname">length</code><span class="sig-paren">(</span><em>object</em><span class="sig-paren">)</span><a class="headerlink" href="#length" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of items of a sequence or collection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Aliases:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">count</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="list">
<code class="descname">list</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#list" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the value into a list.  If it was a string the returned list
will be a list of characters.</p>
</dd></dl>

<dl class="function">
<dt id="lower">
<code class="descname">lower</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#lower" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a value to lowercase.</p>
</dd></dl>

<dl class="function">
<dt id="pprint">
<code class="descname">pprint</code><span class="sig-paren">(</span><em>value</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty print a variable. Useful for debugging.</p>
<p>With Jinja 1.2 onwards you can pass it a parameter.  If this parameter
is truthy the output will be more verbose (this requires <cite>pretty</cite>)</p>
</dd></dl>

<dl class="function">
<dt id="random">
<code class="descname">random</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="headerlink" href="#random" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a random item from the sequence.</p>
</dd></dl>

<dl class="function">
<dt id="replace">
<code class="descname">replace</code><span class="sig-paren">(</span><em>s</em>, <em>old</em>, <em>new</em>, <em>count=None</em><span class="sig-paren">)</span><a class="headerlink" href="#replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a copy of the value with all occurrences of a substring
replaced with a new one. The first argument is the substring
that should be replaced, the second is the replacement string.
If the optional third argument <code class="docutils literal notranslate"><span class="pre">count</span></code> is given, only the first
<code class="docutils literal notranslate"><span class="pre">count</span></code> occurrences are replaced:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="s2">&quot;Hello World&quot;</span><span class="o">|</span><span class="nf">replace</span><span class="o">(</span><span class="s2">&quot;Hello&quot;</span><span class="o">,</span> <span class="s2">&quot;Goodbye&quot;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    -&gt; Goodbye World</span>

<span class="cp">{{</span> <span class="s2">&quot;aaaaargh&quot;</span><span class="o">|</span><span class="nf">replace</span><span class="o">(</span><span class="s2">&quot;a&quot;</span><span class="o">,</span> <span class="s2">&quot;d&#39;oh, &quot;</span><span class="o">,</span> <span class="m">2</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    -&gt; d&#39;oh, d&#39;oh, aaargh</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="reverse">
<code class="descname">reverse</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#reverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Reverse the object or return an iterator the iterates over it the other
way round.</p>
</dd></dl>

<dl class="function">
<dt id="round">
<code class="descname">round</code><span class="sig-paren">(</span><em>value</em>, <em>precision=0</em>, <em>method='common'</em><span class="sig-paren">)</span><a class="headerlink" href="#round" title="Permalink to this definition">¶</a></dt>
<dd><p>Round the number to a given precision. The first
parameter specifies the precision (default is <code class="docutils literal notranslate"><span class="pre">0</span></code>), the
second the rounding method:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">'common'</span></code> rounds either up or down</li>
<li><code class="docutils literal notranslate"><span class="pre">'ceil'</span></code> always rounds up</li>
<li><code class="docutils literal notranslate"><span class="pre">'floor'</span></code> always rounds down</li>
</ul>
<p>If you don’t specify a method <code class="docutils literal notranslate"><span class="pre">'common'</span></code> is used.</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="m">42.55</span><span class="o">|</span><span class="nf">round</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    -&gt; 43.0</span>
<span class="cp">{{</span> <span class="m">42.55</span><span class="o">|</span><span class="nf">round</span><span class="o">(</span><span class="m">1</span><span class="o">,</span> <span class="s1">&#39;floor&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    -&gt; 42.5</span>
</pre></div>
</div>
<p>Note that even if rounded to 0 precision, a float is returned.  If
you need a real integer, pipe it through <cite>int</cite>:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="m">42.55</span><span class="o">|</span><span class="nf">round</span><span class="o">|</span><span class="nf">int</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    -&gt; 43</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="safe">
<code class="descname">safe</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#safe" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark the value as safe which means that in an environment with automatic
escaping enabled this variable will not be escaped.</p>
</dd></dl>

<dl class="function">
<dt id="slice">
<code class="descname">slice</code><span class="sig-paren">(</span><em>value</em>, <em>slices</em>, <em>fill_with=None</em><span class="sig-paren">)</span><a class="headerlink" href="#slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Slice an iterator and return a list of lists containing
those items. Useful if you want to create a div containing
three ul tags that represent columns:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;columwrapper&quot;</span><span class="p">&gt;</span>
  <span class="cp">{%</span>- <span class="k">for</span> <span class="nv">column</span> <span class="k">in</span> <span class="nv">items</span><span class="o">|</span><span class="nf">slice</span><span class="o">(</span><span class="m">3</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;column-</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>
    <span class="cp">{%</span>- <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">column</span> <span class="cp">%}</span>
      <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">item</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>If you pass it a second argument it’s used to fill missing
values on the last iteration.</p>
</dd></dl>

<dl class="function">
<dt id="sort">
<code class="descname">sort</code><span class="sig-paren">(</span><em>value</em>, <em>reverse=False</em>, <em>case_sensitive=False</em>, <em>attribute=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort an iterable.  Per default it sorts ascending, if you pass it
true as first argument it will reverse the sorting.</p>
<p>If the iterable is made of strings the third parameter can be used to
control the case sensitiveness of the comparison which is disabled by
default.</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">iterable</span><span class="o">|</span><span class="nf">sort</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    ...</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>It is also possible to sort by an attribute (for example to sort
by the date of an object) by specifying the <cite>attribute</cite> parameter:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">iterable</span><span class="o">|</span><span class="nf">sort</span><span class="o">(</span><span class="nv">attribute</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    ...</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.6: </span>The <cite>attribute</cite> parameter was added.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="string">
<code class="descname">string</code><span class="sig-paren">(</span><em>object</em><span class="sig-paren">)</span><a class="headerlink" href="#string" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a string unicode if it isn’t already.  That way a markup
string is not converted back to unicode.</p>
</dd></dl>

<dl class="function">
<dt id="striptags">
<code class="descname">striptags</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#striptags" title="Permalink to this definition">¶</a></dt>
<dd><p>Strip SGML/XML tags and replace adjacent whitespace by one space.</p>
</dd></dl>

<dl class="function">
<dt id="sum">
<code class="descname">sum</code><span class="sig-paren">(</span><em>iterable</em>, <em>attribute=None</em>, <em>start=0</em><span class="sig-paren">)</span><a class="headerlink" href="#sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the sum of a sequence of numbers plus the value of parameter
‘start’ (which defaults to 0).  When the sequence is empty it returns
start.</p>
<p>It is also possible to sum up only certain attributes:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="x">Total: </span><span class="cp">{{</span> <span class="nv">items</span><span class="o">|</span><span class="nf">sum</span><span class="o">(</span><span class="nv">attribute</span><span class="o">=</span><span class="s1">&#39;price&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.6: </span>The <cite>attribute</cite> parameter was added to allow suming up over
attributes.  Also the <cite>start</cite> parameter was moved on to the right.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="title">
<code class="descname">title</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#title" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a titlecased version of the value. I.e. words will start with
uppercase letters, all remaining characters are lowercase.</p>
</dd></dl>

<dl class="function">
<dt id="trim">
<code class="descname">trim</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#trim" title="Permalink to this definition">¶</a></dt>
<dd><p>Strip leading and trailing whitespace.</p>
</dd></dl>

<dl class="function">
<dt id="truncate">
<code class="descname">truncate</code><span class="sig-paren">(</span><em>s</em>, <em>length=255</em>, <em>killwords=False</em>, <em>end='...'</em><span class="sig-paren">)</span><a class="headerlink" href="#truncate" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a truncated copy of the string. The length is specified
with the first parameter which defaults to <code class="docutils literal notranslate"><span class="pre">255</span></code>. If the second
parameter is <code class="docutils literal notranslate"><span class="pre">true</span></code> the filter will cut the text at length. Otherwise
it will try to save the last word. If the text was in fact
truncated it will append an ellipsis sign (<code class="docutils literal notranslate"><span class="pre">&quot;...&quot;</span></code>). If you want a
different ellipsis sign than <code class="docutils literal notranslate"><span class="pre">&quot;...&quot;</span></code> you can specify it using the
third parameter.</p>
</dd></dl>

<dl class="function">
<dt id="upper">
<code class="descname">upper</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#upper" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a value to uppercase.</p>
</dd></dl>

<dl class="function">
<dt id="urlize">
<code class="descname">urlize</code><span class="sig-paren">(</span><em>value</em>, <em>trim_url_limit=None</em>, <em>nofollow=False</em><span class="sig-paren">)</span><a class="headerlink" href="#urlize" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts URLs in plain text into clickable links.</p>
<p>If you pass the filter an additional integer it will shorten the urls
to that number. Also a third argument exists that makes the urls
“nofollow”:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">mytext</span><span class="o">|</span><span class="nf">urlize</span><span class="o">(</span><span class="m">40</span><span class="o">,</span> <span class="kp">true</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    links are shortened to 40 chars and defined with rel=&quot;nofollow&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="wordcount">
<code class="descname">wordcount</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#wordcount" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the words in that string.</p>
</dd></dl>

<dl class="function">
<dt id="wordwrap">
<code class="descname">wordwrap</code><span class="sig-paren">(</span><em>s</em>, <em>width=79</em>, <em>break_long_words=True</em><span class="sig-paren">)</span><a class="headerlink" href="#wordwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a copy of the string passed to the filter wrapped after
<code class="docutils literal notranslate"><span class="pre">79</span></code> characters.  You can override this default using the first
parameter.  If you set the second parameter to <cite>false</cite> Jinja will not
split words apart if they are longer than <cite>width</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="xmlattr">
<code class="descname">xmlattr</code><span class="sig-paren">(</span><em>d</em>, <em>autospace=True</em><span class="sig-paren">)</span><a class="headerlink" href="#xmlattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an SGML/XML attribute string based on the items in a dict.
All values that are neither <cite>none</cite> nor <cite>undefined</cite> are automatically
escaped:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="cp">{{</span> <span class="o">{</span><span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="s1">&#39;my_list&#39;</span><span class="o">,</span> <span class="s1">&#39;missing&#39;</span><span class="o">:</span> <span class="kp">none</span><span class="o">,</span>
        <span class="s1">&#39;id&#39;</span><span class="o">:</span> <span class="s1">&#39;list-%d&#39;</span><span class="o">|</span><span class="nf">format</span><span class="o">(</span><span class="nv">variable</span><span class="o">)}|</span><span class="nf">xmlattr</span> <span class="cp">}}</span><span class="p">&gt;</span>
...
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Results in something like this:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;my_list&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;list-42&quot;</span><span class="p">&gt;</span>
...
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>As you can see it automatically prepends a space in front of the item
if the filter returned something unless the second parameter is false.</p>
</dd></dl>

</div>
<div class="section" id="list-of-builtin-tests">
<span id="builtin-tests"></span><h4>List of Builtin Tests<a class="headerlink" href="#list-of-builtin-tests" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="callable">
<code class="descname">callable</code><span class="sig-paren">(</span><em>object</em><span class="sig-paren">)</span><a class="headerlink" href="#callable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether the object is callable (i.e., some kind of function).
Note that classes are callable, as are instances with a __call__() method.</p>
</dd></dl>

<dl class="function">
<dt id="defined">
<code class="descname">defined</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#defined" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if the variable is defined:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">variable</span> <span class="k">is</span> <span class="nf">defined</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    value of variable: </span><span class="cp">{{</span> <span class="nv">variable</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    variable is not defined</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="#default" title="default"><code class="xref py py-func docutils literal notranslate"><span class="pre">default()</span></code></a> filter for a simple way to set undefined
variables.</p>
</dd></dl>

<dl class="function">
<dt id="divisibleby">
<code class="descname">divisibleby</code><span class="sig-paren">(</span><em>value</em>, <em>num</em><span class="sig-paren">)</span><a class="headerlink" href="#divisibleby" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a variable is divisible by a number.</p>
</dd></dl>

<dl class="function">
<dt id="escaped">
<code class="descname">escaped</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#escaped" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the value is escaped.</p>
</dd></dl>

<dl class="function">
<dt id="even">
<code class="descname">even</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#even" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if the variable is even.</p>
</dd></dl>

<dl class="function">
<dt id="iterable">
<code class="descname">iterable</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#iterable" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if it’s possible to iterate over an object.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">lower</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span></dt>
<dd><p>Return true if the variable is lowercased.</p>
</dd></dl>

<dl class="function">
<dt id="mapping">
<code class="descname">mapping</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if the object is a mapping (dict etc.).</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.6.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="none">
<code class="descname">none</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if the variable is none.</p>
</dd></dl>

<dl class="function">
<dt id="number">
<code class="descname">number</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#number" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if the variable is a number.</p>
</dd></dl>

<dl class="function">
<dt id="odd">
<code class="descname">odd</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#odd" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if the variable is odd.</p>
</dd></dl>

<dl class="function">
<dt id="sameas">
<code class="descname">sameas</code><span class="sig-paren">(</span><em>value</em>, <em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#sameas" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if an object points to the same memory address than another
object:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">foo.attribute</span> <span class="k">is</span> <span class="nf">sameas</span> <span class="kp">false</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    the foo attribute really is the `False` singleton</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sequence">
<code class="descname">sequence</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#sequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if the variable is a sequence. Sequences are variables
that are iterable.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">string</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span></dt>
<dd><p>Return true if the object is a string.</p>
</dd></dl>

<dl class="function">
<dt id="undefined">
<code class="descname">undefined</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#undefined" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#defined" title="defined"><code class="xref py py-func docutils literal notranslate"><span class="pre">defined()</span></code></a> but the other way round.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">upper</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span></dt>
<dd><p>Return true if the variable is uppercased.</p>
</dd></dl>

</div>
<div class="section" id="list-of-global-functions">
<span id="builtin-globals"></span><h4>List of Global Functions<a class="headerlink" href="#list-of-global-functions" title="Permalink to this headline">¶</a></h4>
<p>The following functions are available in the global scope by default:</p>
<dl class="function">
<dt id="range">
<code class="descname">range</code><span class="sig-paren">(</span><span class="optional">[</span><em>start</em>, <span class="optional">]</span><em>stop</em><span class="optional">[</span>, <em>step</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#range" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list containing an arithmetic progression of integers.
range(i, j) returns [i, i+1, i+2, …, j-1]; start (!) defaults to 0.
When step is given, it specifies the increment (or decrement).
For example, range(4) returns [0, 1, 2, 3].  The end point is omitted!
These are exactly the valid indices for a list of 4 elements.</p>
<p>This is useful to repeat a template block multiple times for example
to fill a list.  Imagine you have 7 users in the list but you want to
render three empty items to enforce a height with CSS:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">user.username</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">number</span> <span class="k">in</span> <span class="nv">range</span><span class="o">(</span><span class="m">10</span> <span class="o">-</span> <span class="nv">users</span><span class="o">|</span><span class="nf">count</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;empty&quot;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="lipsum">
<code class="descname">lipsum</code><span class="sig-paren">(</span><em>n=5</em>, <em>html=True</em>, <em>min=20</em>, <em>max=100</em><span class="sig-paren">)</span><a class="headerlink" href="#lipsum" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates some lorem ipsum for the template.  Per default five paragraphs
with HTML are generated each paragraph between 20 and 100 words.  If html
is disabled regular text is returned.  This is useful to generate simple
contents for layout testing.</p>
</dd></dl>

<dl class="function">
<dt id="dict">
<code class="descname">dict</code><span class="sig-paren">(</span><em>**items</em><span class="sig-paren">)</span><a class="headerlink" href="#dict" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenient alternative to dict literals.  <code class="docutils literal notranslate"><span class="pre">{'foo':</span> <span class="pre">'bar'}</span></code> is the same
as <code class="docutils literal notranslate"><span class="pre">dict(foo='bar')</span></code>.</p>
</dd></dl>

<dl class="class">
<dt id="cycler">
<em class="property">class </em><code class="descname">cycler</code><span class="sig-paren">(</span><em>*items</em><span class="sig-paren">)</span><a class="headerlink" href="#cycler" title="Permalink to this definition">¶</a></dt>
<dd><p>The cycler allows you to cycle among values similar to how <cite>loop.cycle</cite>
works.  Unlike <cite>loop.cycle</cite> however you can use this cycler outside of
loops or over multiple loops.</p>
<p>This is for example very useful if you want to show a list of folders and
files, with the folders on top, but both in the same list with alternating
row colors.</p>
<p>The following example shows how <cite>cycler</cite> can be used:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">row_class</span> <span class="o">=</span> <span class="nv">cycler</span><span class="o">(</span><span class="s1">&#39;odd&#39;</span><span class="o">,</span> <span class="s1">&#39;even&#39;</span><span class="o">)</span> <span class="cp">%}</span>
<span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;browser&quot;</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">folder</span> <span class="k">in</span> <span class="nv">folders</span> <span class="cp">%}</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;folder </span><span class="cp">{{</span> <span class="nv">row_class.next</span><span class="o">()</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">folder</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">filename</span> <span class="k">in</span> <span class="nv">files</span> <span class="cp">%}</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;file </span><span class="cp">{{</span> <span class="nv">row_class.next</span><span class="o">()</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">filename</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>A cycler has the following attributes and methods:</p>
<dl class="method">
<dt id="cycler.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cycler.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the cycle to the first item.</p>
</dd></dl>

<dl class="method">
<dt id="cycler.next">
<code class="descname">next</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cycler.next" title="Permalink to this definition">¶</a></dt>
<dd><p>Goes one item a head and returns the then current item.</p>
</dd></dl>

<dl class="attribute">
<dt id="cycler.current">
<code class="descname">current</code><a class="headerlink" href="#cycler.current" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current item.</p>
</dd></dl>

<p><strong>new in Jinja 2.1</strong></p>
</dd></dl>

<dl class="class">
<dt id="joiner">
<em class="property">class </em><code class="descname">joiner</code><span class="sig-paren">(</span><em>sep='</em>, <em>'</em><span class="sig-paren">)</span><a class="headerlink" href="#joiner" title="Permalink to this definition">¶</a></dt>
<dd><p>A tiny helper that can be use to “join” multiple sections.  A joiner is
passed a string and will return that string every time it’s calld, except
the first time in which situation it returns an empty string.  You can
use this to join things:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">pipe</span> <span class="o">=</span> <span class="nv">joiner</span><span class="o">(</span><span class="s2">&quot;|&quot;</span><span class="o">)</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">categories</span> <span class="cp">%}</span> <span class="cp">{{</span> <span class="nv">pipe</span><span class="o">()</span> <span class="cp">}}</span>
    Categories: <span class="cp">{{</span> <span class="nv">categories</span><span class="o">|</span><span class="nf">join</span><span class="o">(</span><span class="s2">&quot;, &quot;</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">author</span> <span class="cp">%}</span> <span class="cp">{{</span> <span class="nv">pipe</span><span class="o">()</span> <span class="cp">}}</span>
    Author: <span class="cp">{{</span> <span class="nv">author</span><span class="o">()</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">can_edit</span> <span class="cp">%}</span> <span class="cp">{{</span> <span class="nv">pipe</span><span class="o">()</span> <span class="cp">}}</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;?action=edit&quot;</span><span class="p">&gt;</span>Edit<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
<p><strong>new in Jinja 2.1</strong></p>
</dd></dl>

</div>
<div class="section" id="extensions">
<h4>Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">¶</a></h4>
<p>The following sections cover the built-in Jinja2 extensions that may be
enabled by the application.  The application could also provide further
extensions not covered by this documentation.  In that case there should
be a separate document explaining the extensions.</p>
<div class="section" id="i18n">
<span id="i18n-in-templates"></span><h5>i18n<a class="headerlink" href="#i18n" title="Permalink to this headline">¶</a></h5>
<p>If the i18n extension is enabled it’s possible to mark parts in the template
as translatable.  To mark a section as translatable you can use <cite>trans</cite>:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">{%</span> <span class="k">trans</span> <span class="cp">%}</span>Hello <span class="cp">{{</span> <span class="nv">user</span> <span class="cp">}}</span>!<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>To translate a template expression — say, using template filters or just
accessing an attribute of an object — you need to bind the expression to a
name for use within the translation block:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">{%</span> <span class="k">trans</span> <span class="nv">user</span><span class="o">=</span><span class="nv">user.username</span> <span class="cp">%}</span>Hello <span class="cp">{{</span> <span class="nv">user</span> <span class="cp">}}</span>!<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>If you need to bind more than one expression inside a <cite>trans</cite> tag, separate
the pieces with a comma (<code class="docutils literal notranslate"><span class="pre">,</span></code>):</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">trans</span> <span class="nv">book_title</span><span class="o">=</span><span class="nv">book.title</span><span class="o">,</span> <span class="nv">author</span><span class="o">=</span><span class="nv">author.name</span> <span class="cp">%}</span>
This is <span class="cp">{{</span> <span class="nv">book_title</span> <span class="cp">}}</span> by <span class="cp">{{</span> <span class="nv">author</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Inside trans tags no statements are allowed, only variable tags are.</p>
<p>To pluralize, specify both the singular and plural forms with the <cite>pluralize</cite>
tag, which appears between <cite>trans</cite> and <cite>endtrans</cite>:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">trans</span> <span class="nv">count</span><span class="o">=</span><span class="nv">list</span><span class="o">|</span><span class="nf">length</span> <span class="cp">%}</span>
There is <span class="cp">{{</span> <span class="nv">count</span> <span class="cp">}}</span> <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span> object.
<span class="cp">{%</span> <span class="k">pluralize</span> <span class="cp">%}</span>
There are <span class="cp">{{</span> <span class="nv">count</span> <span class="cp">}}</span> <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span> objects.
<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Per default the first variable in a block is used to determine the correct
singular or plural form.  If that doesn’t work out you can specify the name
which should be used for pluralizing by adding it as parameter to <cite>pluralize</cite>:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">trans</span> <span class="p">...</span><span class="o">,</span> <span class="nv">user_count</span><span class="o">=</span><span class="nv">users</span><span class="o">|</span><span class="nf">length</span> <span class="cp">%}</span>...
<span class="cp">{%</span> <span class="k">pluralize</span> <span class="nv">user_count</span> <span class="cp">%}</span>...<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>It’s also possible to translate strings in expressions.  For that purpose
three functions exist:</p>
<p>_   <cite>gettext</cite>: translate a single string
-   <cite>ngettext</cite>: translate a pluralizable string
-   <cite>_</cite>: alias for <cite>gettext</cite></p>
<p>For example you can print a translated string easily this way:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="kp">_</span><span class="o">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>To use placeholders you can use the <cite>format</cite> filter:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="kp">_</span><span class="o">(</span><span class="s1">&#39;Hello %(user)s!&#39;</span><span class="o">)|</span><span class="nf">format</span><span class="o">(</span><span class="nv">user</span><span class="o">=</span><span class="nv">user.username</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>For multiple placeholders always use keyword arguments to <cite>format</cite> as other
languages may not use the words in the same order.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.5.</span></p>
</div>
<p>If newstyle gettext calls are activated (<a class="reference internal" href="index.html#newstyle-gettext"><span class="std std-ref">Newstyle Gettext</span></a>), using
placeholders is a lot easier:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">gettext</span><span class="o">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">gettext</span><span class="o">(</span><span class="s1">&#39;Hello %(name)s!&#39;</span><span class="o">,</span> <span class="nv">name</span><span class="o">=</span><span class="s1">&#39;World&#39;</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">ngettext</span><span class="o">(</span><span class="s1">&#39;%(num)d apple&#39;</span><span class="o">,</span> <span class="s1">&#39;%(num)d apples&#39;</span><span class="o">,</span> <span class="nv">apples</span><span class="o">|</span><span class="nf">count</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>Note that the <cite>ngettext</cite> function’s format string automatically recieves
the count as <cite>num</cite> parameter additionally to the regular parameters.</p>
</div>
<div class="section" id="expression-statement">
<h5>Expression Statement<a class="headerlink" href="#expression-statement" title="Permalink to this headline">¶</a></h5>
<p>If the expression-statement extension is loaded a tag called <cite>do</cite> is available
that works exactly like the regular variable expression (<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">...</span> <span class="pre">}}</span></code>) just
that it doesn’t print anything.  This can be used to modify lists:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">do</span> <span class="nv">navigation.append</span><span class="o">(</span><span class="s1">&#39;a string&#39;</span><span class="o">)</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="loop-controls">
<h5>Loop Controls<a class="headerlink" href="#loop-controls" title="Permalink to this headline">¶</a></h5>
<p>If the application enables the <a class="reference internal" href="index.html#loopcontrols-extension"><span class="std std-ref">Loop Controls</span></a> it’s possible to
use <cite>break</cite> and <cite>continue</cite> in loops.  When <cite>break</cite> is reached, the loop is
terminated, if <cite>continue</cite> is eached the processing is stopped and continues
with the next iteration.</p>
<p>Here a loop that skips every second item:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span>
    <span class="cp">{%</span>- <span class="k">if</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="k">is</span> <span class="nf">even</span> <span class="cp">%}{%</span> <span class="k">continue</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Likewise a look that stops processing after the 10th iteration:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span>
    <span class="cp">{%</span>- <span class="k">if</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="o">&gt;=</span> <span class="m">10</span> <span class="cp">%}{%</span> <span class="k">break</span> <span class="cp">%}{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="with-statement">
<h5>With Statement<a class="headerlink" href="#with-statement" title="Permalink to this headline">¶</a></h5>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
<p>If the application enables the <a class="reference internal" href="index.html#with-extension"><span class="std std-ref">With Statement</span></a> it is possible to
use the <cite>with</cite> keyword in templates.  This makes it possible to create
a new inner scope.  Variables set within this scope are not visible
outside of the scope.</p>
<p>With in a nutshell:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">with</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">set</span> <span class="nv">foo</span> <span class="o">=</span> <span class="m">42</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">foo</span> <span class="cp">}}</span>           foo is 42 here
<span class="cp">{%</span> <span class="k">endwith</span> <span class="cp">%}</span>
foo is not visible here any longer
</pre></div>
</div>
<p>Because it is common to set variables at the beginning of the scope
you can do that within the with statement.  The following two examples
are equivalent:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">with</span> <span class="nv">foo</span> <span class="o">=</span> <span class="m">42</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">foo</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endwith</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">with</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">set</span> <span class="nv">foo</span> <span class="o">=</span> <span class="m">42</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">foo</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endwith</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="autoescape-extension">
<span id="autoescape-overrides"></span><h4>Autoescape Extension<a class="headerlink" href="#autoescape-extension" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.4.</span></p>
</div>
<p>If the application enables the <a class="reference internal" href="index.html#autoescape-extension"><span class="std std-ref">Autoescape Extension</span></a> one can
activate and deactivate the autoescaping from within the templates.</p>
<p>Example:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">autoescape</span> <span class="kp">true</span> <span class="cp">%}</span>
    Autoescaping is active within this block
<span class="cp">{%</span> <span class="k">endautoescape</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">autoescape</span> <span class="kp">false</span> <span class="cp">%}</span>
    Autoescaping is inactive within this block
<span class="cp">{%</span> <span class="k">endautoescape</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>After the <cite>endautoescape</cite> the behavior is reverted to what it was before.</p>
</div>
</div>
<span id="document-extensions"></span><div class="section" id="extensions">
<span id="jinja-extensions"></span><h3>Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">¶</a></h3>
<p>Jinja2 supports extensions that can add extra filters, tests, globals or even
extend the parser.  The main motivation of extensions is it to move often used
code into a reusable class like adding support for internationalization.</p>
<div class="section" id="adding-extensions">
<h4>Adding Extensions<a class="headerlink" href="#adding-extensions" title="Permalink to this headline">¶</a></h4>
<p>Extensions are added to the Jinja2 environment at creation time.  Once the
environment is created additional extensions cannot be added.  To add an
extension pass a list of extension classes or import paths to the
<cite>environment</cite> parameter of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code> constructor.  The following
example creates a Jinja2 environment with the i18n extension loaded:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jinja_env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">extensions</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;jinja2.ext.i18n&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="i18n-extension">
<span id="id1"></span><h4>i18n Extension<a class="headerlink" href="#i18n-extension" title="Permalink to this headline">¶</a></h4>
<p><strong>Import name:</strong> <cite>jinja2.ext.i18n</cite></p>
<p>Jinja2 currently comes with one extension, the i18n extension.  It can be
used in combination with <a class="reference external" href="http://docs.python.org/dev/library/gettext">gettext</a> or <a class="reference external" href="http://babel.edgewall.org/">babel</a>.  If the i18n extension is
enabled Jinja2 provides a <cite>trans</cite> statement that marks the wrapped string as
translatable and calls <cite>gettext</cite>.</p>
<p>After enabling dummy <cite>_</cite> function that forwards calls to <cite>gettext</cite> is added
to the environment globals.  An internationalized application then has to
provide at least an <cite>gettext</cite> and optoinally a <cite>ngettext</cite> function into the
namespace.  Either globally or for each rendering.</p>
<div class="section" id="environment-methods">
<h5>Environment Methods<a class="headerlink" href="#environment-methods" title="Permalink to this headline">¶</a></h5>
<p>After enabling of the extension the environment provides the following
additional methods:</p>
<dl class="method">
<dt id="jinja2.Environment.install_gettext_translations">
<code class="descclassname">jinja2.Environment.</code><code class="descname">install_gettext_translations</code><span class="sig-paren">(</span><em>translations</em>, <em>newstyle=False</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.install_gettext_translations" title="Permalink to this definition">¶</a></dt>
<dd><p>Installs a translation globally for that environment.  The tranlations
object provided must implement at least <cite>ugettext</cite> and <cite>ungettext</cite>.
The <cite>gettext.NullTranslations</cite> and <cite>gettext.GNUTranslations</cite> classes
as well as <a class="reference external" href="http://babel.edgewall.org/">Babel</a>s <cite>Translations</cite> class are supported.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.5: </span>newstyle gettext added</p>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.install_null_translations">
<code class="descclassname">jinja2.Environment.</code><code class="descname">install_null_translations</code><span class="sig-paren">(</span><em>newstyle=False</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.install_null_translations" title="Permalink to this definition">¶</a></dt>
<dd><p>Install dummy gettext functions.  This is useful if you want to prepare
the application for internationalization but don’t want to implement the
full internationalization system yet.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.5: </span>newstyle gettext added</p>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.install_gettext_callables">
<code class="descclassname">jinja2.Environment.</code><code class="descname">install_gettext_callables</code><span class="sig-paren">(</span><em>gettext</em>, <em>ngettext</em>, <em>newstyle=False</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.install_gettext_callables" title="Permalink to this definition">¶</a></dt>
<dd><p>Installs the given <cite>gettext</cite> and <cite>ngettext</cite> callables into the
environment as globals.  They are supposed to behave exactly like the
standard library’s <code class="xref py py-func docutils literal notranslate"><span class="pre">gettext.ugettext()</span></code> and
<code class="xref py py-func docutils literal notranslate"><span class="pre">gettext.ungettext()</span></code> functions.</p>
<p>If <cite>newstyle</cite> is activated, the callables are wrapped to work like
newstyle callables.  See <a class="reference internal" href="#newstyle-gettext"><span class="std std-ref">Newstyle Gettext</span></a> for more information.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.uninstall_gettext_translations">
<code class="descclassname">jinja2.Environment.</code><code class="descname">uninstall_gettext_translations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.uninstall_gettext_translations" title="Permalink to this definition">¶</a></dt>
<dd><p>Uninstall the translations again.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.extract_translations">
<code class="descclassname">jinja2.Environment.</code><code class="descname">extract_translations</code><span class="sig-paren">(</span><em>source</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.Environment.extract_translations" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract localizable strings from the given template node or source.</p>
<p>For every string found this function yields a <code class="docutils literal notranslate"><span class="pre">(lineno,</span> <span class="pre">function,</span>
<span class="pre">message)</span></code> tuple, where:</p>
<ul class="simple">
<li><cite>lineno</cite> is the number of the line on which the string was found,</li>
<li><cite>function</cite> is the name of the <cite>gettext</cite> function used (if the
string was extracted from embedded Python code), and</li>
<li><cite>message</cite> is the string itself (a <cite>unicode</cite> object, or a tuple
of <cite>unicode</cite> objects for functions with multiple string arguments).</li>
</ul>
<p>If <a class="reference external" href="http://babel.edgewall.org/">Babel</a> is installed <a class="reference internal" href="index.html#babel-integration"><span class="std std-ref">the babel integration</span></a>
can be used to extract strings for babel.</p>
</dd></dl>

<p>For a web application that is available in multiple languages but gives all
the users the same language (for example a multilingual forum software
installed for a French community) may load the translations once and add the
translation methods to the environment at environment generation time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">translations</span> <span class="o">=</span> <span class="n">get_gettext_translations</span><span class="p">()</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">extensions</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;jinja2.ext.i18n&#39;</span><span class="p">])</span>
<span class="n">env</span><span class="o">.</span><span class="n">install_gettext_translations</span><span class="p">(</span><span class="n">translations</span><span class="p">)</span>
</pre></div>
</div>
<p>The <cite>get_gettext_translations</cite> function would return the translator for the
current configuration.  (For example by using <cite>gettext.find</cite>)</p>
<p>The usage of the <cite>i18n</cite> extension for template designers is covered as part
<a class="reference internal" href="index.html#i18n-in-templates"><span class="std std-ref">of the template documentation</span></a>.</p>
</div>
<div class="section" id="newstyle-gettext">
<span id="id2"></span><h5>Newstyle Gettext<a class="headerlink" href="#newstyle-gettext" title="Permalink to this headline">¶</a></h5>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.</span></p>
</div>
<p>Starting with version 2.5 you can use newstyle gettext calls.  These are
inspired by trac’s internal gettext functions and are fully supported by
the babel extraction tool.  They might not work as expected by other
extraction tools in case you are not using Babel’s.</p>
<p>What’s the big difference between standard and newstyle gettext calls?  In
general they are less to type and less error prone.  Also if they are used
in an autoescaping environment they better support automatic escaping.
Here some common differences between old and new calls:</p>
<p>standard gettext:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">gettext</span><span class="o">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">gettext</span><span class="o">(</span><span class="s1">&#39;Hello %(name)s!&#39;</span><span class="o">)|</span><span class="nf">format</span><span class="o">(</span><span class="nv">name</span><span class="o">=</span><span class="s1">&#39;World&#39;</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">ngettext</span><span class="o">(</span><span class="s1">&#39;%(num)d apple&#39;</span><span class="o">,</span> <span class="s1">&#39;%(num)d apples&#39;</span><span class="o">,</span> <span class="nv">apples</span><span class="o">|</span><span class="nf">count</span><span class="o">)|</span><span class="nf">format</span><span class="o">(</span>
    <span class="nv">num</span><span class="o">=</span><span class="nv">apples</span><span class="o">|</span><span class="nf">count</span>
<span class="o">)</span><span class="cp">}}</span>
</pre></div>
</div>
<p>newstyle gettext looks like this instead:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">gettext</span><span class="o">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">gettext</span><span class="o">(</span><span class="s1">&#39;Hello %(name)s!&#39;</span><span class="o">,</span> <span class="nv">name</span><span class="o">=</span><span class="s1">&#39;World&#39;</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">ngettext</span><span class="o">(</span><span class="s1">&#39;%(num)d apple&#39;</span><span class="o">,</span> <span class="s1">&#39;%(num)d apples&#39;</span><span class="o">,</span> <span class="nv">apples</span><span class="o">|</span><span class="nf">count</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>The advantages of newstyle gettext is that you have less to type and that
named placeholders become mandatory.  The latter sounds like a
disadvantage but solves a lot of troubles translators are often facing
when they are unable to switch the positions of two placeholder.  With
newstyle gettext, all format strings look the same.</p>
<p>Furthermore with newstyle gettext, string formatting is also used if no
placeholders are used which makes all strings behave exactly the same.
Last but not least are newstyle gettext calls able to properly mark
strings for autoescaping which solves lots of escaping related issues many
templates are experiencing over time when using autoescaping.</p>
</div>
</div>
<div class="section" id="expression-statement">
<h4>Expression Statement<a class="headerlink" href="#expression-statement" title="Permalink to this headline">¶</a></h4>
<p><strong>Import name:</strong> <cite>jinja2.ext.do</cite></p>
<p>The “do” aka expression-statement extension adds a simple <cite>do</cite> tag to the
template engine that works like a variable expression but ignores the
return value.</p>
</div>
<div class="section" id="loop-controls">
<span id="loopcontrols-extension"></span><h4>Loop Controls<a class="headerlink" href="#loop-controls" title="Permalink to this headline">¶</a></h4>
<p><strong>Import name:</strong> <cite>jinja2.ext.loopcontrols</cite></p>
<p>This extension adds support for <cite>break</cite> and <cite>continue</cite> in loops.  After
enabling Jinja2 provides those two keywords which work exactly like in
Python.</p>
</div>
<div class="section" id="with-statement">
<span id="with-extension"></span><h4>With Statement<a class="headerlink" href="#with-statement" title="Permalink to this headline">¶</a></h4>
<p><strong>Import name:</strong> <cite>jinja2.ext.with_</cite></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
<p>This extension adds support for the with keyword.  Using this keyword it
is possible to enforce a nested scope in a template.  Variables can be
declared directly in the opening block of the with statement or using a
standard <cite>set</cite> statement directly within.</p>
</div>
<div class="section" id="autoescape-extension">
<span id="id3"></span><h4>Autoescape Extension<a class="headerlink" href="#autoescape-extension" title="Permalink to this headline">¶</a></h4>
<p><strong>Import name:</strong> <cite>jinja2.ext.autoescape</cite></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.4.</span></p>
</div>
<p>The autoescape extension allows you to toggle the autoescape feature from
within the template.  If the environment’s <code class="xref py py-attr docutils literal notranslate"><span class="pre">autoescape</span></code>
setting is set to <cite>False</cite> it can be activated, if it’s <cite>True</cite> it can be
deactivated.  The setting overriding is scoped.</p>
</div>
<div class="section" id="module-jinja2.ext">
<span id="id4"></span><span id="writing-extensions"></span><h4>Writing Extensions<a class="headerlink" href="#module-jinja2.ext" title="Permalink to this headline">¶</a></h4>
<p>By writing extensions you can add custom tags to Jinja2.  This is a non trival
task and usually not needed as the default tags and expressions cover all
common use cases.  The i18n extension is a good example of why extensions are
useful, another one would be fragment caching.</p>
<p>When writing extensions you have to keep in mind that you are working with the
Jinja2 template compiler which does not validate the node tree you are possing
to it.  If the AST is malformed you will get all kinds of compiler or runtime
errors that are horrible to debug.  Always make sure you are using the nodes
you create correctly.  The API documentation below shows which nodes exist and
how to use them.</p>
<div class="section" id="example-extension">
<h5>Example Extension<a class="headerlink" href="#example-extension" title="Permalink to this headline">¶</a></h5>
<p>The following example implements a <cite>cache</cite> tag for Jinja2 by using the
<a class="reference external" href="http://werkzeug.pocoo.org/">Werkzeug</a> caching contrib module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">nodes</span>
<span class="kn">from</span> <span class="nn">jinja2.ext</span> <span class="kn">import</span> <span class="n">Extension</span>


<span class="k">class</span> <span class="nc">FragmentCacheExtension</span><span class="p">(</span><span class="n">Extension</span><span class="p">):</span>
    <span class="c1"># a set of names that trigger the extension.</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;cache&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">environment</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FragmentCacheExtension</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">environment</span><span class="p">)</span>

        <span class="c1"># add the defaults to the environment</span>
        <span class="n">environment</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="n">fragment_cache_prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">fragment_cache</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">):</span>
        <span class="c1"># the first token is the token that started the tag.  In our case</span>
        <span class="c1"># we only listen to ``&#39;cache&#39;`` so this will be a name token with</span>
        <span class="c1"># `cache` as value.  We get the line number so that we can give</span>
        <span class="c1"># that line number to the nodes we create by hand.</span>
        <span class="n">lineno</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">next</span><span class="p">()</span><span class="o">.</span><span class="n">lineno</span>

        <span class="c1"># now we parse a single expression that is used as cache key.</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_expression</span><span class="p">()]</span>

        <span class="c1"># if there is a comma, the user provided a timeout.  If not use</span>
        <span class="c1"># None as second parameter.</span>
        <span class="k">if</span> <span class="n">parser</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">skip_if</span><span class="p">(</span><span class="s1">&#39;comma&#39;</span><span class="p">):</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_expression</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">Const</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>

        <span class="c1"># now we parse the body of the cache block up to `endcache` and</span>
        <span class="c1"># drop the needle (which would always be `endcache` in that case)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_statements</span><span class="p">([</span><span class="s1">&#39;name:endcache&#39;</span><span class="p">],</span> <span class="n">drop_needle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># now return a `CallBlock` node that calls our _cache_support</span>
        <span class="c1"># helper method on this extension.</span>
        <span class="k">return</span> <span class="n">nodes</span><span class="o">.</span><span class="n">CallBlock</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">call_method</span><span class="p">(</span><span class="s1">&#39;_cache_support&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">),</span>
                               <span class="p">[],</span> <span class="p">[],</span> <span class="n">body</span><span class="p">)</span><span class="o">.</span><span class="n">set_lineno</span><span class="p">(</span><span class="n">lineno</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_cache_support</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">timeout</span><span class="p">,</span> <span class="n">caller</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Helper callback.&quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">fragment_cache_prefix</span> <span class="o">+</span> <span class="n">name</span>

        <span class="c1"># try to load the block from the cache</span>
        <span class="c1"># if there is no fragment in the cache, render it and store</span>
        <span class="c1"># it in the cache.</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">fragment_cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">rv</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">caller</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">fragment_cache</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">rv</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rv</span>
</pre></div>
</div>
<p>And here is how you use it in an environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span>
<span class="kn">from</span> <span class="nn">werkzeug.contrib.cache</span> <span class="kn">import</span> <span class="n">SimpleCache</span>

<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">extensions</span><span class="o">=</span><span class="p">[</span><span class="n">FragmentCacheExtension</span><span class="p">])</span>
<span class="n">env</span><span class="o">.</span><span class="n">fragment_cache</span> <span class="o">=</span> <span class="n">SimpleCache</span><span class="p">()</span>
</pre></div>
</div>
<p>Inside the template it’s then possible to mark blocks as cacheable.  The
following example caches a sidebar for 300 seconds:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">cache</span> <span class="s1">&#39;sidebar&#39;</span><span class="o">,</span> <span class="m">300</span> <span class="cp">%}</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;sidebar&quot;</span><span class="p">&gt;</span>
    ...
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endcache</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="extension-api">
<h5>Extension API<a class="headerlink" href="#extension-api" title="Permalink to this headline">¶</a></h5>
<p>Extensions always have to extend the <a class="reference internal" href="#jinja2.ext.Extension" title="jinja2.ext.Extension"><code class="xref py py-class docutils literal notranslate"><span class="pre">jinja2.ext.Extension</span></code></a> class:</p>
<dl class="class">
<dt id="jinja2.ext.Extension">
<em class="property">class </em><code class="descclassname">jinja2.ext.</code><code class="descname">Extension</code><span class="sig-paren">(</span><em>environment</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.ext.Extension" title="Permalink to this definition">¶</a></dt>
<dd><p>Extensions can be used to add extra functionality to the Jinja template
system at the parser level.  Custom extensions are bound to an environment
but may not store environment specific data on <cite>self</cite>.  The reason for
this is that an extension can be bound to another environment (for
overlays) by creating a copy and reassigning the <cite>environment</cite> attribute.</p>
<p>As extensions are created by the environment they cannot accept any
arguments for configuration.  One may want to work around that by using
a factory function, but that is not possible as extensions are identified
by their import name.  The correct way to configure the extension is
storing the configuration values on the environment.  Because this way the
environment ends up acting as central configuration storage the
attributes may clash which is why extensions have to ensure that the names
they choose for configuration are not too generic.  <code class="docutils literal notranslate"><span class="pre">prefix</span></code> for example
is a terrible name, <code class="docutils literal notranslate"><span class="pre">fragment_cache_prefix</span></code> on the other hand is a good
name as includes the name of the extension (fragment cache).</p>
<dl class="attribute">
<dt id="jinja2.ext.Extension.identifier">
<code class="descname">identifier</code><a class="headerlink" href="#jinja2.ext.Extension.identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>The identifier of the extension.  This is always the true import name
of the extension class and must not be changed.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.ext.Extension.tags">
<code class="descname">tags</code><a class="headerlink" href="#jinja2.ext.Extension.tags" title="Permalink to this definition">¶</a></dt>
<dd><p>If the extension implements custom tags this is a set of tag names
the extension is listening for.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.ext.Extension.attr">
<code class="descname">attr</code><span class="sig-paren">(</span><em>name</em>, <em>lineno=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.ext.Extension.attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an attribute node for the current extension.  This is useful
to pass constants on extensions to generated template code.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="s1">&#39;_my_attribute&#39;</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.ext.Extension.call_method">
<code class="descname">call_method</code><span class="sig-paren">(</span><em>name</em>, <em>args=None</em>, <em>kwargs=None</em>, <em>dyn_args=None</em>, <em>dyn_kwargs=None</em>, <em>lineno=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.ext.Extension.call_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Call a method of the extension.  This is a shortcut for
<a class="reference internal" href="index.html#attr" title="attr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">attr()</span></code></a> + <a class="reference internal" href="#jinja2.nodes.Call" title="jinja2.nodes.Call"><code class="xref py py-class docutils literal notranslate"><span class="pre">jinja2.nodes.Call</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.ext.Extension.filter_stream">
<code class="descname">filter_stream</code><span class="sig-paren">(</span><em>stream</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.ext.Extension.filter_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>It’s passed a <a class="reference internal" href="#jinja2.lexer.TokenStream" title="jinja2.lexer.TokenStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">TokenStream</span></code></a> that can be used
to filter tokens returned.  This method has to return an iterable of
<a class="reference internal" href="#jinja2.lexer.Token" title="jinja2.lexer.Token"><code class="xref py py-class docutils literal notranslate"><span class="pre">Token</span></code></a>s, but it doesn’t have to return a
<a class="reference internal" href="#jinja2.lexer.TokenStream" title="jinja2.lexer.TokenStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">TokenStream</span></code></a>.</p>
<p>In the <cite>ext</cite> folder of the Jinja2 source distribution there is a file
called <cite>inlinegettext.py</cite> which implements a filter that utilizes this
method.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.ext.Extension.parse">
<code class="descname">parse</code><span class="sig-paren">(</span><em>parser</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.ext.Extension.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>If any of the <a class="reference internal" href="#jinja2.ext.Extension.tags" title="jinja2.ext.Extension.tags"><code class="xref py py-attr docutils literal notranslate"><span class="pre">tags</span></code></a> matched this method is called with the
parser as first argument.  The token the parser stream is pointing at
is the name token that matched.  This method has to return one or a
list of multiple nodes.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.ext.Extension.preprocess">
<code class="descname">preprocess</code><span class="sig-paren">(</span><em>source</em>, <em>name</em>, <em>filename=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.ext.Extension.preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called before the actual lexing and can be used to
preprocess the source.  The <cite>filename</cite> is optional.  The return value
must be the preprocessed source.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="parser-api">
<h5>Parser API<a class="headerlink" href="#parser-api" title="Permalink to this headline">¶</a></h5>
<p>The parser passed to <a class="reference internal" href="#jinja2.ext.Extension.parse" title="jinja2.ext.Extension.parse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Extension.parse()</span></code></a> provides ways to parse
expressions of different types.  The following methods may be used by
extensions:</p>
<dl class="class">
<dt id="jinja2.parser.Parser">
<em class="property">class </em><code class="descclassname">jinja2.parser.</code><code class="descname">Parser</code><span class="sig-paren">(</span><em>environment</em>, <em>source</em>, <em>name=None</em>, <em>filename=None</em>, <em>state=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.parser.Parser" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the central parsing class Jinja2 uses.  It’s passed to
extensions and can be used to parse expressions or statements.</p>
<dl class="attribute">
<dt id="jinja2.parser.Parser.filename">
<code class="descname">filename</code><a class="headerlink" href="#jinja2.parser.Parser.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>The filename of the template the parser processes.  This is <strong>not</strong>
the load name of the template.  For the load name see <a class="reference internal" href="#jinja2.parser.Parser.name" title="jinja2.parser.Parser.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code></a>.
For templates that were not loaded form the file system this is
<cite>None</cite>.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.parser.Parser.name">
<code class="descname">name</code><a class="headerlink" href="#jinja2.parser.Parser.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The load name of the template.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.parser.Parser.stream">
<code class="descname">stream</code><a class="headerlink" href="#jinja2.parser.Parser.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>The current <a class="reference internal" href="#jinja2.lexer.TokenStream" title="jinja2.lexer.TokenStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">TokenStream</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="jinja2.parser.Parser.fail">
<code class="descname">fail</code><span class="sig-paren">(</span><em>msg</em>, <em>lineno=None</em>, <em>exc=&lt;class 'jinja2.exceptions.TemplateSyntaxError'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.parser.Parser.fail" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method that raises <cite>exc</cite> with the message, passed
line number or last line number as well as the current name and
filename.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.parser.Parser.free_identifier">
<code class="descname">free_identifier</code><span class="sig-paren">(</span><em>lineno=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.parser.Parser.free_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new free identifier as <a class="reference internal" href="#jinja2.nodes.InternalName" title="jinja2.nodes.InternalName"><code class="xref py py-class docutils literal notranslate"><span class="pre">InternalName</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.parser.Parser.parse_assign_target">
<code class="descname">parse_assign_target</code><span class="sig-paren">(</span><em>with_tuple=True</em>, <em>name_only=False</em>, <em>extra_end_rules=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.parser.Parser.parse_assign_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse an assignment target.  As Jinja2 allows assignments to
tuples, this function can parse all allowed assignment targets.  Per
default assignments to tuples are parsed, that can be disable however
by setting <cite>with_tuple</cite> to <cite>False</cite>.  If only assignments to names are
wanted <cite>name_only</cite> can be set to <cite>True</cite>.  The <cite>extra_end_rules</cite>
parameter is forwarded to the tuple parsing function.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.parser.Parser.parse_expression">
<code class="descname">parse_expression</code><span class="sig-paren">(</span><em>with_condexpr=True</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.parser.Parser.parse_expression" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse an expression.  Per default all expressions are parsed, if
the optional <cite>with_condexpr</cite> parameter is set to <cite>False</cite> conditional
expressions are not parsed.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.parser.Parser.parse_statements">
<code class="descname">parse_statements</code><span class="sig-paren">(</span><em>end_tokens</em>, <em>drop_needle=False</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.parser.Parser.parse_statements" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse multiple statements into a list until one of the end tokens
is reached.  This is used to parse the body of statements as it also
parses template data if appropriate.  The parser checks first if the
current token is a colon and skips it if there is one.  Then it checks
for the block end and parses until if one of the <cite>end_tokens</cite> is
reached.  Per default the active token in the stream at the end of
the call is the matched end token.  If this is not wanted <cite>drop_needle</cite>
can be set to <cite>True</cite> and the end token is removed.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.parser.Parser.parse_tuple">
<code class="descname">parse_tuple</code><span class="sig-paren">(</span><em>simplified=False</em>, <em>with_condexpr=True</em>, <em>extra_end_rules=None</em>, <em>explicit_parentheses=False</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.parser.Parser.parse_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Works like <cite>parse_expression</cite> but if multiple expressions are
delimited by a comma a <a class="reference internal" href="#jinja2.nodes.Tuple" title="jinja2.nodes.Tuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple</span></code></a> node is created.
This method could also return a regular expression instead of a tuple
if no commas where found.</p>
<p>The default parsing mode is a full tuple.  If <cite>simplified</cite> is <cite>True</cite>
only names and literals are parsed.  The <cite>no_condexpr</cite> parameter is
forwarded to <a class="reference internal" href="#jinja2.parser.Parser.parse_expression" title="jinja2.parser.Parser.parse_expression"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parse_expression()</span></code></a>.</p>
<p>Because tuples do not require delimiters and may end in a bogus comma
an extra hint is needed that marks the end of a tuple.  For example
for loops support tuples between <cite>for</cite> and <cite>in</cite>.  In that case the
<cite>extra_end_rules</cite> is set to <code class="docutils literal notranslate"><span class="pre">['name:in']</span></code>.</p>
<p><cite>explicit_parentheses</cite> is true if the parsing was triggered by an
expression in parentheses.  This is used to figure out if an empty
tuple is a valid expression or not.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="jinja2.lexer.TokenStream">
<em class="property">class </em><code class="descclassname">jinja2.lexer.</code><code class="descname">TokenStream</code><span class="sig-paren">(</span><em>generator</em>, <em>name</em>, <em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.lexer.TokenStream" title="Permalink to this definition">¶</a></dt>
<dd><p>A token stream is an iterable that yields <a class="reference internal" href="#jinja2.lexer.Token" title="jinja2.lexer.Token"><code class="xref py py-class docutils literal notranslate"><span class="pre">Token</span></code></a>s.  The
parser however does not iterate over it but calls <a class="reference internal" href="#jinja2.lexer.TokenStream.next" title="jinja2.lexer.TokenStream.next"><code class="xref py py-meth docutils literal notranslate"><span class="pre">next()</span></code></a> to go
one token ahead.  The current active token is stored as <a class="reference internal" href="#jinja2.lexer.TokenStream.current" title="jinja2.lexer.TokenStream.current"><code class="xref py py-attr docutils literal notranslate"><span class="pre">current</span></code></a>.</p>
<dl class="attribute">
<dt id="jinja2.lexer.TokenStream.current">
<code class="descname">current</code><a class="headerlink" href="#jinja2.lexer.TokenStream.current" title="Permalink to this definition">¶</a></dt>
<dd><p>The current <a class="reference internal" href="#jinja2.lexer.Token" title="jinja2.lexer.Token"><code class="xref py py-class docutils literal notranslate"><span class="pre">Token</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.lexer.TokenStream.eos">
<code class="descname">eos</code><a class="headerlink" href="#jinja2.lexer.TokenStream.eos" title="Permalink to this definition">¶</a></dt>
<dd><p>Are we at the end of the stream?</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.lexer.TokenStream.expect">
<code class="descname">expect</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.lexer.TokenStream.expect" title="Permalink to this definition">¶</a></dt>
<dd><p>Expect a given token type and return it.  This accepts the same
argument as <a class="reference internal" href="#jinja2.lexer.Token.test" title="jinja2.lexer.Token.test"><code class="xref py py-meth docutils literal notranslate"><span class="pre">jinja2.lexer.Token.test()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.lexer.TokenStream.look">
<code class="descname">look</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.lexer.TokenStream.look" title="Permalink to this definition">¶</a></dt>
<dd><p>Look at the next token.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.lexer.TokenStream.next">
<code class="descname">next</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.lexer.TokenStream.next" title="Permalink to this definition">¶</a></dt>
<dd><p>Go one token ahead and return the old one</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.lexer.TokenStream.next_if">
<code class="descname">next_if</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.lexer.TokenStream.next_if" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the token test and return the token if it matched.
Otherwise the return value is <cite>None</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.lexer.TokenStream.push">
<code class="descname">push</code><span class="sig-paren">(</span><em>token</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.lexer.TokenStream.push" title="Permalink to this definition">¶</a></dt>
<dd><p>Push a token back to the stream.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.lexer.TokenStream.skip">
<code class="descname">skip</code><span class="sig-paren">(</span><em>n=1</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.lexer.TokenStream.skip" title="Permalink to this definition">¶</a></dt>
<dd><p>Got n tokens ahead.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.lexer.TokenStream.skip_if">
<code class="descname">skip_if</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.lexer.TokenStream.skip_if" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#jinja2.lexer.TokenStream.next_if" title="jinja2.lexer.TokenStream.next_if"><code class="xref py py-meth docutils literal notranslate"><span class="pre">next_if()</span></code></a> but only returns <cite>True</cite> or <cite>False</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="jinja2.lexer.Token">
<em class="property">class </em><code class="descclassname">jinja2.lexer.</code><code class="descname">Token</code><a class="headerlink" href="#jinja2.lexer.Token" title="Permalink to this definition">¶</a></dt>
<dd><p>Token class.</p>
<dl class="attribute">
<dt id="jinja2.lexer.Token.lineno">
<code class="descname">lineno</code><a class="headerlink" href="#jinja2.lexer.Token.lineno" title="Permalink to this definition">¶</a></dt>
<dd><p>The line number of the token</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.lexer.Token.type">
<code class="descname">type</code><a class="headerlink" href="#jinja2.lexer.Token.type" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of the token.  This string is interned so you may compare
it with arbitrary strings using the <cite>is</cite> operator.</p>
</dd></dl>

<dl class="attribute">
<dt id="jinja2.lexer.Token.value">
<code class="descname">value</code><a class="headerlink" href="#jinja2.lexer.Token.value" title="Permalink to this definition">¶</a></dt>
<dd><p>The value of the token.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.lexer.Token.test">
<code class="descname">test</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.lexer.Token.test" title="Permalink to this definition">¶</a></dt>
<dd><p>Test a token against a token expression.  This can either be a
token type or <code class="docutils literal notranslate"><span class="pre">'token_type:token_value'</span></code>.  This can only test
against string values and types.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.lexer.Token.test_any">
<code class="descname">test_any</code><span class="sig-paren">(</span><em>*iterable</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.lexer.Token.test_any" title="Permalink to this definition">¶</a></dt>
<dd><p>Test against multiple token expressions.</p>
</dd></dl>

</dd></dl>

<p>There is also a utility function in the lexer module that can count newline
characters in strings:</p>
<dl class="function">
<dt id="jinja2.lexer.count_newlines">
<code class="descclassname">jinja2.lexer.</code><code class="descname">count_newlines</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.lexer.count_newlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of newline characters in the string.  This is
useful for extensions that filter a stream.</p>
</dd></dl>

</div>
<div class="section" id="ast">
<h5>AST<a class="headerlink" href="#ast" title="Permalink to this headline">¶</a></h5>
<p>The AST (Abstract Syntax Tree) is used to represent a template after parsing.
It’s build of nodes that the compiler then converts into executable Python
code objects.  Extensions that provide custom statements can return nodes to
execute custom Python code.</p>
<p>The list below describes all nodes that are currently available.  The AST may
change between Jinja2 versions but will stay backwards compatible.</p>
<p>For more information have a look at the repr of <a class="reference internal" href="index.html#jinja2.Environment.parse" title="jinja2.Environment.parse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">jinja2.Environment.parse()</span></code></a>.</p>
<span class="target" id="module-jinja2.nodes"></span><dl class="class">
<dt id="jinja2.nodes.Node">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Node</code><a class="headerlink" href="#jinja2.nodes.Node" title="Permalink to this definition">¶</a></dt>
<dd><p>Baseclass for all Jinja2 nodes.  There are a number of nodes available
of different types.  There are three major types:</p>
<ul class="simple">
<li><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a>: statements</li>
<li><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a>: expressions</li>
<li><a class="reference internal" href="#jinja2.nodes.Helper" title="jinja2.nodes.Helper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Helper</span></code></a>: helper nodes</li>
<li><a class="reference internal" href="#jinja2.nodes.Template" title="jinja2.nodes.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a>: the outermost wrapper node</li>
</ul>
<p>All nodes have fields and attributes.  Fields may be other nodes, lists,
or arbitrary values.  Fields are passed to the constructor as regular
positional arguments, attributes as keyword arguments.  Each node has
two attributes: <cite>lineno</cite> (the line number of the node) and <cite>environment</cite>.
The <cite>environment</cite> attribute is set at the end of the parsing process for
all nodes automatically.</p>
<dl class="method">
<dt id="jinja2.nodes.Node.find">
<code class="descname">find</code><span class="sig-paren">(</span><em>node_type</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Node.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the first node of a given type.  If no such node exists the
return value is <cite>None</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.nodes.Node.find_all">
<code class="descname">find_all</code><span class="sig-paren">(</span><em>node_type</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Node.find_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all the nodes of a given type.  If the type is a tuple,
the check is performed for any of the tuple items.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.nodes.Node.iter_child_nodes">
<code class="descname">iter_child_nodes</code><span class="sig-paren">(</span><em>exclude=None</em>, <em>only=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Node.iter_child_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over all direct child nodes of the node.  This iterates
over all fields and yields the values of they are nodes.  If the value
of a field is a list all the nodes in that list are returned.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.nodes.Node.iter_fields">
<code class="descname">iter_fields</code><span class="sig-paren">(</span><em>exclude=None</em>, <em>only=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Node.iter_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>This method iterates over all fields that are defined and yields
<code class="docutils literal notranslate"><span class="pre">(key,</span> <span class="pre">value)</span></code> tuples.  Per default all fields are returned, but
it’s possible to limit that to some fields by providing the <cite>only</cite>
parameter or to exclude some using the <cite>exclude</cite> parameter.  Both
should be sets or tuples of field names.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.nodes.Node.set_ctx">
<code class="descname">set_ctx</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Node.set_ctx" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the context of a node and all child nodes.  Per default the
parser will all generate nodes that have a ‘load’ context as it’s the
most common one.  This method is used in the parser to set assignment
targets and other nodes to a store context.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.nodes.Node.set_environment">
<code class="descname">set_environment</code><span class="sig-paren">(</span><em>environment</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Node.set_environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the environment for all nodes.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.nodes.Node.set_lineno">
<code class="descname">set_lineno</code><span class="sig-paren">(</span><em>lineno</em>, <em>override=False</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Node.set_lineno" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the line numbers of the node and children.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Expr">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Expr</code><a class="headerlink" href="#jinja2.nodes.Expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Baseclass for all expressions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Node" title="jinja2.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="jinja2.nodes.Expr.as_const">
<code class="descname">as_const</code><span class="sig-paren">(</span><em>eval_ctx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Expr.as_const" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value of the expression as constant or raise
<a class="reference internal" href="#jinja2.nodes.Impossible" title="jinja2.nodes.Impossible"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Impossible</span></code></a> if this was not possible.</p>
<p>An <a class="reference internal" href="index.html#jinja2.nodes.EvalContext" title="jinja2.nodes.EvalContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">EvalContext</span></code></a> can be provided, if none is given
a default context is created which requires the nodes to have
an attached environment.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.4: </span>the <cite>eval_ctx</cite> parameter was added.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="jinja2.nodes.Expr.can_assign">
<code class="descname">can_assign</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Expr.can_assign" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if it’s possible to assign something to this node.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.BinExpr">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">BinExpr</code><span class="sig-paren">(</span><em>left</em>, <em>right</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.BinExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>Baseclass for all binary expressions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Add">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Add</code><span class="sig-paren">(</span><em>left</em>, <em>right</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the left to the right node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.BinExpr" title="jinja2.nodes.BinExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinExpr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.And">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">And</code><span class="sig-paren">(</span><em>left</em>, <em>right</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.And" title="Permalink to this definition">¶</a></dt>
<dd><p>Short circuited AND.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.BinExpr" title="jinja2.nodes.BinExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinExpr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Div">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Div</code><span class="sig-paren">(</span><em>left</em>, <em>right</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Div" title="Permalink to this definition">¶</a></dt>
<dd><p>Divides the left by the right node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.BinExpr" title="jinja2.nodes.BinExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinExpr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.FloorDiv">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">FloorDiv</code><span class="sig-paren">(</span><em>left</em>, <em>right</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.FloorDiv" title="Permalink to this definition">¶</a></dt>
<dd><p>Divides the left by the right node and truncates conver the
result into an integer by truncating.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.BinExpr" title="jinja2.nodes.BinExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinExpr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Mod">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Mod</code><span class="sig-paren">(</span><em>left</em>, <em>right</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Mod" title="Permalink to this definition">¶</a></dt>
<dd><p>Left modulo right.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.BinExpr" title="jinja2.nodes.BinExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinExpr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Mul">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Mul</code><span class="sig-paren">(</span><em>left</em>, <em>right</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Mul" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiplies the left with the right node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.BinExpr" title="jinja2.nodes.BinExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinExpr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Or">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Or</code><span class="sig-paren">(</span><em>left</em>, <em>right</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Or" title="Permalink to this definition">¶</a></dt>
<dd><p>Short circuited OR.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.BinExpr" title="jinja2.nodes.BinExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinExpr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Pow">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Pow</code><span class="sig-paren">(</span><em>left</em>, <em>right</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Pow" title="Permalink to this definition">¶</a></dt>
<dd><p>Left to the power of right.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.BinExpr" title="jinja2.nodes.BinExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinExpr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Sub">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Sub</code><span class="sig-paren">(</span><em>left</em>, <em>right</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Sub" title="Permalink to this definition">¶</a></dt>
<dd><p>Substract the right from the left node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.BinExpr" title="jinja2.nodes.BinExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinExpr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Call">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Call</code><span class="sig-paren">(</span><em>node</em>, <em>args</em>, <em>kwargs</em>, <em>dyn_args</em>, <em>dyn_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Call" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls an expression.  <cite>args</cite> is a list of arguments, <cite>kwargs</cite> a list
of keyword arguments (list of <a class="reference internal" href="#jinja2.nodes.Keyword" title="jinja2.nodes.Keyword"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keyword</span></code></a> nodes), and <cite>dyn_args</cite>
and <cite>dyn_kwargs</cite> has to be either <cite>None</cite> or a node that is used as
node for dynamic positional (<code class="docutils literal notranslate"><span class="pre">*args</span></code>) or keyword (<code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>)
arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Compare">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Compare</code><span class="sig-paren">(</span><em>expr</em>, <em>ops</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Compare" title="Permalink to this definition">¶</a></dt>
<dd><p>Compares an expression with some other expressions.  <cite>ops</cite> must be a
list of <a class="reference internal" href="#jinja2.nodes.Operand" title="jinja2.nodes.Operand"><code class="xref py py-class docutils literal notranslate"><span class="pre">Operand</span></code></a>s.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Concat">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Concat</code><span class="sig-paren">(</span><em>nodes</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Concat" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenates the list of expressions provided after converting them to
unicode.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.CondExpr">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">CondExpr</code><span class="sig-paren">(</span><em>test</em>, <em>expr1</em>, <em>expr2</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.CondExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>A conditional expression (inline if expression).  (<code class="docutils literal notranslate"><span class="pre">{{</span>
<span class="pre">foo</span> <span class="pre">if</span> <span class="pre">bar</span> <span class="pre">else</span> <span class="pre">baz</span> <span class="pre">}}</span></code>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.ContextReference">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">ContextReference</code><a class="headerlink" href="#jinja2.nodes.ContextReference" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current template context.  It can be used like a
<a class="reference internal" href="#jinja2.nodes.Name" title="jinja2.nodes.Name"><code class="xref py py-class docutils literal notranslate"><span class="pre">Name</span></code></a> node, with a <code class="docutils literal notranslate"><span class="pre">'load'</span></code> ctx and will return the
current <a class="reference internal" href="index.html#jinja2.runtime.Context" title="jinja2.runtime.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a> object.</p>
<p>Here an example that assigns the current template name to a
variable named <cite>foo</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Assign</span><span class="p">(</span><span class="n">Name</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span class="p">),</span>
       <span class="n">Getattr</span><span class="p">(</span><span class="n">ContextReference</span><span class="p">(),</span> <span class="s1">&#39;name&#39;</span><span class="p">))</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.EnvironmentAttribute">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">EnvironmentAttribute</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.EnvironmentAttribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads an attribute from the environment object.  This is useful for
extensions that want to call a callback stored on the environment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.ExtensionAttribute">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">ExtensionAttribute</code><span class="sig-paren">(</span><em>identifier</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.ExtensionAttribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the attribute of an extension bound to the environment.
The identifier is the identifier of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Extension</span></code>.</p>
<p>This node is usually constructed by calling the
<a class="reference internal" href="#jinja2.ext.Extension.attr" title="jinja2.ext.Extension.attr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">attr()</span></code></a> method on an extension.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Filter">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Filter</code><span class="sig-paren">(</span><em>node</em>, <em>name</em>, <em>args</em>, <em>kwargs</em>, <em>dyn_args</em>, <em>dyn_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>This node applies a filter on an expression.  <cite>name</cite> is the name of
the filter, the rest of the fields are the same as for <a class="reference internal" href="#jinja2.nodes.Call" title="jinja2.nodes.Call"><code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code></a>.</p>
<p>If the <cite>node</cite> of a filter is <cite>None</cite> the contents of the last buffer are
filtered.  Buffers are created by macros and filter blocks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Getattr">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Getattr</code><span class="sig-paren">(</span><em>node</em>, <em>attr</em>, <em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Getattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an attribute or item from an expression that is a ascii-only
bytestring and prefer the attribute.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Getitem">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Getitem</code><span class="sig-paren">(</span><em>node</em>, <em>arg</em>, <em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Getitem" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an attribute or item from an expression and prefer the item.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.ImportedName">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">ImportedName</code><span class="sig-paren">(</span><em>importname</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.ImportedName" title="Permalink to this definition">¶</a></dt>
<dd><p>If created with an import name the import name is returned on node
access.  For example <code class="docutils literal notranslate"><span class="pre">ImportedName('cgi.escape')</span></code> returns the <cite>escape</cite>
function from the cgi module on evaluation.  Imports are optimized by the
compiler so there is no need to assign them to local variables.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.InternalName">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">InternalName</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.InternalName" title="Permalink to this definition">¶</a></dt>
<dd><p>An internal name in the compiler.  You cannot create these nodes
yourself but the parser provides a
<a class="reference internal" href="#jinja2.parser.Parser.free_identifier" title="jinja2.parser.Parser.free_identifier"><code class="xref py py-meth docutils literal notranslate"><span class="pre">free_identifier()</span></code></a> method that creates
a new identifier for you.  This identifier is not available from the
template and is not threated specially by the compiler.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Literal">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Literal</code><a class="headerlink" href="#jinja2.nodes.Literal" title="Permalink to this definition">¶</a></dt>
<dd><p>Baseclass for literals.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Const">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Const</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Const" title="Permalink to this definition">¶</a></dt>
<dd><p>All constant values.  The parser will return this node for simple
constants such as <code class="docutils literal notranslate"><span class="pre">42</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;foo&quot;</span></code> but it can be used to store more
complex values such as lists too.  Only constants with a safe
representation (objects where <code class="docutils literal notranslate"><span class="pre">eval(repr(x))</span> <span class="pre">==</span> <span class="pre">x</span></code> is true).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Literal" title="jinja2.nodes.Literal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Literal</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Dict">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Dict</code><span class="sig-paren">(</span><em>items</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Any dict literal such as <code class="docutils literal notranslate"><span class="pre">{1:</span> <span class="pre">2,</span> <span class="pre">3:</span> <span class="pre">4}</span></code>.  The items must be a list of
<a class="reference internal" href="#jinja2.nodes.Pair" title="jinja2.nodes.Pair"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pair</span></code></a> nodes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Literal" title="jinja2.nodes.Literal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Literal</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.List">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">List</code><span class="sig-paren">(</span><em>items</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.List" title="Permalink to this definition">¶</a></dt>
<dd><p>Any list literal such as <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Literal" title="jinja2.nodes.Literal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Literal</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.TemplateData">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">TemplateData</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.TemplateData" title="Permalink to this definition">¶</a></dt>
<dd><p>A constant template string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Literal" title="jinja2.nodes.Literal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Literal</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Tuple">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Tuple</code><span class="sig-paren">(</span><em>items</em>, <em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>For loop unpacking and some other things like multiple arguments
for subscripts.  Like for <a class="reference internal" href="#jinja2.nodes.Name" title="jinja2.nodes.Name"><code class="xref py py-class docutils literal notranslate"><span class="pre">Name</span></code></a> <cite>ctx</cite> specifies if the tuple
is used for loading the names or storing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Literal" title="jinja2.nodes.Literal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Literal</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.MarkSafe">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">MarkSafe</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.MarkSafe" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark the wrapped expression as safe (wrap it as <cite>Markup</cite>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.MarkSafeIfAutoescape">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">MarkSafeIfAutoescape</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.MarkSafeIfAutoescape" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark the wrapped expression as safe (wrap it as <cite>Markup</cite>) but
only if autoescaping is active.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Name">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Name</code><span class="sig-paren">(</span><em>name</em>, <em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Name" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks up a name or stores a value in a name.
The <cite>ctx</cite> of the node can be one of the following values:</p>
<ul class="simple">
<li><cite>store</cite>: store a value in the name</li>
<li><cite>load</cite>: load that name</li>
<li><cite>param</cite>: like <cite>store</cite> but if the name was defined as function parameter.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Slice">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Slice</code><span class="sig-paren">(</span><em>start</em>, <em>stop</em>, <em>step</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a slice object.  This must only be used as argument for
<code class="xref py py-class docutils literal notranslate"><span class="pre">Subscript</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Test">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Test</code><span class="sig-paren">(</span><em>node</em>, <em>name</em>, <em>args</em>, <em>kwargs</em>, <em>dyn_args</em>, <em>dyn_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Test" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a test on an expression.  <cite>name</cite> is the name of the test, the
rest of the fields are the same as for <a class="reference internal" href="#jinja2.nodes.Call" title="jinja2.nodes.Call"><code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.UnaryExpr">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">UnaryExpr</code><span class="sig-paren">(</span><em>node</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.UnaryExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>Baseclass for all unary expressions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Expr" title="jinja2.nodes.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Neg">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Neg</code><span class="sig-paren">(</span><em>node</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Neg" title="Permalink to this definition">¶</a></dt>
<dd><p>Make the expression negative.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.UnaryExpr" title="jinja2.nodes.UnaryExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnaryExpr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Not">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Not</code><span class="sig-paren">(</span><em>node</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Not" title="Permalink to this definition">¶</a></dt>
<dd><p>Negate the expression.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.UnaryExpr" title="jinja2.nodes.UnaryExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnaryExpr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Pos">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Pos</code><span class="sig-paren">(</span><em>node</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Pos" title="Permalink to this definition">¶</a></dt>
<dd><p>Make the expression positive (noop for most expressions)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.UnaryExpr" title="jinja2.nodes.UnaryExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnaryExpr</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Helper">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Helper</code><a class="headerlink" href="#jinja2.nodes.Helper" title="Permalink to this definition">¶</a></dt>
<dd><p>Nodes that exist in a specific context only.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Node" title="jinja2.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Keyword">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Keyword</code><span class="sig-paren">(</span><em>key</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Keyword" title="Permalink to this definition">¶</a></dt>
<dd><p>A key, value pair for keyword arguments where key is a string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Helper" title="jinja2.nodes.Helper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Helper</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Operand">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Operand</code><span class="sig-paren">(</span><em>op</em>, <em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Operand" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds an operator and an expression.
The following operators are available: <code class="docutils literal notranslate"><span class="pre">%</span></code>, <code class="docutils literal notranslate"><span class="pre">**</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">//</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, <code class="docutils literal notranslate"><span class="pre">eq</span></code>, <code class="docutils literal notranslate"><span class="pre">gt</span></code>, <code class="docutils literal notranslate"><span class="pre">gteq</span></code>, <code class="docutils literal notranslate"><span class="pre">in</span></code>, <code class="docutils literal notranslate"><span class="pre">lt</span></code>, <code class="docutils literal notranslate"><span class="pre">lteq</span></code>, <code class="docutils literal notranslate"><span class="pre">ne</span></code>, <code class="docutils literal notranslate"><span class="pre">not</span></code>, <code class="docutils literal notranslate"><span class="pre">notin</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Helper" title="jinja2.nodes.Helper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Helper</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Pair">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Pair</code><span class="sig-paren">(</span><em>key</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Pair" title="Permalink to this definition">¶</a></dt>
<dd><p>A key, value pair for dicts.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Helper" title="jinja2.nodes.Helper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Helper</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Stmt">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Stmt</code><a class="headerlink" href="#jinja2.nodes.Stmt" title="Permalink to this definition">¶</a></dt>
<dd><p>Base node for all statements.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Node" title="jinja2.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Assign">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Assign</code><span class="sig-paren">(</span><em>target</em>, <em>node</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Assign" title="Permalink to this definition">¶</a></dt>
<dd><p>Assigns an expression to a target.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Block">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Block</code><span class="sig-paren">(</span><em>name</em>, <em>body</em>, <em>scoped</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Block" title="Permalink to this definition">¶</a></dt>
<dd><p>A node that represents a block.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Break">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Break</code><a class="headerlink" href="#jinja2.nodes.Break" title="Permalink to this definition">¶</a></dt>
<dd><p>Break a loop.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.CallBlock">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">CallBlock</code><span class="sig-paren">(</span><em>call</em>, <em>args</em>, <em>defaults</em>, <em>body</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.CallBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Like a macro without a name but a call instead.  <cite>call</cite> is called with
the unnamed macro as <cite>caller</cite> argument this node holds.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Continue">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Continue</code><a class="headerlink" href="#jinja2.nodes.Continue" title="Permalink to this definition">¶</a></dt>
<dd><p>Continue a loop.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.EvalContextModifier">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">EvalContextModifier</code><span class="sig-paren">(</span><em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.EvalContextModifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Modifies the eval context.  For each option that should be modified,
a <a class="reference internal" href="#jinja2.nodes.Keyword" title="jinja2.nodes.Keyword"><code class="xref py py-class docutils literal notranslate"><span class="pre">Keyword</span></code></a> has to be added to the <code class="xref py py-attr docutils literal notranslate"><span class="pre">options</span></code> list.</p>
<p>Example to change the <cite>autoescape</cite> setting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">EvalContextModifier</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="n">Keyword</span><span class="p">(</span><span class="s1">&#39;autoescape&#39;</span><span class="p">,</span> <span class="n">Const</span><span class="p">(</span><span class="kc">True</span><span class="p">))])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.ScopedEvalContextModifier">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">ScopedEvalContextModifier</code><span class="sig-paren">(</span><em>options</em>, <em>body</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.ScopedEvalContextModifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Modifies the eval context and reverts it later.  Works exactly like
<a class="reference internal" href="#jinja2.nodes.EvalContextModifier" title="jinja2.nodes.EvalContextModifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">EvalContextModifier</span></code></a> but will only modify the
<a class="reference internal" href="index.html#jinja2.nodes.EvalContext" title="jinja2.nodes.EvalContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">EvalContext</span></code></a> for nodes in the <code class="xref py py-attr docutils literal notranslate"><span class="pre">body</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.EvalContextModifier" title="jinja2.nodes.EvalContextModifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">EvalContextModifier</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.ExprStmt">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">ExprStmt</code><span class="sig-paren">(</span><em>node</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.ExprStmt" title="Permalink to this definition">¶</a></dt>
<dd><p>A statement that evaluates an expression and discards the result.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Extends">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Extends</code><span class="sig-paren">(</span><em>template</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Extends" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents an extends statement.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.FilterBlock">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">FilterBlock</code><span class="sig-paren">(</span><em>body</em>, <em>filter</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.FilterBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Node for filter sections.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.For">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">For</code><span class="sig-paren">(</span><em>target</em>, <em>iter</em>, <em>body</em>, <em>else_</em>, <em>test</em>, <em>recursive</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.For" title="Permalink to this definition">¶</a></dt>
<dd><p>The for loop.  <cite>target</cite> is the target for the iteration (usually a
<a class="reference internal" href="#jinja2.nodes.Name" title="jinja2.nodes.Name"><code class="xref py py-class docutils literal notranslate"><span class="pre">Name</span></code></a> or <a class="reference internal" href="#jinja2.nodes.Tuple" title="jinja2.nodes.Tuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple</span></code></a>), <cite>iter</cite> the iterable.  <cite>body</cite> is a list
of nodes that are used as loop-body, and <cite>else_</cite> a list of nodes for the
<cite>else</cite> block.  If no else node exists it has to be an empty list.</p>
<p>For filtered nodes an expression can be stored as <cite>test</cite>, otherwise <cite>None</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.FromImport">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">FromImport</code><span class="sig-paren">(</span><em>template</em>, <em>names</em>, <em>with_context</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.FromImport" title="Permalink to this definition">¶</a></dt>
<dd><p>A node that represents the from import tag.  It’s important to not
pass unsafe names to the name attribute.  The compiler translates the
attribute lookups directly into getattr calls and does <em>not</em> use the
subscript callback of the interface.  As exported variables may not
start with double underscores (which the parser asserts) this is not a
problem for regular Jinja code, but if this node is used in an extension
extra care must be taken.</p>
<p>The list of names may contain tuples if aliases are wanted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.If">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">If</code><span class="sig-paren">(</span><em>test</em>, <em>body</em>, <em>else_</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.If" title="Permalink to this definition">¶</a></dt>
<dd><p>If <cite>test</cite> is true, <cite>body</cite> is rendered, else <cite>else_</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Import">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Import</code><span class="sig-paren">(</span><em>template</em>, <em>target</em>, <em>with_context</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Import" title="Permalink to this definition">¶</a></dt>
<dd><p>A node that represents the import tag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Include">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Include</code><span class="sig-paren">(</span><em>template</em>, <em>with_context</em>, <em>ignore_missing</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Include" title="Permalink to this definition">¶</a></dt>
<dd><p>A node that represents the include tag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Macro">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Macro</code><span class="sig-paren">(</span><em>name</em>, <em>args</em>, <em>defaults</em>, <em>body</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Macro" title="Permalink to this definition">¶</a></dt>
<dd><p>A macro definition.  <cite>name</cite> is the name of the macro, <cite>args</cite> a list of
arguments and <cite>defaults</cite> a list of defaults if there are any.  <cite>body</cite> is
a list of nodes for the macro body.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Output">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Output</code><span class="sig-paren">(</span><em>nodes</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Output" title="Permalink to this definition">¶</a></dt>
<dd><p>A node that holds multiple expressions which are then printed out.
This is used both for the <cite>print</cite> statement and the regular template data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Scope">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Scope</code><span class="sig-paren">(</span><em>body</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Scope" title="Permalink to this definition">¶</a></dt>
<dd><p>An artificial scope.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Stmt" title="jinja2.nodes.Stmt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stmt</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="jinja2.nodes.Template">
<em class="property">class </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Template</code><span class="sig-paren">(</span><em>body</em><span class="sig-paren">)</span><a class="headerlink" href="#jinja2.nodes.Template" title="Permalink to this definition">¶</a></dt>
<dd><p>Node that represents a template.  This must be the outermost node that
is passed to the compiler.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Node type:</th><td class="field-body"><a class="reference internal" href="#jinja2.nodes.Node" title="jinja2.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="jinja2.nodes.Impossible">
<em class="property">exception </em><code class="descclassname">jinja2.nodes.</code><code class="descname">Impossible</code><a class="headerlink" href="#jinja2.nodes.Impossible" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised if the node could not perform a requested action.</p>
</dd></dl>

</div>
</div>
</div>
<span id="document-integration"></span><div class="section" id="integration">
<h3>Integration<a class="headerlink" href="#integration" title="Permalink to this headline">¶</a></h3>
<p>Jinja2 provides some code for integration into other tools such as frameworks,
the <a class="reference external" href="http://babel.edgewall.org/">Babel</a> library or your favourite editor for fancy code highlighting.
This is a brief description of whats included.</p>
<div class="section" id="babel-integration">
<span id="id1"></span><h4>Babel Integration<a class="headerlink" href="#babel-integration" title="Permalink to this headline">¶</a></h4>
<p>Jinja provides support for extracting gettext messages from templates via a
<a class="reference external" href="http://babel.edgewall.org/">Babel</a> extractor entry point called <cite>jinja2.ext.babel_extract</cite>.  The Babel
support is implemented as part of the <a class="reference internal" href="index.html#i18n-extension"><span class="std std-ref">i18n Extension</span></a> extension.</p>
<p>Gettext messages extracted from both <cite>trans</cite> tags and code expressions.</p>
<p>To extract gettext messages from templates, the project needs a Jinja2 section
in its Babel extraction method <a class="reference external" href="http://babel.edgewall.org/wiki/Documentation/messages.html#extraction-method-mapping-and-configuration">mapping file</a>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[jinja2: **/templates/**.html]</span>
<span class="na">encoding</span> <span class="o">=</span> <span class="s">utf-8</span>
</pre></div>
</div>
<p>The syntax related options of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code> are also available as
configuration values in the mapping file.  For example to tell the extraction
that templates use <code class="docutils literal notranslate"><span class="pre">%</span></code> as <cite>line_statement_prefix</cite> you can use this code:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[jinja2: **/templates/**.html]</span>
<span class="na">encoding</span> <span class="o">=</span> <span class="s">utf-8</span>
<span class="na">line_statement_prefix</span> <span class="o">=</span> <span class="s">%</span>
</pre></div>
</div>
<p><a class="reference internal" href="index.html#jinja-extensions"><span class="std std-ref">Extensions</span></a> may also be defined by passing a comma separated list
of import paths as <cite>extensions</cite> value.  The i18n extension is added
automatically.</p>
</div>
<div class="section" id="pylons">
<h4>Pylons<a class="headerlink" href="#pylons" title="Permalink to this headline">¶</a></h4>
<p>With <a class="reference external" href="http://www.pylonshq.com/">Pylons</a> 0.9.7 onwards it’s incredible easy to integrate Jinja into a
Pylons powered application.</p>
<p>The template engine is configured in <cite>config/environment.py</cite>.  The configuration
for Jinja2 looks something like that:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">PackageLoader</span>
<span class="n">config</span><span class="p">[</span><span class="s1">&#39;pylons.app_globals&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">jinja_env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span>
    <span class="n">loader</span><span class="o">=</span><span class="n">PackageLoader</span><span class="p">(</span><span class="s1">&#39;yourapplication&#39;</span><span class="p">,</span> <span class="s1">&#39;templates&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>After that you can render Jinja templates by using the <cite>render_jinja</cite> function
from the <cite>pylons.templating</cite> module.</p>
<p>Additionally it’s a good idea to set the Pylons’ <cite>c</cite> object into strict mode.
Per default any attribute to not existing attributes on the <cite>c</cite> object return
an empty string and not an undefined object.  To change this just use this
snippet and add it into your <cite>config/environment.py</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;pylons.strict_c&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="section" id="textmate">
<h4>TextMate<a class="headerlink" href="#textmate" title="Permalink to this headline">¶</a></h4>
<p>Inside the <cite>ext</cite> folder of Jinja2 there is a bundle for TextMate that supports
syntax highlighting for Jinja1 and Jinja2 for text based templates as well as
HTML.  It also contains a few often used snippets.</p>
</div>
<div class="section" id="vim">
<h4>Vim<a class="headerlink" href="#vim" title="Permalink to this headline">¶</a></h4>
<p>A syntax plugin for <a class="reference external" href="http://www.vim.org/">Vim</a> exists in the Vim-scripts directory as well as the
ext folder of Jinja2.  <a class="reference external" href="http://www.vim.org/scripts/script.php?script_id=1856">The script</a>
supports Jinja1 and Jinja2.  Once installed two file types are available <cite>jinja</cite>
and <cite>htmljinja</cite>.  The first one for text based templates, the latter for HTML
templates.</p>
<p>Copy the files into your <cite>syntax</cite> folder.</p>
</div>
</div>
<span id="document-switching"></span><div class="section" id="switching-from-other-template-engines">
<h3>Switching from other Template Engines<a class="headerlink" href="#switching-from-other-template-engines" title="Permalink to this headline">¶</a></h3>
<p>If you have used a different template engine in the past and want to swtich
to Jinja2 here is a small guide that shows the basic syntatic and semantic
changes between some common, similar text template engines for Python.</p>
<div class="section" id="jinja1">
<h4>Jinja1<a class="headerlink" href="#jinja1" title="Permalink to this headline">¶</a></h4>
<p>Jinja2 is mostly compatible with Jinja1 in terms of API usage and template
syntax.  The differences between Jinja1 and 2 are explained in the following
list.</p>
<div class="section" id="api">
<h5>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt>Loaders</dt>
<dd>Jinja2 uses a different loader API.  Because the internal representation
of templates changed there is no longer support for external caching
systems such as memcached.  The memory consumed by templates is comparable
with regular Python modules now and external caching doesn’t give any
advantage.  If you have used a custom loader in the past have a look at
the new <a class="reference internal" href="index.html#loaders"><span class="std std-ref">loader API</span></a>.</dd>
<dt>Loading templates from strings</dt>
<dd>In the past it was possible to generate templates from a string with the
default environment configuration by using <cite>jinja.from_string</cite>.  Jinja2
provides a <code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code> class that can be used to do the same, but
with optional additional configuration.</dd>
<dt>Automatic unicode conversion</dt>
<dd>Jinja1 performed automatic conversion of bytestrings in a given encoding
into unicode objects.  This conversion is no longer implemented as it
was inconsistent as most libraries are using the regular Python ASCII
bytestring to Unicode conversion.  An application powered by Jinja2
<em>has to</em> use unicode internally everywhere or make sure that Jinja2 only
gets unicode strings passed.</dd>
<dt>i18n</dt>
<dd>Jinja1 used custom translators for internationalization.  i18n is now
available as Jinja2 extension and uses a simpler, more gettext friendly
interface and has support for babel.  For more details see
<a class="reference internal" href="index.html#i18n-extension"><span class="std std-ref">i18n Extension</span></a>.</dd>
<dt>Internal methods</dt>
<dd>Jinja1 exposed a few internal methods on the environment object such
as <cite>call_function</cite>, <cite>get_attribute</cite> and others.  While they were marked
as being an internal method it was possible to override them.  Jinja2
doesn’t have equivalent methods.</dd>
<dt>Sandbox</dt>
<dd>Jinja1 was running sandbox mode by default.  Few applications actually
used that feature so it became optional in Jinja2.  For more details
about the sandboxed execution see <code class="xref py py-class docutils literal notranslate"><span class="pre">SandboxedEnvironment</span></code>.</dd>
<dt>Context</dt>
<dd>Jinja1 had a stacked context as storage for variables passed to the
environment.  In Jinja2 a similar object exists but it doesn’t allow
modifications nor is it a singleton.  As inheritance is dynamic now
multiple context objects may exist during template evaluation.</dd>
<dt>Filters and Tests</dt>
<dd>Filters and tests are regular functions now.  It’s no longer necessary
and allowed to use factory functions.</dd>
</dl>
</div>
<div class="section" id="templates">
<h5>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h5>
<p>Jinja2 has mostly the same syntax as Jinja1.  What’s different is that
macros require parentheses around the argument list now.</p>
<p>Additionally Jinja2 allows dynamic inheritance now and dynamic includes.
The old helper function <cite>rendertemplate</cite> is gone now, <cite>include</cite> can be used
instead.  Includes no longer import macros and variable assignments, for
that the new <cite>import</cite> tag is used.  This concept is explained in the
<a class="reference internal" href="index.html#import"><span class="std std-ref">Import</span></a> documentation.</p>
<p>Another small change happened in the <cite>for</cite>-tag.  The special loop variable
doesn’t have a <cite>parent</cite> attribute, instead you have to alias the loop
yourself.  See <a class="reference internal" href="index.html#accessing-the-parent-loop"><span class="std std-ref">Accessing the parent Loop</span></a> for more details.</p>
</div>
</div>
<div class="section" id="django">
<h4>Django<a class="headerlink" href="#django" title="Permalink to this headline">¶</a></h4>
<p>If you have previously worked with Django templates, you should find
Jinja2 very familiar.  In fact, most of the syntax elements look and
work the same.</p>
<p>However, Jinja2 provides some more syntax elements covered in the
documentation and some work a bit different.</p>
<p>This section covers the template changes.  As the API is fundamentally
different we won’t cover it here.</p>
<div class="section" id="method-calls">
<h5>Method Calls<a class="headerlink" href="#method-calls" title="Permalink to this headline">¶</a></h5>
<p>In Django method calls work implicitly.  With Jinja2 you have to specify that
you want to call an object.  Thus this Django code:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">page</span> <span class="k">in</span> <span class="nv">user.get_created_pages</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>will look like this in Jinja:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">page</span> <span class="k">in</span> <span class="nv">user.get_created_pages</span><span class="o">()</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>This allows you to pass variables to the function which is also used for macros
which is not possible in Django.</p>
</div>
<div class="section" id="conditions">
<h5>Conditions<a class="headerlink" href="#conditions" title="Permalink to this headline">¶</a></h5>
<p>In Django you can use the following constructs to check for equality:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">ifequal</span> <span class="nv">foo</span> <span class="s2">&quot;bar&quot;</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endifequal</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>In Jinja2 you can use the normal if statement in combination with operators:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">foo</span> <span class="o">==</span> <span class="s1">&#39;bar&#39;</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>You can also have multiple elif branches in your template:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">something</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">elif</span> <span class="nv">otherthing</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">elif</span> <span class="nv">foothing</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="filter-arguments">
<h5>Filter Arguments<a class="headerlink" href="#filter-arguments" title="Permalink to this headline">¶</a></h5>
<p>Jinja2 provides more than one argument for filters.  Also the syntax for
argument passing is different.  A template that looks like this in Django:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">items</span><span class="o">|</span><span class="nf">join</span><span class="s2">:&quot;, &quot;</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>looks like this in Jinja2:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">items</span><span class="o">|</span><span class="nf">join</span><span class="o">(</span><span class="s1">&#39;, &#39;</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>In fact it’s a bit more verbose but it allows different types of arguments -
including variables - and more than one of them.</p>
</div>
<div class="section" id="tests">
<h5>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h5>
<p>In addition to filters there also are tests you can perform using the is
operator.  Here are some examples:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">user.user_id</span> <span class="k">is</span> <span class="nf">odd</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nv">user.username</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> is odd
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    hmm. <span class="cp">{{</span> <span class="nv">user.username</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> looks pretty normal
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="loops">
<h5>Loops<a class="headerlink" href="#loops" title="Permalink to this headline">¶</a></h5>
<p>For loops work very similar to Django, the only incompatibility is that in
Jinja2 the special variable for the loop context is called <cite>loop</cite> and not
<cite>forloop</cite> like in Django.</p>
</div>
<div class="section" id="cycle">
<h5>Cycle<a class="headerlink" href="#cycle" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">cycle</span> <span class="pre">%}</span></code> tag does not exist in Jinja because of it’s implicit
nature.  However you can achieve mostly the same by using the <cite>cycle</cite>
method on a loop object.</p>
<p>The following Django template:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">cycle</span> <span class="s1">&#39;odd&#39;</span> <span class="s1">&#39;even&#39;</span> <span class="cp">%}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">user</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Would look like this in Jinja:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.cycle</span><span class="o">(</span><span class="s1">&#39;odd&#39;</span><span class="o">,</span> <span class="s1">&#39;even&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">user</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>There is no equivalent of <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">cycle</span> <span class="pre">...</span> <span class="pre">as</span> <span class="pre">variable</span> <span class="pre">%}</span></code>.</p>
</div>
</div>
<div class="section" id="mako">
<h4>Mako<a class="headerlink" href="#mako" title="Permalink to this headline">¶</a></h4>
<p>If you have used Mako so far and want to switch to Jinja2 you can configure
Jinja2 to look more like Mako:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="s1">&#39;&lt;%&#39;</span><span class="p">,</span> <span class="s1">&#39;%&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;${&#39;</span><span class="p">,</span> <span class="s1">&#39;}&#39;</span><span class="p">,</span> <span class="s1">&#39;%&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Once the environment is configure like that Jinja2 should be able to interpret
a small subset of Mako templates.  Jinja2 does not support embedded Python code
so you would have to move that out of the template.  The syntax for defs (in
Jinja2 defs are called macros) and template inheritance is different too.  The
following Mako template:</p>
<div class="highlight-html+mako notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;%</span><span class="nb">inherit</span> <span class="na">file=</span><span class="s">&quot;layout.html&quot;</span> <span class="cp">/&gt;</span>
<span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">&quot;title()&quot;</span><span class="cp">&gt;</span>Page Title<span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">%</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">:</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">${</span><span class="n">item</span><span class="cp">}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">%</span><span class="k"> endfor</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Looks like this in Jinja2 with the above configuration:</p>
<div class="highlight-html+mako notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;%</span> <span class="n">extends</span> <span class="s2">&quot;layout.html&quot;</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="n">block</span> <span class="n">title</span> <span class="cp">%&gt;</span>Page Title<span class="cp">&lt;%</span> <span class="n">endblock</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="n">block</span> <span class="n">body</span> <span class="cp">%&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">%</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">:</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">${</span><span class="n">item</span><span class="cp">}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">%</span><span class="k"> endfor</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">&lt;%</span> <span class="n">endblock</span> <span class="cp">%&gt;</span>
</pre></div>
</div>
</div>
</div>
<span id="document-tricks"></span><div class="section" id="tips-and-tricks">
<h3>Tips and Tricks<a class="headerlink" href="#tips-and-tricks" title="Permalink to this headline">¶</a></h3>
<p>This part of the documentation shows some tips and tricks for Jinja2
templates.</p>
<div class="section" id="null-master-fallback">
<span id="id1"></span><h4>Null-Master Fallback<a class="headerlink" href="#null-master-fallback" title="Permalink to this headline">¶</a></h4>
<p>Jinja2 supports dynamic inheritance and does not distinguish between parent
and child template as long as no <cite>extends</cite> tag is visited.  While this leads
to the surprising behavior that everything before the first <cite>extends</cite> tag
including whitespace is printed out instead of being igored, it can be used
for a neat trick.</p>
<p>Usually child templates extend from one template that adds a basic HTML
skeleton.  However it’s possible put the <cite>extends</cite> tag into an <cite>if</cite> tag to
only extend from the layout template if the <cite>standalone</cite> variable evaluates
to false which it does per default if it’s not defined.  Additionally a very
basic skeleton is added to the file so that if it’s indeed rendered with
<cite>standalone</cite> set to <cite>True</cite> a very basic HTML skeleton is added:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="k">not</span> <span class="nv">standalone</span> <span class="cp">%}{%</span> <span class="k">extends</span> <span class="s1">&#39;master.html&#39;</span> <span class="cp">%}{%</span> <span class="k">endif</span> -<span class="cp">%}</span>
<span class="cp">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>The Page Title<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;style.css&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is the page body.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="alternating-rows">
<h4>Alternating Rows<a class="headerlink" href="#alternating-rows" title="Permalink to this headline">¶</a></h4>
<p>If you want to have different styles for each row of a table or
list you can use the <cite>cycle</cite> method on the <cite>loop</cite> object:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">row</span> <span class="k">in</span> <span class="nv">rows</span> <span class="cp">%}</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.cycle</span><span class="o">(</span><span class="s1">&#39;odd&#39;</span><span class="o">,</span> <span class="s1">&#39;even&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">row</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><cite>cycle</cite> can take an unlimited amount of strings.  Each time this
tag is encountered the next item from the list is rendered.</p>
</div>
<div class="section" id="highlighting-active-menu-items">
<h4>Highlighting Active Menu Items<a class="headerlink" href="#highlighting-active-menu-items" title="Permalink to this headline">¶</a></h4>
<p>Often you want to have a navigation bar with an active navigation
item.  This is really simple to achieve.  Because assignments outside
of <cite>block</cite>s in child templates are global and executed before the layout
template is evaluated it’s possible to define the active menu item in the
child template:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;layout.html&quot;</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">active_page</span> <span class="o">=</span> <span class="s2">&quot;index&quot;</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The layout template can then access <cite>active_page</cite>.  Additionally it makes
sense to defined a default for that variable:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">navigation_bar</span> <span class="o">=</span> <span class="o">[</span>
    <span class="o">(</span><span class="s1">&#39;/&#39;</span><span class="o">,</span> <span class="s1">&#39;index&#39;</span><span class="o">,</span> <span class="s1">&#39;Index&#39;</span><span class="o">),</span>
    <span class="o">(</span><span class="s1">&#39;/downloads/&#39;</span><span class="o">,</span> <span class="s1">&#39;downloads&#39;</span><span class="o">,</span> <span class="s1">&#39;Downloads&#39;</span><span class="o">),</span>
    <span class="o">(</span><span class="s1">&#39;/about/&#39;</span><span class="o">,</span> <span class="s1">&#39;about&#39;</span><span class="o">,</span> <span class="s1">&#39;About&#39;</span><span class="o">)</span>
<span class="o">]</span> -<span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">active_page</span> <span class="o">=</span> <span class="nv">active_page</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;index&#39;</span><span class="o">)</span> -<span class="cp">%}</span>
...
<span class="p">&lt;</span><span class="nt">ul</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;navigation&quot;</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">href</span><span class="o">,</span> <span class="nv">id</span><span class="o">,</span> <span class="nv">caption</span> <span class="k">in</span> <span class="nv">navigation_bar</span> <span class="cp">%}</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">id</span> <span class="o">==</span> <span class="nv">active_page</span> <span class="cp">%}</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;active&quot;</span><span class="cp">{%</span> <span class="k">endif</span>
  <span class="cp">%}</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">href</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">caption</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>/li&gt;
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
...
</pre></div>
</div>
</div>
<div class="section" id="accessing-the-parent-loop">
<span id="id2"></span><h4>Accessing the parent Loop<a class="headerlink" href="#accessing-the-parent-loop" title="Permalink to this headline">¶</a></h4>
<p>The special <cite>loop</cite> variable always points to the innermost loop.  If it’s
desired to have access to an outer loop it’s possible to alias it:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">row</span> <span class="k">in</span> <span class="nv">table</span> <span class="cp">%}</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="cp">{%</span> <span class="k">set</span> <span class="nv">rowloop</span> <span class="o">=</span> <span class="nb">loop</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">for</span> <span class="nv">cell</span> <span class="k">in</span> <span class="nv">row</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;cell-</span><span class="cp">{{</span> <span class="nv">rowloop.index</span> <span class="cp">}}</span><span class="s">-</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">cell</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="additional-information">
<h2>Additional Information<a class="headerlink" href="#additional-information" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-faq"></span><div class="section" id="frequently-asked-questions">
<h3>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h3>
<p>This page answers some of the often asked questions about Jinja.</p>
<div class="section" id="why-is-it-called-jinja">
<h4>Why is it called Jinja?<a class="headerlink" href="#why-is-it-called-jinja" title="Permalink to this headline">¶</a></h4>
<p>The name Jinja was chosen because it’s the name of a Japanese temple and
temple and template share a similar pronunciation.  It is not named after
the city in Uganda.</p>
</div>
<div class="section" id="how-fast-is-it">
<h4>How fast is it?<a class="headerlink" href="#how-fast-is-it" title="Permalink to this headline">¶</a></h4>
<p>We really hate benchmarks especially since they don’t reflect much.  The
performance of a template depends on many factors and you would have to
benchmark different engines in different situations.  The benchmarks from the
testsuite show that Jinja2 has a similar performance to <a class="reference external" href="http://www.makotemplates.org/">Mako</a> and is between
10 and 20 times faster than Django’s template engine or Genshi.  These numbers
should be taken with tons of salt as the benchmarks that took these numbers
only test a few performance related situations such as looping.  Generally
speaking the performance of a template engine doesn’t matter much as the
usual bottleneck in a web application is either the database or the application
code.</p>
</div>
<div class="section" id="how-compatible-is-jinja2-with-django">
<h4>How Compatible is Jinja2 with Django?<a class="headerlink" href="#how-compatible-is-jinja2-with-django" title="Permalink to this headline">¶</a></h4>
<p>The default syntax of Jinja2 matches Django syntax in many ways.  However
this similarity doesn’t mean that you can use a Django template unmodified
in Jinja2.  For example filter arguments use a function call syntax rather
than a colon to separate filter name and arguments.  Additionally the
extension interface in Jinja is fundamentally different from the Django one
which means that your custom tags won’t work any longer.</p>
<p>Generally speaking you will use much less custom extensions as the Jinja
template system allows you to use a certain subset of Python expressions
which can replace most Django extensions.  For example instead of using
something like this:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">load</span> <span class="nv">comments</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">get_latest_comments</span> <span class="m">10</span> <span class="k">as</span> <span class="nv">latest_comments</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">comment</span> <span class="k">in</span> <span class="nv">latest_comments</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>You will most likely provide an object with attributes to retrieve
comments from the database:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">comment</span> <span class="k">in</span> <span class="nv">models.comments.latest</span><span class="o">(</span><span class="m">10</span><span class="o">)</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Or directly provide the model for quick testing:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">comment</span> <span class="k">in</span> <span class="nv">Comment.objects.order_by</span><span class="o">(</span><span class="s1">&#39;-pub_date&#39;</span><span class="o">)[:</span><span class="m">10</span><span class="o">]</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Please keep in mind that even though you may put such things into templates
it still isn’t a good idea.  Queries should go into the view code and not
the template!</p>
</div>
<div class="section" id="isn-t-it-a-terrible-idea-to-put-logic-into-templates">
<h4>Isn’t it a terrible idea to put Logic into Templates?<a class="headerlink" href="#isn-t-it-a-terrible-idea-to-put-logic-into-templates" title="Permalink to this headline">¶</a></h4>
<p>Without a doubt you should try to remove as much logic from templates as
possible.  But templates without any logic mean that you have to do all
the processing in the code which is boring and stupid.  A template engine
that does that is shipped with Python and called <cite>string.Template</cite>.  Comes
without loops and if conditions and is by far the fastest template engine
you can get for Python.</p>
<p>So some amount of logic is required in templates to keep everyone happy.
And Jinja leaves it pretty much to you how much logic you want to put into
templates.  There are some restrictions in what you can do and what not.</p>
<p>Jinja2 neither allows you to put arbitrary Python code into templates nor
does it allow all Python expressions.  The operators are limited to the
most common ones and more advanced expressions such as list comprehensions
and generator expressions are not supported.  This keeps the template engine
easier to maintain and templates more readable.</p>
</div>
<div class="section" id="why-is-autoescaping-not-the-default">
<h4>Why is Autoescaping not the Default?<a class="headerlink" href="#why-is-autoescaping-not-the-default" title="Permalink to this headline">¶</a></h4>
<p>There are multiple reasons why automatic escaping is not the default mode
and also not the recommended one.  While automatic escaping of variables
means that you will less likely have an XSS problem it also causes a huge
amount of extra processing in the template engine which can cause serious
performance problems.  As Python doesn’t provide a way to mark strings as
unsafe Jinja has to hack around that limitation by providing a custom
string class (the <code class="xref py py-class docutils literal notranslate"><span class="pre">Markup</span></code> string) that safely interacts with safe
and unsafe strings.</p>
<p>With explicit escaping however the template engine doesn’t have to perform
any safety checks on variables.  Also a human knows not to escape integers
or strings that may never contain characters one has to escape or already
HTML markup.  For example when iterating over a list over a table of
integers and floats for a table of statistics the template designer can
omit the escaping because he knows that integers or floats don’t contain
any unsafe parameters.</p>
<p>Additionally Jinja2 is a general purpose template engine and not only used
for HTML/XML generation.  For example you may generate LaTeX, emails,
CSS, JavaScript, or configuration files.</p>
</div>
<div class="section" id="why-is-the-context-immutable">
<h4>Why is the Context immutable?<a class="headerlink" href="#why-is-the-context-immutable" title="Permalink to this headline">¶</a></h4>
<p>When writing a <code class="xref py py-func docutils literal notranslate"><span class="pre">contextfunction()</span></code> or something similar you may have
noticed that the context tries to stop you from modifying it.  If you have
managed to modify the context by using an internal context API you may
have noticed that changes in the context don’t seem to be visible in the
template.  The reason for this is that Jinja uses the context only as
primary data source for template variables for performance reasons.</p>
<p>If you want to modify the context write a function that returns a variable
instead that one can assign to a variable by using set:</p>
<div class="highlight-html+jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">comments</span> <span class="o">=</span> <span class="nv">get_latest_comments</span><span class="o">()</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="what-is-the-speedups-module-and-why-is-it-missing">
<h4>What is the speedups module and why is it missing?<a class="headerlink" href="#what-is-the-speedups-module-and-why-is-it-missing" title="Permalink to this headline">¶</a></h4>
<p>To achieve a good performance with automatic escaping enabled, the escaping
function was also implemented in pure C in older Jinja2 releases and used if
Jinja2 was installed with the speedups module.</p>
<p>Because this feature itself is very useful for non-template engines as
well it was moved into a separate project on PyPI called <a class="reference external" href="http://pypi.python.org/pypi/MarkupSafe">MarkupSafe</a>.</p>
<p>Jinja2 no longer ships with a C implementation of it but only the pure
Python implementation.  It will however check if MarkupSafe is available
and installed, and if it is, use the Markup class from MarkupSafe.</p>
<p>So if you want the speedups, just import MarkupSafe.</p>
</div>
<div class="section" id="my-tracebacks-look-weird-what-s-happening">
<h4>My tracebacks look weird.  What’s happening?<a class="headerlink" href="#my-tracebacks-look-weird-what-s-happening" title="Permalink to this headline">¶</a></h4>
<p>If the debugsupport module is not compiled and you are using a Python
installation without ctypes (Python 2.4 without ctypes, Jython or Google’s
AppEngine) Jinja2 is unable to provide correct debugging information and
the traceback may be incomplete.  There is currently no good workaround
for Jython or the AppEngine as ctypes is unavailable there and it’s not
possible to use the debugsupport extension.</p>
</div>
<div class="section" id="why-is-there-no-python-2-3-support">
<h4>Why is there no Python 2.3 support?<a class="headerlink" href="#why-is-there-no-python-2-3-support" title="Permalink to this headline">¶</a></h4>
<p>Python 2.3 is missing a lot of features that are used heavily in Jinja2.  This
decision was made as with the upcoming Python 2.6 and 3.0 versions it becomes
harder to maintain the code for older Python versions.  If you really need
Python 2.3 support you either have to use <a class="reference external" href="http://jinja.pocoo.org/1/">Jinja 1</a> or other templating
engines that still support 2.3.</p>
</div>
<div class="section" id="my-macros-are-overriden-by-something">
<h4>My Macros are overriden by something<a class="headerlink" href="#my-macros-are-overriden-by-something" title="Permalink to this headline">¶</a></h4>
<p>In some situations the Jinja scoping appears arbitrary:</p>
<p>layout.tmpl:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">macro</span> <span class="nv">foo</span><span class="o">()</span> <span class="cp">%}</span><span class="x">LAYOUT</span><span class="cp">{%</span> <span class="k">endmacro</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>child.tmpl:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;layout.tmpl&#39;</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">macro</span> <span class="nv">foo</span><span class="o">()</span> <span class="cp">%}</span><span class="x">CHILD</span><span class="cp">{%</span> <span class="k">endmacro</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}{{</span> <span class="nv">foo</span><span class="o">()</span> <span class="cp">}}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>This will print <code class="docutils literal notranslate"><span class="pre">LAYOUT</span></code> in Jinja2.  This is a side effect of having
the parent template evaluated after the child one.  This allows child
templates passing information to the parent template.  To avoid this
issue rename the macro or variable in the parent template to have an
uncommon prefix.</p>
</div>
</div>
<span id="document-changelog"></span><span class="target" id="module-jinja2"></span><div class="section" id="jinja2-changelog">
<h3>Jinja2 Changelog<a class="headerlink" href="#jinja2-changelog" title="Permalink to this headline">¶</a></h3>
<div class="section" id="version-2-6">
<h4>Version 2.6<a class="headerlink" href="#version-2-6" title="Permalink to this headline">¶</a></h4>
<p>(codename Convolution, released on July 24th 2011)</p>
<ul class="simple">
<li>internal attributes now raise an internal attribute error now instead
of returning an undefined.  This fixes problems when passing undefined
objects to Python semantics expecting APIs.</li>
<li>traceback support now works properly for PyPy.  (Tested with 1.4)</li>
<li>implemented operator intercepting for sandboxed environments.  This
allows application developers to disable builtin operators for better
security.  (For instance limit the mathematical operators to actual
integers instead of longs)</li>
<li>groupby filter now supports dotted notation for grouping by attributes
of attributes.</li>
<li>scoped blocks not properly treat toplevel assignments and imports.
Previously an import suddenly “disappeared” in a scoped block.</li>
<li>automatically detect newer Python interpreter versions before loading code
from bytecode caches to prevent segfaults on invalid opcodes.  The segfault
in earlier Jinja2 versions here was not a Jinja2 bug but a limitation in
the underlying Python interpreter.  If you notice Jinja2 segfaulting in
earlier versions after an upgrade of the Python interpreter you don’t have
to upgrade, it’s enough to flush the bytecode cache.  This just no longer
makes this necessary, Jinja2 will automatically detect these cases now.</li>
<li>the sum filter can now sum up values by attribute.  This is a backwards
incompatible change.  The argument to the filter previously was the
optional starting index which defaultes to zero.  This now became the
second argument to the function because it’s rarely used.</li>
<li>like sum, sort now also makes it possible to order items by attribute.</li>
<li>like sum and sort, join now also is able to join attributes of objects
as string.</li>
<li>the internal eval context now has a reference to the environment.</li>
<li>added a mapping test to see if an object is a dict or an object with
a similar interface.</li>
</ul>
</div>
<div class="section" id="version-2-5-5">
<h4>Version 2.5.5<a class="headerlink" href="#version-2-5-5" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>(re-release of 2.5.4 with built documentation removed for filesize.</dt>
<dd>Released on October 18th 2010)</dd>
</dl>
<ul class="simple">
<li>built documentation is no longer part of release.</li>
</ul>
</div>
<div class="section" id="version-2-5-4">
<h4>Version 2.5.4<a class="headerlink" href="#version-2-5-4" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on October 17th 2010)</p>
<ul class="simple">
<li>Fixed extensions not loading properly with overlays.</li>
<li>Work around a bug in cpython for the debugger that causes segfaults
on 64bit big-endian architectures.</li>
</ul>
</div>
<div class="section" id="version-2-5-3">
<h4>Version 2.5.3<a class="headerlink" href="#version-2-5-3" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on October 17th 2010)</p>
<ul class="simple">
<li>fixed an operator precedence error introduced in 2.5.2.  Statements
like “-foo.bar” had their implicit parentheses applied around the
first part of the expression (“(-foo).bar”) instead of the more
correct “-(foo.bar)”.</li>
</ul>
</div>
<div class="section" id="version-2-5-2">
<h4>Version 2.5.2<a class="headerlink" href="#version-2-5-2" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on August 18th 2010)</p>
<ul class="simple">
<li>improved setup.py script to better work with assumptions people
might still have from it (<code class="docutils literal notranslate"><span class="pre">--with-speedups</span></code>).</li>
<li>fixed a packaging error that excluded the new debug support.</li>
</ul>
</div>
<div class="section" id="version-2-5-1">
<h4>Version 2.5.1<a class="headerlink" href="#version-2-5-1" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on August 17th 2010)</p>
<ul class="simple">
<li>StopIteration exceptions raised by functions called from templates
are now intercepted and converted to undefineds.  This solves a
lot of debugging grief.  (StopIteration is used internally to
abort template execution)</li>
<li>improved performance of macro calls slightly.</li>
<li>babel extraction can now properly extract newstyle gettext calls.</li>
<li>using the variable <cite>num</cite> in newstyle gettext for something else
than the pluralize count will no longer raise a <code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code>.</li>
<li>removed builtin markup class and switched to markupsafe.  For backwards
compatibility the pure Python implementation still exists but is
pulled from markupsafe by the Jinja2 developers.  The debug support
went into a separate feature called “debugsupport” and is disabled
by default because it is only relevant for Python 2.4</li>
<li>fixed an issue with unary operators having the wrong precendence.</li>
</ul>
</div>
<div class="section" id="version-2-5">
<h4>Version 2.5<a class="headerlink" href="#version-2-5" title="Permalink to this headline">¶</a></h4>
<p>(codename Incoherence, relased on May 29th 2010)</p>
<ul class="simple">
<li>improved the sort filter (should have worked like this for a
long time) by adding support for case insensitive searches.</li>
<li>fixed a bug for getattribute constant folding.</li>
<li>support for newstyle gettext translations which result in a
nicer in-template user interface and more consistent
catalogs. (<a class="reference internal" href="index.html#newstyle-gettext"><span class="std std-ref">Newstyle Gettext</span></a>)</li>
<li>it’s now possible to register extensions after an environment
was created.</li>
</ul>
</div>
<div class="section" id="version-2-4-1">
<h4>Version 2.4.1<a class="headerlink" href="#version-2-4-1" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on April 20th 2010)</p>
<ul class="simple">
<li>fixed an error reporting bug for undefineds.</li>
</ul>
</div>
<div class="section" id="version-2-4">
<h4>Version 2.4<a class="headerlink" href="#version-2-4" title="Permalink to this headline">¶</a></h4>
<p>(codename Correlation, released on April 13th 2010)</p>
<ul class="simple">
<li>the environment template loading functions now transparently
pass through a template object if it was passed to it.  This
makes it possible to import or extend from a template object
that was passed to the template.</li>
<li>added a <a class="reference internal" href="index.html#jinja2.ModuleLoader" title="jinja2.ModuleLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleLoader</span></code></a> that can load templates from
precompiled sources.  The environment now features a method
to compile the templates from a configured loader into a zip
file or folder.</li>
<li>the _speedups C extension now supports Python 3.</li>
<li>added support for autoescaping toggling sections and support
for evaluation contexts (<a class="reference internal" href="index.html#eval-context"><span class="std std-ref">Evaluation Context</span></a>).</li>
<li>extensions have a priority now.</li>
</ul>
</div>
<div class="section" id="version-2-3-1">
<h4>Version 2.3.1<a class="headerlink" href="#version-2-3-1" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on February 19th 2010)</p>
<ul class="simple">
<li>fixed an error reporting bug on all python versions</li>
<li>fixed an error reporting bug on Python 2.4</li>
</ul>
</div>
<div class="section" id="version-2-3">
<h4>Version 2.3<a class="headerlink" href="#version-2-3" title="Permalink to this headline">¶</a></h4>
<p>(3000 Pythons, released on February 10th 2010)</p>
<ul class="simple">
<li>fixes issue with code generator that causes unbound variables
to be generated if set was used in if-blocks and other small
identifier problems.</li>
<li>include tags are now able to select between multiple templates
and take the first that exists, if a list of templates is
given.</li>
<li>fixed a problem with having call blocks in outer scopes that
have an argument that is also used as local variable in an
inner frame (#360).</li>
<li>greatly improved error message reporting (#339)</li>
<li>implicit tuple expressions can no longer be totally empty.
This change makes <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">%}...{%</span> <span class="pre">endif</span> <span class="pre">%}</span></code> a syntax error
now. (#364)</li>
<li>added support for translator comments if extracted via babel.</li>
<li>added with-statement extension.</li>
<li>experimental Python 3 support.</li>
</ul>
</div>
<div class="section" id="version-2-2-1">
<h4>Version 2.2.1<a class="headerlink" href="#version-2-2-1" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on September 14th 2009)</p>
<ul class="simple">
<li>fixes some smaller problems for Jinja2 on Jython.</li>
</ul>
</div>
<div class="section" id="version-2-2">
<h4>Version 2.2<a class="headerlink" href="#version-2-2" title="Permalink to this headline">¶</a></h4>
<p>(codename Kong, released on September 13th 2009)</p>
<ul class="simple">
<li>Include statements can now be marked with <code class="docutils literal notranslate"><span class="pre">ignore</span> <span class="pre">missing</span></code> to skip
non existing templates.</li>
<li>Priority of <cite>not</cite> raised.  It’s now possible to write <cite>not foo in bar</cite>
as an alias to <cite>foo not in bar</cite> like in python.  Previously the grammar
required parentheses (<cite>not (foo in bar)</cite>) which was odd.</li>
<li>Fixed a bug that caused syntax errors when defining macros or using the
<cite>{% call %}</cite> tag inside loops.</li>
<li>Fixed a bug in the parser that made <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">foo[1,</span> <span class="pre">2]</span> <span class="pre">}}</span></code> impossible.</li>
<li>Made it possible to refer to names from outer scopes in included templates
that were unused in the callers frame (#327)</li>
<li>Fixed a bug that caused internal errors if names where used as iteration
variable and regular variable <em>after</em> the loop if that variable was unused
<em>before</em> the loop.  (#331)</li>
<li>Added support for optional <cite>scoped</cite> modifier to blocks.</li>
<li>Added support for line-comments.</li>
<li>Added the <cite>meta</cite> module.</li>
<li>Renamed (undocumented) attribute “overlay” to “overlayed” on the
environment because it was clashing with a method of the same name.</li>
<li>speedup extension is now disabled by default.</li>
</ul>
</div>
<div class="section" id="version-2-1-1">
<h4>Version 2.1.1<a class="headerlink" href="#version-2-1-1" title="Permalink to this headline">¶</a></h4>
<p>(Bugfix release)</p>
<ul class="simple">
<li>Fixed a translation error caused by looping over empty recursive loops.</li>
</ul>
</div>
<div class="section" id="version-2-1">
<h4>Version 2.1<a class="headerlink" href="#version-2-1" title="Permalink to this headline">¶</a></h4>
<p>(codename Yasuzō, released on November 23rd 2008)</p>
<ul class="simple">
<li>fixed a bug with nested loops and the special loop variable.  Before the
change an inner loop overwrote the loop variable from the outer one after
iteration.</li>
<li>fixed a bug with the i18n extension that caused the explicit pluralization
block to look up the wrong variable.</li>
<li>fixed a limitation in the lexer that made <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">foo.0.0</span> <span class="pre">}}</span></code> impossible.</li>
<li>index based subscribing of variables with a constant value returns an
undefined object now instead of raising an index error.  This was a bug
caused by eager optimizing.</li>
<li>the i18n extension looks up <cite>foo.ugettext</cite> now followed by <cite>foo.gettext</cite>
if an translations object is installed.  This makes dealing with custom
translations classes easier.</li>
<li>fixed a confusing behavior with conditional extending.  loops were partially
executed under some conditions even though they were not part of a visible
area.</li>
<li>added <cite>sort</cite> filter that works like <cite>dictsort</cite> but for arbitrary sequences.</li>
<li>fixed a bug with empty statements in macros.</li>
<li>implemented a bytecode cache system.  (<a class="reference internal" href="index.html#bytecode-cache"><span class="std std-ref">Bytecode Cache</span></a>)</li>
<li>the template context is now weakref-able</li>
<li>inclusions and imports “with context” forward all variables now, not only
the initial context.</li>
<li>added a cycle helper called <cite>cycler</cite>.</li>
<li>added a joining helper called <cite>joiner</cite>.</li>
<li>added a <cite>compile_expression</cite> method to the environment that allows compiling
of Jinja expressions into callable Python objects.</li>
<li>fixed an escaping bug in urlize</li>
</ul>
</div>
<div class="section" id="version-2-0">
<h4>Version 2.0<a class="headerlink" href="#version-2-0" title="Permalink to this headline">¶</a></h4>
<p>(codename jinjavitus, released on July 17th 2008)</p>
<ul>
<li><p class="first">the subscribing of objects (looking up attributes and items) changed from
slightly.  It’s now possible to give attributes or items a higher priority
by either using dot-notation lookup or the bracket syntax.  This also
changed the AST slightly.  <cite>Subscript</cite> is gone and was replaced with
<a class="reference internal" href="index.html#jinja2.nodes.Getitem" title="jinja2.nodes.Getitem"><code class="xref py py-class docutils literal notranslate"><span class="pre">Getitem</span></code></a> and <a class="reference internal" href="index.html#jinja2.nodes.Getattr" title="jinja2.nodes.Getattr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Getattr</span></code></a>.</p>
<p>For more information see <a class="reference internal" href="index.html#notes-on-subscriptions"><span class="std std-ref">the implementation details</span></a>.</p>
</li>
<li><p class="first">added support for preprocessing and token stream filtering for extensions.
This would allow extensions to allow simplified gettext calls in template
data and something similar.</p>
</li>
<li><p class="first">added <a class="reference internal" href="index.html#jinja2.environment.TemplateStream.dump" title="jinja2.environment.TemplateStream.dump"><code class="xref py py-meth docutils literal notranslate"><span class="pre">jinja2.environment.TemplateStream.dump()</span></code></a>.</p>
</li>
<li><p class="first">added missing support for implicit string literal concatenation.
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">&quot;foo&quot;</span> <span class="pre">&quot;bar&quot;</span> <span class="pre">}}</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">&quot;foobar&quot;</span> <span class="pre">}}</span></code></p>
</li>
<li><p class="first"><cite>else</cite> is optional for conditional expressions.  If not given it evaluates
to <cite>false</cite>.</p>
</li>
<li><p class="first">improved error reporting for undefined values by providing a position.</p>
</li>
<li><p class="first"><cite>filesizeformat</cite> filter uses decimal prefixes now per default and can be
set to binary mode with the second parameter.</p>
</li>
<li><p class="first">fixed bug in finalizer</p>
</li>
</ul>
</div>
<div class="section" id="version-2-0rc1">
<h4>Version 2.0rc1<a class="headerlink" href="#version-2-0rc1" title="Permalink to this headline">¶</a></h4>
<p>(no codename, released on June 9th 2008)</p>
<ul class="simple">
<li>first release of Jinja2</li>
</ul>
</div>
</div>
</div>
<p>If you can’t find the information you’re looking for, have a look at the
index of try to find it using the search function:</p>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
<p>If you can’t find the information you’re looking for, have a look at the
index of try to find it using the search function:</p>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="index.html#document-index">
  <img class="logo" src="_static/jinja-small.png" alt="Logo"/>
</a></p><h3>About Jinja2</h3>
<p>
  Jinja2 is a full featured template engine for Python. It has full unicode
  support, an optional integrated sandboxed execution environment, widely used
  and BSD licensed.
</p>
<h3>Other Formats</h3>
<p>
  You can download the documentation in other formats as well:
</p>
<ul>
  <li><a href="http://jinja.pocoo.org/docs/jinja-docs.pdf">as PDF</a>
  <li><a href="http://jinja.pocoo.org/docs/jinja-docs.zip">as zipped HTML</a>
</ul>
<h3>Useful Links</h3>
<ul>
  <li><a href="http://jinja.pocoo.org/">The Jinja2 Website</a></li>
  <li><a href="http://pypi.python.org/pypi/Jinja2">Jinja2 @ PyPI</a></li>
  <li><a href="http://github.com/mitsuhiko/jinja2">Jinja2 @ github</a></li>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy; Copyright 2008, Armin Ronacher.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
    </div>
  </body>
</html>